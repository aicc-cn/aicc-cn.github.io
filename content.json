{"meta":{"title":"AICC","subtitle":"Artificial Intelligence Chinese Community","description":"Artificial Intelligence Chinese Community","author":"AICC","url":"https://aicc-cn.github.io","root":"/"},"pages":[{"title":"about","date":"2022-03-25T13:11:08.000Z","updated":"2022-03-25T13:11:08.443Z","comments":true,"path":"about/index.html","permalink":"https://aicc-cn.github.io/about/index.html","excerpt":"","text":""},{"title":"machine","date":"2022-03-25T12:50:14.000Z","updated":"2022-03-25T12:50:14.759Z","comments":true,"path":"machine/index.html","permalink":"https://aicc-cn.github.io/machine/index.html","excerpt":"","text":""},{"title":"æ‰€æœ‰æ ‡ç­¾","date":"2022-03-25T13:35:42.421Z","updated":"2022-03-25T13:35:42.421Z","comments":true,"path":"tags/index.html","permalink":"https://aicc-cn.github.io/tags/index.html","excerpt":"","text":""},{"title":"æ‰€æœ‰åˆ†ç±»","date":"2022-03-25T13:05:20.764Z","updated":"2022-03-25T13:05:20.764Z","comments":true,"path":"categories/index.html","permalink":"https://aicc-cn.github.io/categories/index.html","excerpt":"","text":""}],"posts":[{"title":"ã€åå››ã€‘å…‰æµä¼°è®¡","slug":"2019-03-14-cv-image_LK","date":"2019-03-22T16:00:00.000Z","updated":"2022-03-25T13:52:01.871Z","comments":true,"path":"2019/03/23/2019-03-14-cv-image_LK/","link":"","permalink":"https://aicc-cn.github.io/2019/03/23/2019-03-14-cv-image_LK/","excerpt":"","text":"å…‰æµä¼°è®¡ã€ç®€ä»‹ã€‘ â€‹ åœ¨è®¡ç®—æœºè§†è§‰ä¸­ï¼ŒLucasâ€“Kanadeå…‰æµç®—æ³•æ˜¯ä¸€ç§ä¸¤å¸§å·®åˆ†çš„å…‰æµä¼°è®¡ç®—æ³•ã€‚å®ƒç”±Bruce D. Lucas å’Œ Takeo Kanadeæå‡ºã€‚ ã€å…‰æµçš„æ¦‚å¿µã€‘ (Optical flow or optic flow)å®ƒæ˜¯ä¸€ç§è¿åŠ¨æ¨¡å¼ï¼Œè¿™ç§è¿åŠ¨æ¨¡å¼æŒ‡çš„æ˜¯ä¸€ä¸ªç‰©ä½“ã€è¡¨é¢ã€è¾¹ç¼˜åœ¨ä¸€ä¸ªè§†è§’ä¸‹ç”±ä¸€ä¸ªè§‚å¯Ÿè€…ï¼ˆæ¯”å¦‚çœ¼ç›ã€æ‘„åƒå¤´ç­‰ï¼‰å’ŒèƒŒæ™¯ä¹‹é—´å½¢æˆçš„æ˜æ˜¾ç§»åŠ¨ã€‚ â€‹ å…‰æµæŠ€æœ¯ï¼Œå¦‚è¿åŠ¨æ£€æµ‹å’Œå›¾åƒåˆ†å‰²ï¼Œæ—¶é—´ç¢°æ’ï¼Œè¿åŠ¨è¡¥å¿ç¼–ç ï¼Œä¸‰ç»´ç«‹ä½“è§†å·®ï¼Œéƒ½æ˜¯åˆ©ç”¨äº†è¿™ç§è¾¹ç¼˜æˆ–è¡¨é¢è¿åŠ¨çš„æŠ€æœ¯ã€‚ â€‹ äºŒç»´å›¾åƒçš„ç§»åŠ¨ç›¸å¯¹äºè§‚å¯Ÿè€…è€Œè¨€æ˜¯ä¸‰ç»´ç‰©ä½“ç§»åŠ¨çš„åœ¨å›¾åƒå¹³é¢çš„æŠ•å½±ã€‚ â€‹ æœ‰åºçš„å›¾åƒå¯ä»¥ä¼°è®¡å‡ºäºŒç»´å›¾åƒçš„ç¬æ—¶å›¾åƒé€Ÿç‡æˆ–ç¦»æ•£å›¾åƒè½¬ç§»ã€‚ ã€å…‰æµç®—æ³•ã€‘ â€‹ å®ƒè¯„ä¼°äº†ä¸¤å¹…å›¾åƒçš„ä¹‹é—´çš„å˜å½¢ï¼Œå®ƒçš„åŸºæœ¬å‡è®¾æ˜¯ä½“ç´ å’Œå›¾åƒåƒç´ å®ˆæ’ã€‚å®ƒå‡è®¾ä¸€ä¸ªç‰©ä½“çš„é¢œè‰²åœ¨å‰åä¸¤å¸§æ²¡æœ‰å·¨å¤§è€Œæ˜æ˜¾çš„å˜åŒ–ã€‚ â€‹ åŸºäºè¿™ä¸ªæ€è·¯ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°å›¾åƒçº¦æŸæ–¹ç¨‹ã€‚ä¸åŒçš„å…‰æµç®—æ³•è§£å†³äº†å‡å®šäº†ä¸åŒé™„åŠ æ¡ä»¶çš„å…‰æµé—®é¢˜ã€‚ ã€åŸºæœ¬æ¨¡å‹ã€‘ åŸºæœ¬æ€æƒ³ï¼šè™½ç„¶$t+1$çš„æ—¶å€™ä½ç½®è¿›è¡Œäº†ç§»åŠ¨ï¼Œå¦‚æœæˆ‘ä»¬çŸ¥é“ç°åº¦æ˜¯è¿ç»­å˜åŒ–çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡åƒç´ çš„å˜åŒ–æ¨æ¼”å½“å‰è¿™ä¸ªä¸­å¿ƒç‚¹å¤§æ¦‚ç§»åŠ¨äº†å¤šå°‘ã€‚ é€šè¿‡å½“å‰ä½ç½®äº®åº¦åœ¨$I_xï¼ŒI_y$ä»¥åŠç›¸é‚»ä¸¤å¸§ä¸­ç°åº¦çš„å˜åŒ–å€¼$I_t$ï¼Œæ¥æ¨æ¼”$\\delta _xï¼Œ\\delta_y$. æˆ‘ä»¬åœ¨æ£€æµ‹ç‰©ä½“ä¸Šå»ºç«‹ä¸€ä¸ªå°æ–¹æ ¼é‡Œçš„æ‰€æœ‰åƒç´ ä½ç§»ç›¸åŒï¼Œå»ºç«‹çŸ©é˜µæ–¹ç¨‹ç»„ï¼Œè§£å‡ºuã€vä¸¤ä¸ªæœªçŸ¥æ•°ã€‚ æœ€ä¼˜åŒ–é—®é¢˜ï¼ˆè¶…å®šæ–¹ç¨‹æ±‚è§£ï¼‰ $min |Au-b|$ æœ€å°äºŒä¹˜è§£ $u&#x3D;(A^TA)^{-1}A^Tb$ åŒºåŸŸåƒç´ åªæœ‰2ä¸ªæ—¶ï¼Œå°±æ˜¯2å…ƒ1æ¬¡æ–¹ç¨‹ç»„æ±‚è§£ï¼ å¤šä¸ªåƒç´ ï¼Œæ¯”å¦‚3âˆ—3æ—¶ï¼Œåˆ™æ˜¯æ±‚ä¸Šè¿°æœ€å°äºŒä¹˜è§£. ã€Lucasâ€“Kanadeæ–¹æ³•ã€‘ â€‹ è¿™ä¸ªç®—æ³•æ˜¯æœ€å¸¸è§ï¼Œæœ€æµè¡Œçš„ã€‚å®ƒè®¡ç®—ä¸¤å¸§åœ¨æ—¶é—´t åˆ°t + Î´tä¹‹é—´æ¯ä¸ªæ¯ä¸ªåƒç´ ç‚¹ä½ç½®çš„ç§»åŠ¨ã€‚ ç”±äºå®ƒæ˜¯åŸºäºå›¾åƒä¿¡å·çš„æ³°å‹’çº§æ•°ï¼Œè¿™ç§æ–¹æ³•ç§°ä¸ºå·®åˆ†ï¼Œè¿™å°±æ˜¯å¯¹äºç©ºé—´å’Œæ—¶é—´åæ ‡ä½¿ç”¨åå¯¼æ•°ã€‚ å¯ä¿¡åº¦åˆ¤æ–­ï¼šçŸ©é˜µæ±‚é€†æ˜¯å¦èƒ½å®ç°ï¼Ÿ è¯¥è¡¨è¾¾å¼æ˜¯å’Œæ²¿ç€xå’Œyçš„æ¢¯åº¦æ˜¯å¯†åˆ‡ç›¸å…³çš„ï¼Œåªè¦å…¶ä¸­ä¸€ä¸ªä¸º0æ—¶ï¼Œ$A^TA$å°±ä¸å¯é€†ã€‚åªè¦å½“è¯¥åŒºåŸŸçš„åƒç´ ç‚¹æ¯”è¾ƒå¹³æ»‘ï¼ŒçŸ©é˜µå°±å¯é€† é€šè¿‡æ±‚ç‰¹å¾å€¼æ¥åˆ¤æ–­è®¡ç®—å¯ä¿¡ã€‚ ä¸¤ä¸ªç‰¹å¾å€¼éƒ½è¿œå¤§äº0ï¼Œé‚£ä¹ˆå°±å¯é€†ï¼Œå¦åˆ™å°±ä¸å¯é€†æˆ–è€…å¾ˆéš¾æ±‚é€†ã€‚ ã€é‡‘å­—å¡”L-Kæ–¹æ³•ã€‘ é’ˆå¯¹ç›®æ ‡è¿åŠ¨å¾ˆå¿«çš„æƒ…å†µï¼Œç”¨åŸå§‹çš„L-Kæ–¹æ³•å°±æ²¡æœ‰åŠæ³•å¤„ç†äº†ï¼Œ éœ€è¦é‡‡ç”¨å›¾åƒé‡‘å­—å¡”çš„æ–¹æ³•ã€‚æŠŠå›¾åƒä»å°åˆ°å¤§çš„é¡ºåºæ’åˆ—ã€‚ â€‹ é‡‘å­—å¡”ç‰¹å¾è·Ÿè¸ªç®—æ³•æè¿°å¦‚ä¸‹ï¼šé¦–å…ˆï¼Œå…‰æµå’Œä»¿å°„å˜æ¢çŸ©é˜µåœ¨æœ€é«˜ä¸€å±‚çš„å›¾åƒä¸Šè®¡ç®—å‡ºï¼›å°†ä¸Šä¸€å±‚çš„è®¡ç®—ç»“æœä½œä¸ºåˆå§‹å€¼ä¼ é€’ç»™ä¸‹ä¸€å±‚å›¾åƒï¼Œè¿™ä¸€å±‚çš„å›¾åƒåœ¨è¿™ä¸ªåˆå§‹å€¼çš„åŸºç¡€ä¸Šï¼Œè®¡ç®—è¿™ä¸€å±‚çš„å…‰æµå’Œä»¿å°„å˜åŒ–çŸ©é˜µï¼›å†å°†è¿™ä¸€å±‚çš„å…‰æµå’Œä»¿å°„çŸ©é˜µä½œä¸ºåˆå§‹å€¼ä¼ é€’ç»™ä¸‹ä¸€å±‚å›¾åƒï¼Œç›´åˆ°ä¼ é€’ç»™æœ€åä¸€å±‚ï¼Œå³åŸå§‹å›¾åƒå±‚ï¼Œè¿™ä¸€å±‚è®¡ç®—å‡ºæ¥çš„å…‰æµå’Œä»¿å°„å˜æ¢çŸ©é˜µä½œä¸ºæœ€åçš„å…‰æµå’Œä»¿å°„å˜æ¢çŸ©é˜µçš„ç»“æœã€‚ ç”¨ä¸åŒåƒç´ çš„å›¾ç‰‡å»ºç«‹é‡‘å­—å¡” è¿è¡ŒL-Kæ–¹æ³• ä¼˜ç‚¹ï¼šå¯å¤„ç†å¤§ä½ç§»ï¼›å¯¹å™ªå£°æ›´ä¸æ•æ„Ÿã€‚ ã€æ•°å­¦æ¨¡å‹ã€‘ æ€»ç»“ å…‰æµä¼°è®¡åŸºäºæ’å®šäº®åº¦å‡è®¾æ¨¡å‹ L-Kå…‰æµä¼°è®¡æ–¹æ³•åˆ©ç”¨äº†é‚»åŸŸå†…çš„è¿åŠ¨ä¸å˜æ€§ é‡‘å­—å¡”L-Kæ–¹æ³•å¯æœ‰æ•ˆæé«˜å…‰æµè®¡ç®—å¯¹å¤§ä½ç§»çš„é²æ£’æ€§ ä»£ç å®ä¾‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081#!/usr/bin/env python# -*- coding: utf-8 -*-# @Time : 2019/1/22 22:20# @Author : Seven# @File : sightDemo.py# @Software: PyCharmimport cv2import numpy as np# åŠ è½½è§†é¢‘cap = cv2.VideoCapture()cap.open(&#x27;768x576.avi&#x27;)if not cap.isOpened(): print(&quot;æ— æ³•æ‰“å¼€è§†é¢‘æ–‡ä»¶&quot;)lk_params = dict(winSize=(15, 15), maxLevel=2, criteria=(cv2.TERM_CRITERIA_EPS | cv2.TERM_CRITERIA_COUNT, 10, 0.03))feature_params = dict(maxCorners=500, qualityLevel=0.3, minDistance=7, blockSize=7)class App: def __init__(self, video_src): # æ„é€ æ–¹æ³•ï¼Œåˆå§‹åŒ–ä¸€äº›å‚æ•°å’Œè§†é¢‘è·¯å¾„ self.track_len = 10 self.detect_interval = 5 self.tracks = [] self.cam = cv2.VideoCapture(video_src) self.frame_idx = 0 def run(self): # å…‰æµè¿è¡Œæ–¹æ³• while True: ret, frame = self.cam.read() # è¯»å–è§†é¢‘å¸§ if ret: frame_gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY) # è½¬åŒ–ä¸ºç°åº¦è™šå›¾åƒ vis = frame.copy() if len(self.tracks) &gt; 0: # æ£€æµ‹åˆ°è§’ç‚¹åè¿›è¡Œå…‰æµè·Ÿè¸ª img0, img1 = self.prev_gray, frame_gray p0 = np.float32([tr[-1] for tr in self.tracks]).reshape(-1, 1, 2) p1, st, err = cv2.calcOpticalFlowPyrLK(img0, img1, p0, None, **lk_params) # å‰ä¸€å¸§çš„è§’ç‚¹å’Œå½“å‰å¸§çš„å›¾åƒä½œä¸ºè¾“å…¥æ¥å¾—åˆ°è§’ç‚¹åœ¨å½“å‰å¸§çš„ä½ç½® p0r, st, err = cv2.calcOpticalFlowPyrLK(img1, img0, p1, None, **lk_params) # å½“å‰å¸§è·Ÿè¸ªåˆ°çš„è§’ç‚¹åŠå›¾åƒå’Œå‰ä¸€å¸§çš„å›¾åƒä½œä¸ºè¾“å…¥æ¥æ‰¾åˆ°å‰ä¸€å¸§çš„è§’ç‚¹ä½ç½® d = abs(p0 - p0r).reshape(-1, 2).max(-1) # å¾—åˆ°è§’ç‚¹å›æº¯ä¸å‰ä¸€å¸§å®é™…è§’ç‚¹çš„ä½ç½®å˜åŒ–å…³ç³» good = d &lt; 1 # åˆ¤æ–­då†…çš„å€¼æ˜¯å¦å°äº1ï¼Œå¤§äº1è·Ÿè¸ªè¢«è®¤ä¸ºæ˜¯é”™è¯¯çš„è·Ÿè¸ªç‚¹ new_tracks = [] for tr, (x, y), good_flag in zip(self.tracks, p1.reshape(-1, 2), good): # å°†è·Ÿè¸ªæ­£ç¡®çš„ç‚¹åˆ—å…¥æˆåŠŸè·Ÿè¸ªç‚¹ if not good_flag: continue tr.append((x, y)) if len(tr) &gt; self.track_len: del tr[0] new_tracks.append(tr) cv2.circle(vis, (x, y), 2, (0, 255, 0), -1) self.tracks = new_tracks cv2.polylines(vis, [np.int32(tr) for tr in self.tracks], False, (0, 255, 0)) # ä»¥ä¸Šä¸€æŒ¯è§’ç‚¹ä¸ºåˆå§‹ç‚¹ï¼Œå½“å‰å¸§è·Ÿè¸ªåˆ°çš„ç‚¹ä¸ºç»ˆç‚¹åˆ’çº¿ # draw_str(vis, (20, 20), &#x27;track count: %d&#x27; % len(self.tracks)) if self.frame_idx % self.detect_interval == 0: # æ¯5å¸§æ£€æµ‹ä¸€æ¬¡ç‰¹å¾ç‚¹ mask = np.zeros_like(frame_gray) # åˆå§‹åŒ–å’Œè§†é¢‘å¤§å°ç›¸åŒçš„å›¾åƒ mask[:] = 255 # å°†maskèµ‹å€¼255ä¹Ÿå°±æ˜¯ç®—å…¨éƒ¨å›¾åƒçš„è§’ç‚¹ for x, y in [np.int32(tr[-1]) for tr in self.tracks]: # è·Ÿè¸ªçš„è§’ç‚¹ç”»åœ† cv2.circle(mask, (x, y), 5, 0, -1) p = cv2.goodFeaturesToTrack(frame_gray, mask=mask, **feature_params) # åƒç´ çº§åˆ«è§’ç‚¹æ£€æµ‹ if p is not None: for x, y in np.float32(p).reshape(-1, 2): self.tracks.append([(x, y)]) # å°†æ£€æµ‹åˆ°çš„è§’ç‚¹æ”¾åœ¨å¾…è·Ÿè¸ªåºåˆ—ä¸­ self.frame_idx += 1 self.prev_gray = frame_gray cv2.imshow(&#x27;lk_track&#x27;, vis) ch = 0xFF &amp; cv2.waitKey(100) if ch == 27: breakApp(&#x27;768x576.avi&#x27;).run()","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"https://aicc-cn.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"https://aicc-cn.github.io/tags/OpenCV/"}],"author":"Seven"},{"title":"ã€åå…­ã€‘ç›¸å¯¹ä½å§¿æµ‹é‡ç®—æ³•","slug":"2019-03-16-cv-image_position","date":"2019-03-22T16:00:00.000Z","updated":"2022-03-25T13:52:13.975Z","comments":true,"path":"2019/03/23/2019-03-16-cv-image_position/","link":"","permalink":"https://aicc-cn.github.io/2019/03/23/2019-03-16-cv-image_position/","excerpt":"","text":"ç›¸å¯¹ä½å§¿æµ‹é‡ç®—æ³•ã€åŸºäºç©ºé—´å¤šç‚¹ã€‘ ç›¸å¯¹ä½å§¿ä¼°è®¡çš„åŸºæœ¬é—®é¢˜ å·²çŸ¥ï¼šç›¸æœºå†…å‚æ•°ï¼›å¤šä¸ªç©ºé—´ä¸Šçš„ç‰¹å¾ç‚¹(éå…±é¢)åœ¨ç›®æ ‡åæ ‡ç³»(3D)å’Œç›¸å¹³é¢åæ ‡ç³»(2D)åæ ‡ã€‚ è¾“å‡ºï¼šç›®æ ‡åæ ‡ç³»ç›¸å¯¹ç›¸æœºåæ ‡ç³»çš„ä½ç½®å’Œå§¿æ€ã€‚ åŸºæœ¬æ€æƒ³ç¤ºæ„ çº¿æ€§æ±‚è§£ å¯¹æ¯ä¸€ä¸ªç‰¹å¾ç‚¹ï¼Œå‡æœ‰ï¼š å¯¹æ¯ä¸€ä¸ªç‰¹å¾ç‚¹ï¼Œå‡æœ‰ï¼š å±•å¼€ç¬¬ä¸€è¡Œ ç±»ä¼¼å±•å¼€ç¬¬äºŒã€ç¬¬ä¸‰è¡Œï¼š æ¶ˆå»$Z_c$ ä¸ŠäºŒå¼å³ä¾§åˆ†æ¯ç§»åˆ°å·¦è¾¹ï¼Œå¾—ï¼š æ•´ç†ä¸ºçŸ©é˜µå½¢å¼ å¯¹äºæ¯ä¸€ä¸ªç‚¹éƒ½å¯ä»¥å½¢æˆå¦‚ä¸Šä¸¤ä¸ªæ–¹ç¨‹ï¼Œå¯¹äºå¤šä¸ªç‚¹ï¼Œå¯è¿›è¡Œå †å ï¼Œå¹¶è®°æˆçŸ©é˜µå½¢å¼ï¼š æœ‰å…­ä¸ªæˆ–ä»¥ä¸Šç‰¹å¾ç‚¹ä¸”éå…±é¢æ—¶ï¼Œå¯æ±‚è§£ï¼š ä¸Šé¢æ±‚å‡ºçš„åªæœ‰11ä¸ªå‚æ•°ï¼Œä¸”å¤šä¸€ä¸ª&#x2F;t3. æœ€åä¸€ä¸ªå˜é‡å¯åˆ©ç”¨å¦‚ä¸‹çº¦æŸæ±‚å‡º çº¿æ€§æ±‚è§£æ€»ç»“ åˆ©ç”¨çŸ©é˜µçš„QRåˆ†è§£ï¼Œå¾—åˆ°æœ€ç»ˆçš„æ—‹è½¬çŸ©é˜µéå¥‡å¼‚çŸ©é˜µPçš„æ­£äº¤ä¸‰è§’åˆ†è§£ï¼šP&#x3D;QR, å…¶ä¸­Q(ç»´æ•°n*s): æ­£äº¤é˜µï¼› R :ä¸Šä¸‰è§’é˜µ è¯æ˜æ€è·¯ï¼šå¯¹P ä¸­å„å‘é‡è¿›è¡Œæ­£äº¤åŒ– ã€æ‰©å±•ã€‘ æ ¹æ®æ—‹è½¬çŸ©é˜µè®¡ç®—æ—‹è½¬è§’ ç›¸æœºåæ ‡ç³»æƒ³è¦è½¬åˆ°ä¸ä¸–ç•Œåæ ‡ç³»å®Œå…¨å¹³è¡Œï¼ˆå³åæ ‡è½´å®Œå…¨å¹³è¡Œï¼Œä¸”æ–¹å‘ç›¸åŒï¼‰ï¼Œéœ€è¦æ—‹è½¬3æ¬¡ï¼Œè®¾åŸå§‹ç›¸æœºåæ ‡ç³»ä¸ºC01ã€ C0ç»•å…¶Zè½´æ—‹è½¬ï¼Œå¾—åˆ°æ–°çš„åæ ‡ç³»C1ï¼›2ã€ C1ç»•å…¶Yè½´æ—‹è½¬ï¼Œå¾—åˆ°æ–°çš„åæ ‡ç³»C2ï¼ˆæ³¨æ„æ—‹è½¬è½´ä¸ºC1çš„Yè½´ï¼Œè€ŒéC0çš„Yè½´ï¼‰ï¼›3ã€ C2ç»•å…¶Xè½´æ—‹è½¬ï¼Œå¾—åˆ°æ–°çš„åæ ‡ç³»C3ã€‚æ­¤æ—¶C3ä¸ä¸–ç•Œåæ ‡ç³»å®Œå…¨å¹³è¡Œã€‚ Rodriguesæ—‹è½¬ ç©ºé—´çš„ä»»ä½•ä¸€ä¸ªæ—‹è½¬ï¼Œå¯è¡¨è¾¾ä¸ºä¸€ä¸ªå‘é‡ç»•æ—‹è½¬è½´æ—‹è½¬ç»™å®šè§’åº¦ã€‚å¯ç”¨å››å…ƒæ•°è¡¨è¾¾ï¼š ã€åŸºäºå¹³é¢å¤šç‰¹å¾ç‚¹ã€‘ åŸºæœ¬é—®é¢˜ å·²çŸ¥ï¼šç›¸æœºå†…å‚æ•°ï¼›å¤šä¸ªå¹³é¢ä¸Šçš„ç‰¹å¾ç‚¹åœ¨ç›®æ ‡åæ ‡ç³»(3D)å’Œç›¸å¹³é¢åæ ‡ç³»(2D)åæ ‡ã€‚ è¾“å‡ºï¼šç›®æ ‡åæ ‡ç³»ç›¸å¯¹ç›¸æœºåæ ‡ç³»çš„ä½ç½®å’Œå§¿æ€ã€‚ å¹³é¢ç‰¹å¾ç‚¹ç›¸å¯¹ä½å§¿ä¼°è®¡â€”â€”çº¿æ€§æ±‚è§£ è®¾$Z_t&#x3D;0$(ç‰¹å¾å…±é¢), åˆ™å¯¹æ¯ä¸€ä¸ªç‰¹å¾ç‚¹ï¼Œå‡æœ‰ï¼š å¾—åˆ°ä¸¤ä¸ªæ–¹ç¨‹ æœªçŸ¥æ•°çº¿æ€§æ±‚è§£ å¯¹äºæ¯ä¸€ä¸ªç‚¹éƒ½å¯ä»¥å½¢æˆå¦‚ä¸Šä¸¤ä¸ªæ–¹ç¨‹ï¼Œå¯¹äº&gt;&#x3D;4ä¸ªç‚¹ï¼Œå¯ä½¿ç”¨ç±»ä¼¼PnPæ–¹æ³•æ±‚å¾—è§£ï¼š ã€æ€»ç»“ã€‘ åœ¨å·²çŸ¥è‡³å°‘å…­ä¸ªç©ºé—´ç‚¹ä¸‰ç»´ç‚¹åæ ‡çš„æ¡ä»¶ä¸‹ï¼Œå¯é€šè¿‡ç‚¹çš„å›¾åƒåæ ‡åŠç›¸å¯¹ä½å§¿ä¼°è®¡ç®—æ³•è®¡ç®—ç›¸å¯¹ä½å§¿ã€‚ åœ¨å·²çŸ¥è‡³å°‘å››ä¸ªå¹³é¢ç‚¹ä¸‰ç»´ç‚¹åæ ‡çš„æ¡ä»¶ä¸‹ï¼Œå¯é€šè¿‡ç‚¹çš„å›¾åƒåæ ‡åŠç›¸å¯¹ä½å§¿ä¼°è®¡ç®—æ³•è®¡ç®—ç›¸å¯¹ä½å§¿ã€‚ ä»£ç æ¼”ç¤º1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556#!/usr/bin/env python# -*- coding: utf-8 -*-# @Time : 2019/2/26 21:25# @Author : Seven# @File : PositionMeasurement.py# @Software: PyCharm# function : å®ç°ä½å§¿æµ‹é‡ç®—æ³•import cv2import numpy as npimport glob# åŠ è½½ç›¸æœºæ ‡å®šçš„æ•°æ®with np.load(&#x27;C.npz&#x27;) as X: mtx, dist, _, _ = [X[i] for i in (&#x27;mtx&#x27;, &#x27;dist&#x27;, &#x27;rvecs&#x27;, &#x27;tvecs&#x27;)]def draw(img, corners, imgpts): &quot;&quot;&quot; åœ¨å›¾ç‰‡ä¸Šç”»å‡ºä¸‰ç»´åæ ‡è½´ :param img: å›¾ç‰‡åŸæ•°æ® :param corners: å›¾åƒå¹³é¢ç‚¹åæ ‡ç‚¹ :param imgpts: ä¸‰ç»´ç‚¹æŠ•å½±åˆ°äºŒç»´å›¾åƒå¹³é¢ä¸Šçš„åæ ‡ :return: &quot;&quot;&quot; corner = tuple(corners[0].ravel()) cv2.line(img, corner, tuple(imgpts[0].ravel()), (255, 0, 0), 5) cv2.line(img, corner, tuple(imgpts[1].ravel()), (0, 255, 0), 5) cv2.line(img, corner, tuple(imgpts[2].ravel()), (0, 0, 255), 5) return img# åˆå§‹åŒ–ç›®æ ‡åæ ‡ç³»çš„3Dç‚¹objp = np.zeros((6 * 7, 3), np.float32)objp[:, :2] = np.mgrid[0:7, 0:6].T.reshape(-1, 2)# åˆå§‹åŒ–ä¸‰ç»´åæ ‡ç³»axis = np.float32([[3, 0, 0], [0, 3, 0], [0, 0, -3]]).reshape(-1, 3) # åæ ‡è½´# åŠ è½½æ‰“åŒ…æ‰€æœ‰å›¾ç‰‡æ•°æ®images = glob.glob(&#x27;image/*.jpg&#x27;)for fname in images: img = cv2.imread(fname) gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY) # æ‰¾åˆ°å›¾åƒå¹³é¢ç‚¹åæ ‡ç‚¹ ret, corners = cv2.findChessboardCorners(gray, (7, 6), None) if ret: # PnPè®¡ç®—å¾—å‡ºæ—‹è½¬å‘é‡å’Œå¹³ç§»å‘é‡ _, rvecs, tvecs, _ = cv2.solvePnPRansac(objp, corners, mtx, dist) print(&quot;æ—‹è½¬å˜é‡&quot;, rvecs) print(&quot;å¹³ç§»å˜é‡&quot;, tvecs) # è®¡ç®—ä¸‰ç»´ç‚¹æŠ•å½±åˆ°äºŒç»´å›¾åƒå¹³é¢ä¸Šçš„åæ ‡ imgpts, jac = cv2.projectPoints(axis, rvecs, tvecs, mtx, dist) # æŠŠåæ ‡æ˜¾ç¤ºå›¾ç‰‡ä¸Š img = draw(img, corners, imgpts) cv2.imshow(&#x27;img&#x27;, img) cv2.waitKey(500)cv2.destroyAllWindows() è¿è¡Œç»“æœ","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"https://aicc-cn.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"https://aicc-cn.github.io/tags/OpenCV/"}],"author":"Seven"},{"title":"ã€åä¸ƒã€‘ç›¸æœºæ ‡å®š","slug":"2019-03-17-cv-image_calibration","date":"2019-03-22T16:00:00.000Z","updated":"2022-03-25T13:52:22.104Z","comments":true,"path":"2019/03/23/2019-03-17-cv-image_calibration/","link":"","permalink":"https://aicc-cn.github.io/2019/03/23/2019-03-17-cv-image_calibration/","excerpt":"","text":"ç›¸æœºæ ‡å®šã€åŸºæœ¬é—®é¢˜ã€‘ ç›¸æœºå†…å¤–å‚æ•°æ ‡å®š è®¡ç®—$m_{ij}$çš„è§£ åˆ†è§£å†…ã€å¤–å‚æ•° è€ƒè™‘éçº¿æ€§é¡¹ ã€Zhangæ–¹æ³•ã€‘ Zhangæ–¹æ³•ï¼šç”±å¼ æ­£å‹æå‡ºï¼ŒOpenCVç­‰å¹¿æ³›ä½¿ç”¨ ç‰¹ç‚¹ï¼šä½¿ç”¨å¹³é¢é¶æ ‡æ‘†å¤šä¸ªpose(å¯æœªçŸ¥) æ ‡å®šæ­¥éª¤ å¯¹ä¸€ä¸ªpose,è®¡ç®—å•åº”çŸ©é˜µ(ç±»ä¼¼MçŸ©é˜µ) æœ‰ä¸‰ä¸ªä»¥ä¸ŠPoseï¼Œæ ¹æ®å„å•åº”çŸ©é˜µè®¡ç®—çº¿æ€§ç›¸æœºå‚æ•°ï¼› ä½¿ç”¨éçº¿æ€§ä¼˜åŒ–æ–¹æ³•è®¡ç®—éçº¿æ€§å‚æ•° ç¬¬ä¸€æ­¥ï¼šæ±‚è§£å•åº”çŸ©é˜µâ€”â€”åŸºæœ¬æ–¹ç¨‹ ç‰¹ç‚¹ï¼šä½¿ç”¨å¹³é¢é¶æ ‡æ‘†å¤šä¸ªpose(å¯æœªçŸ¥) å¹³é¢é¶æ ‡æœ‰å››ä¸ªç‚¹æˆ–æ›´å¤šæ—¶ï¼Œå¯æ±‚è§£H(å·®ä¸€æ¯”ä¾‹å› å­) ç¬¬äºŒæ­¥ï¼šæ±‚è§£å•åº”çŸ©é˜µâ€”â€”å»ºç«‹å†…å‚æ•°æ–¹ç¨‹ æ ¹æ®Rçº¦æŸ å¯¹åº”æ¯ä¸€ä¸ªpose,å¯å¾—åˆ°ä¸Šè¿°ä¸¤ä¸ªæ–¹ç¨‹ ç¬¬ä¸‰æ­¥ï¼šæ±‚è§£å†…å‚æ•°â€”â€”å»ºç«‹æ–¹ç¨‹ ä»¤ $B&#x3D;(b_{ij})&#x3D;M_1^{-T}M_1^{-1}$ æ ¹æ®Bå¯¹ç§°ï¼Œå®šä¹‰å‚æ•°å‘é‡ ç¬¬å››æ­¥ï¼šæ±‚è§£å‚æ•°â€”â€”å»ºç«‹å†…å‚æ•°æ–¹ç¨‹ ç¬¬äº”æ­¥ï¼šæ±‚è§£å‚æ•°â€”â€”å†…å‚æ•°æ±‚è§£ å½“n&gt;&#x3D;3 æ—¶,å¯æ±‚è§£b è§£ä¸ºï¼š å‰å¼ä»£å…¥ï¼Œå¯çŸ¥ï¼š è¿›ä¸€æ­¥å¯ç¡®å®š$M_1$å„å‚æ•° ç¬¬å…­æ­¥ï¼šæ±‚è§£å‚æ•°â€”â€”å¤–å‚æ•°æ±‚è§£ ç³»æ•° æœ€åä¸€æ­¥ï¼šéçº¿æ€§ç•¸å˜å‚æ•°æ±‚è§£ ä»¥å·²æœ‰è§£ä¸ºåˆå€¼ï¼Œæ±‚è§£ä¸‹å¼ï¼š å¯ä½¿ç”¨Levenberg-Marquardtç®—æ³•æ±‚è§£(åŸæ–¹æ³•ä¸­åªå«å¾„å‘ç•¸å˜) å¤–å‚æ•°æ ‡å®šç»“æœç¤ºæ„ é‡æŠ•å½±ç¤ºæ„ ã€æ€»ç»“ã€‘ Zhangæ–¹æ³•ä»å¤šä¸ªè§’åº¦æ‹æ‘„å¹³é¢æ ‡å®šç‰©ï¼Œè¿›ä¸€æ­¥é€šè¿‡ç‰¹å¾ç‚¹è®¡ç®—å†…ã€å¤–å‚æ•°åŠéçº¿æ€§ç•¸å˜ ä¸å·²æœ‰æ–¹æ³•ç›¸æ¯”ï¼ŒZhangæ–¹æ³•ç®€å•ï¼Œä¸éœ€è¦å·²çŸ¥ç›®æ ‡ç‰¹å¾ç‚¹ä¸‰ç»´åæ ‡ï¼Œå› è€Œå¾—åˆ°å¹¿æ³›åº”ç”¨ æ³¨æ„ï¼šå‚ä¸æ ‡å®šçš„æ•°æ®ä¸€èˆ¬ä¸º30å¼ å·¦å³ã€‚ ä»£ç æ¼”ç¤º123456789101112131415161718192021222324252627282930313233343536373839404142434445464748#!/usr/bin/env python# -*- coding: utf-8 -*-# @Time : 2019/2/26 20:15# @Author : Seven# @File : CameraCalibration.py# @Software: PyCharm# function : æ‘„åƒæœºæ ‡å®šimport cv2import numpy as npimport glob# è®¾ç½®å¯»æ‰¾äºšåƒç´ è§’ç‚¹çš„å‚æ•°ï¼Œé‡‡ç”¨çš„åœæ­¢å‡†åˆ™æ˜¯æœ€å¤§å¾ªç¯æ¬¡æ•°30å’Œæœ€å¤§è¯¯å·®å®¹é™0.001criteria = (cv2.TERM_CRITERIA_EPS + cv2.TERM_CRITERIA_MAX_ITER, 30, 0.001)# å‡†å¤‡ç›®æ ‡ç‚¹ï¼Œä¾‹å¦‚ (0,0,0), (1,0,0), (2,0,0) ....,(6,5,0)objp = np.zeros((6 * 7, 3), np.float32)# å°†ä¸–ç•Œåæ ‡ç³»å»ºåœ¨æ ‡å®šæ¿ä¸Šï¼Œæ‰€æœ‰ç‚¹çš„Zåæ ‡å…¨éƒ¨ä¸º0ï¼Œæ‰€ä»¥åªéœ€è¦èµ‹å€¼xå’Œyobjp[:, :2] = np.mgrid[0:7, 0:6].T.reshape(-1, 2)# ç”¨äºå­˜å‚¨æ‰€æœ‰å›¾åƒä¸­çš„å¯¹è±¡ç‚¹å’Œå›¾åƒç‚¹çš„æ•°ç»„ã€‚objpoints = [] # å­˜å‚¨åœ¨ç°å®ä¸–ç•Œç©ºé—´çš„3dç‚¹imgpoints = [] # å‚¨å­˜å›¾åƒå¹³é¢ä¸­çš„2dç‚¹ã€‚images = glob.glob(&#x27;image/*.jpg&#x27;)for fname in images: img = cv2.imread(fname) gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY) # è·å–XYåæ ‡ size = gray.shape[::-1] # æ‰¾åˆ°æ£‹ç›˜è§’ç‚¹ ret, corners = cv2.findChessboardCorners(gray, (7, 6), None) # å¦‚æœæ‰¾åˆ°ï¼Œæ·»åŠ 3Dç‚¹ï¼Œ2Dç‚¹ if ret: objpoints.append(objp) # å¢åŠ è§’ç‚¹çš„å‡†ç¡®åº¦ corners2 = cv2.cornerSubPix(gray, corners, (11, 11), (-1, -1), criteria) imgpoints.append(corners2) # ç”»å‡ºå¹¶æ˜¾ç¤ºè§’ç‚¹ img = cv2.drawChessboardCorners(img, (7, 6), corners2, ret) cv2.imshow(&#x27;img&#x27;, img) cv2.waitKey(500)# ç›¸æœºæ ‡å®šret, mtx, dist, rvecs, tvecs = cv2.calibrateCamera(objpoints, imgpoints, size, None, None)# ä¿å­˜ç›¸æœºå‚æ•°np.savez(&#x27;C.npz&#x27;, mtx=mtx, dist=dist, rvecs=rvecs, tvecs=tvecs)print(&quot;ret:&quot;, ret)print(&quot;å†…å‚æ•°çŸ©é˜µ:\\n&quot;, mtx)print(&quot;ç•¸å˜ç³»æ•°:\\n&quot;, dist)print(&quot;æ—‹è½¬å‘é‡:&quot;, rvecs) # å¤–å‚æ•°print(&quot;å¹³ç§»å‘é‡:&quot;, tvecs) # å¤–å‚æ•° è¿è¡Œç»“æœï¼š","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"https://aicc-cn.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"https://aicc-cn.github.io/tags/OpenCV/"}],"author":"Seven"},{"title":"ã€åäº”ã€‘åæ ‡å˜æ¢ä¸æ‘„åƒæœºæ¨¡å‹","slug":"2019-03-15-cv-image_camera","date":"2019-03-22T16:00:00.000Z","updated":"2022-03-25T13:52:08.285Z","comments":true,"path":"2019/03/23/2019-03-15-cv-image_camera/","link":"","permalink":"https://aicc-cn.github.io/2019/03/23/2019-03-15-cv-image_camera/","excerpt":"","text":"åæ ‡å˜æ¢ä¸æ‘„åƒæœºæ¨¡å‹å›¾åƒå˜æ¢æ¨¡å‹ã€å¹³ç§»å˜æ¢ã€‘ åªæ”¹å˜å›¾å½¢ä½ç½®ï¼Œä¸æ”¹å˜å›¾å½¢çš„å¤§å°å’Œå½¢çŠ¶. ä»£ç åŠæ¼”ç¤º 123456789101112131415import cv2import numpy as np# åŠ è½½å›¾ç‰‡source_image = cv2.imread(&#x27;lena.jpg&#x27;, 0)cv2.imshow(&#x27;source&#x27;, source_image)# å¹³ç§»å›¾ç‰‡rows, cols = source_image.shape# åˆ›å»ºäº¤æ¢çŸ©é˜µï¼ŒæŒ‰ï¼ˆ100,50ï¼‰å¹³ç§»M = np.float32([[1, 0, 100], [0, 1, 50]])# ä½¿ç”¨ä»¿å°„å˜æ¢çš„apiè¿›è¡Œå¹³ç§»å˜æ¢translation_image = cv2.warpAffine(source_image, M, (cols, rows))cv2.imshow(&#x27;translation&#x27;, translation_image)cv2.waitKey(0) ã€æ—‹è½¬å˜æ¢ã€‘ å°†è¾“å…¥å›¾åƒç»•ç¬›å¡å°”åæ ‡ç³»çš„åŸç‚¹é€†æ—¶é’ˆæ—‹è½¬$\\theta$è§’åº¦ï¼Œ åˆ™å˜æ¢åå›¾åƒåæ ‡ä¸º ä»£ç åŠæ¼”ç¤º 123456789101112131415import cv2import numpy as np# åŠ è½½å›¾ç‰‡source_image = cv2.imread(&#x27;lena.jpg&#x27;, 0)cv2.imshow(&#x27;source&#x27;, source_image)# è·å–å½¢çŠ¶rows, cols = source_image.shape# æ—‹è½¬å›¾ç‰‡# åˆ›å»ºäº¤æ¢çŸ©é˜µï¼Œ æ—‹è½¬90åº¦M = cv2.getRotationMatrix2D(((cols-1)/2., (rows-1)/2.), 90, 1)# ä½¿ç”¨ä»¿å°„å˜æ¢çš„apiè¿›è¡Œæ—‹è½¬å˜æ¢rotation_image = cv2.warpAffine(source_image, M, (cols, rows))cv2.imshow(&#x27;rotation&#x27;, rotation_image)cv2.waitKey(0) ã€æ¯”ä¾‹å˜æ¢ã€‘ è‹¥å›¾åƒåæ ‡$(x, y)$ ç¼©æ”¾åˆ°$(S_x, S_y)$å€ï¼Œåˆ™å˜æ¢å‡½æ•°ä¸ºï¼š å…¶ä¸­$S_y$, åˆ†åˆ«ä¸º xå’Œy åæ ‡çš„ç¼©æ”¾å› å­ï¼Œå…¶å¤§äº1è¡¨ç¤ºæ”¾å¤§ï¼Œå°äº1è¡¨ç¤ºç¼©å°ã€‚ ä»£ç åŠæ¼”ç¤º 1234567891011121314import cv2import numpy as np# åŠ è½½å›¾ç‰‡source_image = cv2.imread(&#x27;lena.jpg&#x27;, 0)cv2.imshow(&#x27;source&#x27;, source_image)# è·å–å½¢çŠ¶rows, cols = source_image.shape# æ¯”ä¾‹å˜æ¢# ç¼©å°ä¸€åŠproportion_image = cv2.resize(source_image, (cols//2, rows//2), cv2.INTER_CUBIC)cv2.imshow(&#x27;proportion&#x27;, proportion_image)cv2.waitKey(0) ã€ä»¿å°„å˜æ¢ã€‘ ç®€å•çš„æ¥è¯´å°±æ˜¯ä¸€ä¸ªçº¿æ€§å˜æ¢åŠ ä¸Šå¹³ç§» ä»¿å°„å˜æ¢çš„ä¸€èˆ¬è¡¨è¾¾å¼ä¸º: å¹³ç§»ã€æ¯”ä¾‹ç¼©æ”¾å’Œæ—‹è½¬å˜æ¢éƒ½æ˜¯ä¸€ç§ç§°ä¸ºä»¿å°„å˜æ¢çš„ç‰¹æ®Šæƒ…å†µã€‚ ä»¿å°„å˜æ¢çš„æ€§è´¨ ä»¿å°„å˜æ¢æœ‰6ä¸ªè‡ªç”±åº¦ï¼ˆå¯¹åº”å˜æ¢ä¸­çš„6ä¸ªç³»æ•°ï¼‰ï¼Œå› æ­¤ï¼Œä»¿å°„å˜æ¢åäº’ç›¸å¹³è¡Œç›´çº¿ä»ç„¶ä¸ºå¹³è¡Œç›´çº¿ï¼Œä¸‰è§’å½¢æ˜ å°„åä»æ˜¯ä¸‰è§’å½¢ã€‚ä½†å´ä¸èƒ½ä¿è¯å°†å››è¾¹å½¢ä»¥ä¸Šçš„å¤šè¾¹å½¢æ˜ å°„ä¸ºç­‰è¾¹æ•°çš„å¤šè¾¹å½¢ã€‚ ä»¿å°„å˜æ¢ï¼Œå¯ä»¥ä¿æŒåŸæ¥çš„çº¿å…±ç‚¹ï¼Œç‚¹å…±çº¿çš„å…³ç³»ä¸å˜ï¼Œä¿æŒåŸæ¥ç›¸äº’å¹³è¡Œçš„çš„å…ˆä»ç„¶ç›¸äº’å¹³è¡Œï¼Œä¿æŒåŸæ¥åœ¨ä¸€ç›´çº¿ä¸Šå‡ æ®µçº¿æ®µä¹‹é—´çš„æ¯”ä¾‹ å…³ç³»ä¸å˜ã€‚ä½†æ˜¯ï¼Œä»¿å°„å˜æ¢ä¸èƒ½ä¿æŒåŸæ¥çš„çº¿æ®µé•¿åº¦ä¸å˜ï¼Œä¹Ÿä¸èƒ½ä¿æŒåŸæ¥çš„å¤¹è§’è§’åº¦ä¸å˜ã€‚ ä»¿å°„å˜æ¢çš„ä¹˜ç§¯å’Œé€†å˜æ¢ä»æ˜¯ä»¿å°„å˜æ¢ã€‚ ä»¿å°„å˜æ¢èƒ½å¤Ÿå®ç°å¹³ç§»ã€æ—‹è½¬ã€ç¼©æ”¾ç­‰å‡ ä½•å˜æ¢ã€‚ ä»£ç åŠæ¼”ç¤º 1234567891011121314151617181920212223import cv2import numpy as npimport matplotlib.pyplot as plt# åŠ è½½å›¾ç‰‡source_image = cv2.imread(&#x27;lena.jpg&#x27;, 0)cv2.imshow(&#x27;source&#x27;, source_image)# è·å–å½¢çŠ¶rows, cols = source_image.shape# ä»¿å°„å˜æ¢# å®šä¹‰äº¤æ¢çŸ©é˜µpts1 = np.float32([[50, 50], [200, 50], [50, 200]])pts2 = np.float32([[10, 100], [200, 50], [100, 250]])M = cv2.getAffineTransform(pts1, pts2)# å¼€å§‹å˜æ¢affine_image = cv2.warpAffine(source_image, M, (cols, rows))plt.subplot(121), plt.imshow(source_image), plt.title(&#x27;Input&#x27;)plt.subplot(122), plt.imshow(affine_image), plt.title(&#x27;Output&#x27;)plt.show()cv2.imshow(&#x27;affine&#x27;, affine_image)cv2.waitKey(0) ã€é€è§†å˜æ¢ã€‘ æŠŠç‰©ä½“çš„ä¸‰ç»´å›¾åƒè¡¨ç¤ºè½¬å˜ä¸ºäºŒç»´è¡¨ç¤ºçš„è¿‡ç¨‹ï¼Œç§°ä¸ºé€è§†å˜æ¢ï¼Œä¹Ÿç§°ä¸ºæŠ•å½±æ˜ å°„ï¼Œå…¶è¡¨è¾¾å¼ä¸º: é€è§†å˜æ¢ä¹Ÿæ˜¯ä¸€ç§å¹³é¢æ˜ å°„ ï¼Œå¹¶ä¸”å¯ä»¥ä¿è¯ä»»æ„æ–¹å‘ä¸Šçš„ç›´çº¿ç»è¿‡é€è§†å˜æ¢åä»ç„¶ä¿æŒæ˜¯ç›´çº¿ã€‚ é€è§†å˜æ¢å…·æœ‰9ä¸ªè‡ªç”±åº¦ï¼ˆå…¶å˜æ¢ç³»æ•°ä¸º9ä¸ªï¼‰ï¼Œæ•…å¯ä»¥å®ç°å¹³é¢å››è¾¹å½¢åˆ°å››è¾¹å½¢çš„æ˜ å°„ã€‚ é€è§†å˜åŒ–ç¤ºæ„ å¯¹äºé€è§†æŠ•å½±ï¼Œä¸€æŸå¹³è¡ŒäºæŠ•å½±é¢çš„å¹³è¡Œçº¿çš„æŠ•å½±å¯ä¿æŒå¹³è¡Œï¼Œè€Œä¸å¹³è¡ŒäºæŠ•å½±é¢çš„å¹³è¡Œçº¿çš„æŠ•å½±ä¼šèšé›†åˆ°ä¸€ä¸ªç‚¹ï¼Œè¯¥ç‚¹ç§°ç­ç‚¹. ä»£ç åŠæ¼”ç¤º 1234567891011121314151617181920212223import cv2import numpy as npimport matplotlib.pyplot as plt# åŠ è½½å›¾ç‰‡source_image = cv2.imread(&#x27;lena.jpg&#x27;, 0)cv2.imshow(&#x27;source&#x27;, source_image)# è·å–å½¢çŠ¶rows, cols = source_image.shape# é€è§†å˜æ¢# å®šä¹‰äº¤æ¢çŸ©é˜µpts1 = np.float32([[56, 65], [368, 52], [28, 387], [389, 390]])pts2 = np.float32([[0, 0], [300, 0], [0, 300], [300, 300]])M = cv2.getPerspectiveTransform(pts1, pts2)# å¼€å§‹å˜æ¢perspective_image = cv2.warpPerspective(source_image, M, (300, 300))plt.subplot(121), plt.imshow(source_image), plt.title(&#x27;Input&#x27;)plt.subplot(122), plt.imshow(perspective_image), plt.title(&#x27;Output&#x27;)plt.show()cv2.imshow(&#x27;perspective&#x27;, proportion_image)cv2.waitKey(0) åæ ‡ç³»å’Œåæ ‡å˜æ¢ ä¸åŒåæ ‡ç³»åŠåæ ‡å˜æ¢å…³ç³» å½“ç‰©ä½“æ—‹è½¬æ—¶ï¼Œå…¶ä¸Šçš„ç‚¹åœ¨å›ºå®šåæ ‡ç³»åæ ‡å€¼å˜åŒ–ã€‚ ä»»æ„ä¸¤ä¸ªä¸‰ç»´åæ ‡ç³»ä¹‹é—´çš„å˜æ¢å…³ç³» æ³¨æ„ï¼šRæ»¡è¶³æ—‹è½¬çŸ©é˜µæ­£äº¤æ€§çº¦æŸ åæ ‡ç³»å˜æ¢åŠæ—‹è½¬çŸ©é˜µç”Ÿæˆç¤ºæ„å›¾ ã€åƒç´ åæ ‡ç³»ã€‘ åƒç´ åæ ‡ç³»uovæ˜¯ä¸€ä¸ªäºŒç»´ç›´è§’åæ ‡ç³»ï¼Œåæ˜ äº†ç›¸æœºCCD&#x2F;CMOSèŠ¯ç‰‡ä¸­åƒç´ çš„æ’åˆ—æƒ…å†µã€‚åŸç‚¹oä½äºå›¾åƒçš„å·¦ä¸Šè§’ï¼Œuè½´ã€vè½´åˆ†åˆ«äºåƒé¢çš„ä¸¤è¾¹å¹³è¡Œã€‚åƒç´ åæ ‡ç³»ä¸­åæ ‡è½´çš„å•ä½æ˜¯åƒç´ ï¼ˆæ•´æ•°ï¼‰ã€‚ ã€å›¾åƒåæ ‡ç³»ã€‘ å›¾åƒåæ ‡ç³»(x,y)ï¼šåƒç´ åæ ‡ç³»ä¸åˆ©äºåæ ‡å˜æ¢ï¼Œå› æ­¤éœ€è¦å»ºç«‹å›¾åƒåæ ‡ç³»XOYï¼Œå…¶åæ ‡è½´çš„å•ä½é€šå¸¸ä¸ºæ¯«ç±³ï¼ˆmmï¼‰ï¼ŒåŸç‚¹æ˜¯ç›¸æœºå…‰è½´ä¸ç›¸é¢çš„äº¤ç‚¹ï¼ˆç§°ä¸ºä¸»ç‚¹ï¼‰ï¼Œå³å›¾åƒçš„ä¸­å¿ƒç‚¹ï¼ŒXè½´ã€Yè½´åˆ†åˆ«ä¸uè½´ã€vè½´å¹³è¡Œã€‚æ•…ä¸¤ä¸ªåæ ‡ç³»å®é™…æ˜¯å¹³ç§»å…³ç³»ï¼Œå³å¯ä»¥é€šè¿‡å¹³ç§»å°±å¯å¾—åˆ°ã€‚ ã€æ‘„åƒæœºåæ ‡ç³»ã€‘ ç›¸æœºåæ ‡ç³»ï¼ˆcamera coordinateï¼‰($O_cX_cY_cZ_c (camera frame)$)ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¸‰ç»´ç›´è§’åæ ‡ç³»ï¼ŒåŸç‚¹ä½äºé•œå¤´å…‰å¿ƒå¤„ï¼Œxã€yè½´åˆ†åˆ«ä¸ç›¸é¢çš„ä¸¤è¾¹å¹³è¡Œï¼Œzè½´ä¸ºé•œå¤´å…‰è½´ï¼Œä¸åƒå¹³é¢å‚ç›´ã€‚ ã€ä¸–ç•Œåæ ‡ç³»ã€‘ ä¸–ç•Œåæ ‡ç³»ï¼ˆworld coordinateï¼‰($O_wX_wY_wZ_w$)ï¼Œä¹Ÿç§°ä¸ºæµ‹é‡åæ ‡ç³»ï¼Œæ˜¯ä¸€ä¸ªä¸‰ç»´ç›´è§’åæ ‡ç³»ï¼Œä»¥å…¶ä¸ºåŸºå‡†å¯ä»¥æè¿°ç›¸æœºå’Œå¾…æµ‹ç‰©ä½“çš„ç©ºé—´ä½ç½®ã€‚ä¸–ç•Œåæ ‡ç³»çš„ä½ç½®å¯ä»¥æ ¹æ®å®é™…æƒ…å†µè‡ªç”±ç¡®å®šã€‚ ã€æ‰‹ç«¯åæ ‡ç³»æˆ–å¹³å°åæ ‡ç³»ã€‘ $O_eX_eY_eZ_e$ ã€ç›®æ ‡åæ ‡ç³»ã€‘ $O_tX_tY_tZ_t$ ã€åæ ‡ç³»è½¬æ¢ã€‘ ä¸–ç•Œåæ ‡ç³»è½¬æ¢ä¸ºç›¸æœºåæ ‡ç³» å…¶ä¸­Rä¸º3*3çš„æ—‹è½¬çŸ©é˜µï¼Œtä¸º3*1çš„å¹³ç§»çŸ¢é‡ï¼Œå³ç›¸æœºå¤–å‚æ•° ç›¸æœºåæ ‡ç³»è½¬æ¢ä¸ºå›¾åƒåæ ‡ç³» sä¸ºæ¯”ä¾‹å› å­ï¼ˆsä¸ä¸º0ï¼‰ï¼Œfä¸ºæœ‰æ•ˆç„¦è·ï¼ˆå…‰å¿ƒåˆ°å›¾åƒå¹³é¢çš„è·ç¦»ï¼‰ï¼Œ(x,y,z,1)æ˜¯ç©ºé—´ç‚¹Påœ¨ç›¸æœºåæ ‡ç³»oxyzä¸­çš„é½æ¬¡åæ ‡ï¼Œ(X,Y,1)æ˜¯åƒç‚¹påœ¨å›¾åƒåæ ‡ç³»OXYä¸­çš„é½æ¬¡åæ ‡ã€‚ å›¾åƒåæ ‡ç³»è½¬æ¢ä¸ºåƒç´ åæ ‡ç³» å…¶ä¸­ï¼ŒdXã€dYåˆ†åˆ«ä¸ºåƒç´ åœ¨Xã€Yè½´æ–¹å‘ä¸Šçš„ç‰©ç†å°ºå¯¸ï¼Œ$u_0,v_0$ä¸ºä¸»ç‚¹ï¼ˆå›¾åƒåŸç‚¹ï¼‰åæ ‡ ä¸–ç•Œåæ ‡ç³»è½¬æ¢ä¸ºåƒç´ åæ ‡ç³» å…¶ä¸­ï¼Œ$m_1ã€m_2$å³ä¸ºç›¸æœºçš„å†…å‚å’Œå¤–å‚æ•°ã€‚ æ³¨æ„ï¼šR,tå‚æ•°çŸ©é˜µä¸ºä¸å¯é€†çŸ©é˜µã€‚ çº¿æ€§åŠéçº¿æ€§æ‘„åƒæœºæ¨¡å‹ã€çº¿æ€§æ‘„åƒæœºæ¨¡å‹ã€‘ è€ƒè™‘ç®€åŒ–çš„é’ˆå­”æ¨¡å‹ â€‹ é’ˆå­”æ¨¡å‹æ˜¯å„ç§ç›¸æœºæ¨¡å‹ä¸­æœ€ç®€å•çš„ä¸€ç§ï¼Œå®ƒæ˜¯ç›¸æœºçš„ä¸€ä¸ªè¿‘ä¼¼çº¿æ€§æ¨¡å‹ã€‚åœ¨ç›¸æœºåæ ‡ç³»ä¸‹ï¼Œä»»ä¸€ç‚¹$P(X_c,Y_c,Z_c)$åœ¨åƒå¹³é¢çš„æŠ•å½±ä½ç½®,ä¹Ÿå°±æ˜¯è¯´ï¼Œä»»ä¸€ç‚¹$P(X_c,Y_c,Z_c)$çš„æŠ•å½±ç‚¹p(x,y)éƒ½æ˜¯OPï¼ˆå³å…‰å¿ƒï¼ˆæŠ•å½±ä¸­å¿ƒï¼‰ä¸ç‚¹$P(X_c,Y_c,Z_c)$çš„è¿çº¿ï¼‰ä¸åƒå¹³é¢çš„äº¤ç‚¹å¦‚ä¸‹å›¾ã€‚ åŠ å…¥ç›¸æœºåæ ‡ç³»ä¸ä¸–ç•Œåæ ‡ç³»å˜æ¢å…³ç³»ï¼Œå¾—åˆ° è¯´æ˜ï¼šä¸Šè¿°å…¬å¼ä¸­å®Œæˆäº†ä»ä¸–ç•Œåæ ‡ç³»åˆ°å›¾åƒåæ ‡ç³»çš„è½¬å˜ï¼Œä¸­é—´ç»è¿‡äº†ç›¸æœºåæ ‡ç³»çš„è¿‡åº¦ï¼Œ$X_w$ä¸­çš„wè¡¨ç¤ºworldä¸–ç•Œï¼Œå•ä½ä¸ºæ¯«ç±³ï¼Œè€Œu,væ˜¯çš„ å•ä½ä¸ºåƒç´ ï¼Œå³å®Œæˆäº†ä»æ¯«ç±³â€”â€”åƒç´ çš„è½¬æ¢ã€‚ æ‰€ä»¥ï¼Œä¸ºäº†å¾—åˆ°ç©ºé—´ç‰©ä½“çš„ä¸‰ç»´ä¸–ç•Œåæ ‡ï¼Œå°±å¿…é¡»æœ‰ä¸¤ä¸ªæˆ–æ›´å¤šçš„ç›¸æœºæ„æˆç«‹ä½“è§†è§‰ç³»ç»Ÿæ¨¡å‹æ‰èƒ½å®ç°ã€‚ æˆåƒç•¸å˜ç¤ºæ„ ã€éçº¿æ€§æ‘„åƒæœºæ¨¡å‹ã€‘ åœ¨å®é™…çš„æˆåƒè¿‡ç¨‹ä¸­ï¼Œè€ƒè™‘é•œå¤´çš„å¤±çœŸï¼Œä¸€èˆ¬éƒ½å­˜åœ¨éçº¿æ€§ç•¸å˜ï¼Œæ‰€ä»¥çº¿æ€§æ¨¡å‹ä¸èƒ½å‡†ç¡®æè¿°æˆåƒå‡ ä½•å…³ç³»ã€‚éçº¿æ€§ç•¸å¯ç”¨ä¸‹åˆ—å…¬å¼æè¿°ï¼š å¾„å‘ç•¸å˜ï¼Œç¦»å¿ƒç•¸å˜ï¼Œè–„æ£±é•œç•¸å˜ é€šå¸¸åªè€ƒè™‘å¾„å‘ç•¸å˜ï¼š è‹¥è€ƒè™‘éçº¿æ€§ç•¸å˜ï¼Œåˆ™å¯¹ç›¸æœºæ ‡å®šæ—¶éœ€è¦ä½¿ç”¨éçº¿æ€§ä¼˜åŒ–ç®—æ³•ã€‚è€Œæœ‰ç ”ç©¶è¡¨æ˜å¼•å…¥è¿‡å¤šçš„éçº¿æ€§å‚å…¥ï¼ˆå¦‚ç¦»å¿ƒç•¸å˜å’Œè–„æ£±ç•¸å˜ï¼‰ä¸ä»…ä¸èƒ½æé«˜ç²¾åº¦ï¼Œè¿˜ä¼šå¼•èµ·è§£çš„ä¸ç¨³å®šã€‚ä¸€èˆ¬æƒ…å†µä¸‹å¾„å‘ç•¸å˜å°±è¶³ä»¥æè¿°éçº¿æ€§ç•¸å˜ï¼Œæ‰€æœ‰æœ¬è¯¾é¢˜åªæ˜¯è€ƒè™‘å¾„å‘ç•¸å˜ã€‚åˆ™å°†å¼(2.9)ä¸­çš„å¾„å‘ç•¸å˜ä»£å…¥å¼(2.8)å¯å¾—ï¼š æ€»ç»“ å›¾åƒå˜æ¢åŒ…æ‹¬å¹³ç§±ã€æ—‹è½¬ã€ä»¿å°„ã€é€è§†å˜æ¢ç­‰ å¸¸ç”¨çš„åæ ‡ç³»åŒ…æ‹¬åƒç´ åæ ‡ç³»ã€ç›¸æœºåæ ‡ç³»ã€ä¸–ç•Œåæ ‡ç³»ç­‰ï¼Œä»»ä¸€ç‚¹åœ¨ä¸–ç•Œåæ ‡ç³»å’Œç›¸æœºåæ ‡ç³»ä¸­çš„åæ ‡é€šè¿‡æŠ•å½±çŸ©é˜µMç›¸å…³è”ï¼ŒMåŒ…å«äº†å†…å‚æ•°å’Œå¤–å‚æ•°çŸ©é˜µ ä¸€èˆ¬ç›¸æœºæˆåƒå­˜åœ¨éçº¿æ€§ç•¸å˜ï¼Œé‡ç‚¹éœ€è¦è€ƒè™‘å¾„å‘ç•¸å˜","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"https://aicc-cn.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"https://aicc-cn.github.io/tags/OpenCV/"}],"author":"Seven"},{"title":"ã€åä¹ã€‘ç«‹ä½“è§†è§‰","slug":"2019-03-19-cv-image_Stereo","date":"2019-03-22T16:00:00.000Z","updated":"2022-03-25T13:52:33.595Z","comments":true,"path":"2019/03/23/2019-03-19-cv-image_Stereo/","link":"","permalink":"https://aicc-cn.github.io/2019/03/23/2019-03-19-cv-image_Stereo/","excerpt":"","text":"ç«‹ä½“è§†è§‰ã€åŸºæœ¬æ¦‚å¿µã€‘ æˆ‘ä»¬åœ¨äºŒç»´è§†è§’ä¸­ï¼Œç»“æ„å’Œæ·±åº¦æ˜¯ä¸ç¡®å®šçš„ ç«‹ä½“è§†è§‰ï¼šç¬¬2ä¸ªç…§ç›¸æœºå¯ä»¥è§£å†³è¿™ç§æ­§ä¹‰æ€§ï¼Œé€šè¿‡ä¸‰è§’åŒ–å®ç°æ·±åº¦æµ‹é‡ ã€å¹³è¡ŒåŒç›®è§†è§‰ã€‘ å‡è®¾åŒç›®å®Œå…¨å¹³è¡Œ ç©ºé—´ç‚¹ä¸‰ç»´åº§æ ‡ä½ç½®æ±‚è§£ è§†å·®å’Œæ·±åº¦æˆåæ¯”å…³ç³»: $z_1 &#x3D; \\frac{bf_x}{u_1-u_2}$ ç©ºé—´ç‚¹ä¸‰ç»´åº§æ ‡ä½ç½®æ±‚è§£ï¼šä¸€èˆ¬æƒ…å†µ äºŒæ‘„åƒæœºåæ ‡ç³»ä¸ä¸–ç•Œåæ ‡ç³»ä½å§¿å…³ç³»å·²çŸ¥ å…±4ä¸ªæ–¹ç¨‹ï¼Œä¸‰ä¸ªæœªçŸ¥æ•°ï¼Œå¯æ±‚è§£åæ ‡ ã€ä¸‰ç»´é‡æ„ã€‘ ä¸‰ç»´é‡æ„æ­¥éª¤ æå–ç‰¹å¾ç‚¹ï¼Œå»ºç«‹ç‰¹å¾åŒ¹é… è®¡ç®—è§†å·® è®¡ç®—ä¸–ç•Œåæ ‡ ä¸‰è§’å‰–åˆ† ä¸‰ç»´é‡æ„ æå–ç‰¹å¾ç‚¹å¹¶å»ºç«‹åŒ¹é… ç‰¹å¾åŒ¹é…æ–¹å¼ ç‰¹å¾ç‚¹æå–+ç‰¹å¾åŒ¹é… å…‰æµåŒ¹é… å—åŒ¹é… ç«‹ä½“çŸ«æ­£+å¹³è¡ŒåŒ¹é… è§†å·®è®¡ç®— è®¡ç®—ä¸–ç•Œåæ ‡â€“å½¢æˆç‚¹äº‘æ•°æ® ä¸‰è§’å‰–åˆ†ï¼šé‡‡ç”¨ç»å…¸çš„Delauneyç®—æ³• Delauneyç®—æ³•ç¤ºæ„ï¼š Delaunayä¸‰è§’ç½‘æ˜¯å”¯ä¸€çš„ï¼ˆä»»æ„å››ç‚¹ä¸èƒ½å…±åœ†ï¼‰ï¼Œåœ¨Delaunayä¸‰è§’å½¢ç½‘ä¸­ä»»ä¸€ä¸‰è§’å½¢çš„å¤–æ¥åœ†èŒƒå›´å†…ä¸ä¼šæœ‰å…¶å®ƒç‚¹å­˜åœ¨ã€‚ ä¸‰ç»´é‡æ„ï¼šåŸºäºè®¡ç®—åæ ‡ï¼Œé‡‡ç”¨OpenGLç»˜åˆ¶ä¸‰è§’ç‰‡ æ•ˆæœä¸å¥½çš„ä¸»è¦åŸå› ï¼Œæ˜¯å›¾åƒä¸­æ·±åº¦å˜åŒ–è¾ƒå¤§ï¼ŒåŒæ—¶ç°åº¦å˜æ¢ï¼Œè€Œç‰¹å¾ç‚¹é€‰å–çš„æ¯”è¾ƒç¨€ç–. ã€æ€»ç»“ã€‘ ç«‹ä½“è§†è§‰å¯è®¡ç®—ç©ºé—´ç‚¹çš„ä¸‰ç»´åæ ‡ã€‚åŸºçº¿è¶Šé•¿ï¼Œè·ç¦»è¶Šè¿‘ï¼Œç²¾åº¦è¶Šé«˜ æ ¹æ®åŒç›®è§†è§‰è¿›è¡Œä¸‰ç»´é‡æ„åŒ…æ‹¬ç‰¹å¾ç‚¹æå–ã€åŒ¹é…ã€åæ ‡è®¡ç®—ã€ä¸‰è§’å‰–åˆ†ã€ä¸‰ç»´é‡æ„ç­‰å‡ ä¸ªæ­¥éª¤","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"https://aicc-cn.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"https://aicc-cn.github.io/tags/OpenCV/"}],"author":"Seven"},{"title":"ã€åå…«ã€‘æçº¿å‡ ä½•","slug":"2019-03-18-cv-image_PolarGeometry","date":"2019-03-22T16:00:00.000Z","updated":"2022-03-25T13:52:28.553Z","comments":true,"path":"2019/03/23/2019-03-18-cv-image_PolarGeometry/","link":"","permalink":"https://aicc-cn.github.io/2019/03/23/2019-03-18-cv-image_PolarGeometry/","excerpt":"","text":"æçº¿å‡ ä½• æœ‰æ—¶å€™æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç›¸æœºè¿›è¡Œæ‹æ‘„ç›®æ ‡ç‰©ä½“çš„æ—¶å€™ï¼Œä¼š å‘ç°å‡ ä¸ªç‰©ä½“éƒ½é‡åˆäº†ï¼Œä½†æ˜¯å½“æˆ‘ä»¬å†æ”¾å°ç›¸æœºçš„æ—¶å€™ï¼Œå°±å¯ä»¥æŠŠè¿™äº›ç‰©ä½“çš„ç‰¹å¾è·å–åˆ°ã€‚ ä¹Ÿå°±æ˜¯åŒç›®è§†è§‰å¯¹åº”å…³ç³»ï¼ŒåŒæ—¶ä¹Ÿå¯ç”¨äºç›¸é‚»ä¸¤å¸§é—´çš„è¿åŠ¨ä¼°è®¡ã€‚ ã€åŸºæœ¬æ¦‚å¿µã€‘ æçº¿å‡ ä½•(Epipolar geometry) (åŒ¹é…)æçº¿çº¦æŸï¼šåŒ¹é…ç‚¹å¿…é¡»åœ¨æçº¿ä¸Š åŸºçº¿ï¼šå·¦å³åƒæœºå…‰å¿ƒè¿çº¿ æå¹³é¢ï¼šç©ºé—´ç‚¹ï¼Œä¸¤åƒæœºå…‰å¿ƒå†³å®šçš„å¹³é¢ æç‚¹ï¼šåŸºçº¿ä¸ä¸¤æ‘„åƒæœºå›¾åƒå¹³é¢çš„äº¤ç‚¹ æçº¿ï¼šæå¹³é¢ä¸å›¾ç‰‡å¹³é¢çš„äº¤çº¿ ã€æœ¬è´¨çŸ©é˜µã€‘ æœ¬è´¨çŸ©é˜µ Eï¼ˆEssential Matrixï¼‰ï¼šåæ˜ ã€ç©ºé—´ä¸€ç‚¹ P çš„åƒç‚¹ã€‘åœ¨ã€ä¸åŒè§†è§’æ‘„åƒæœºã€‘ä¸‹ã€æ‘„åƒæœºåæ ‡ç³»ã€‘ä¸­çš„è¡¨ç¤ºä¹‹é—´çš„å…³ç³»ã€‚ å‰é¢æˆ‘ä»¬å·²ç»çŸ¥é“äº†å„ä¸ªåæ ‡ç³»ä¹‹å‰çš„è½¬æ¢ ç›¸æœºåæ ‡ç³»ä¸ä¸–ç•Œåæ ‡ç³» ç›¸æœºåæ ‡ç³»ä¸å›¾åƒåæ ‡ç³» ä¸¤ç›¸æœºåæ ‡ç³»æŸç‚¹ä¸å¯¹åº”å›¾åƒåæ ‡ç³»çš„å…³ç³»ï¼š åŒä¸€ç‚¹åœ¨ä¸¤ç›¸æœºåæ ‡ç³»ä¹‹é—´çš„å…³ç³»ï¼š ä¸¤è¾¹åŒæ—¶å‰ç§¯$t$ï¼š å†ä¸$p_r^\\simâ€‹$ç‚¹ç§¯ï¼š ã€æœ¬è´¨çŸ©é˜µæ±‚è§£ã€‘ åŸºæœ¬æ–¹ç¨‹ çº¿æ€§æ–¹ç¨‹æ±‚è§£ æœ‰ä¹ä¸ªç‚¹(éå…±é¢)æ—¶ï¼Œå¯è·å¾—çº¿æ€§è§£ï¼š æ³¨æ„ï¼šè§£ä¸çœŸå®è§£ç›¸å·®ä¸€ä¸ªæ¯”ä¾‹ç³»æ•° ä½¿ç”¨SVDåˆ†è§£æ±‚è§£å¹³ç§»å’Œæ—‹è½¬çŸ©é˜µ å¯ä»¥è¯æ˜ï¼Œæœ¬è´¨çŸ©é˜µæœ‰2ä¸ªç›¸åŒçš„éé›¶ç‰¹å¾å€¼ å› æ­¤ï¼Œæœ€ç»ˆå¯ä»¥å¾—åˆ°4ä¸ªè§£ï¼Œä½†ä»…æœ‰ä¸€ä¸ªåˆç†è§£ ã€æ‰©å±•ã€‘ åŸºæœ¬çŸ©é˜µ(Fundamental matrix)ï¼š åæ˜ ã€ç©ºé—´ä¸€ç‚¹ P çš„åƒç´ ç‚¹ã€‘åœ¨ã€ä¸åŒè§†è§’æ‘„åƒæœºã€‘ä¸‹ã€å›¾åƒåæ ‡ç³»ã€‘ä¸­çš„è¡¨ç¤ºä¹‹é—´çš„å…³ç³»ã€‚ ä¸¤ä¸ªå¯¹åº”ç‚¹åœ¨åƒç´ åº§æ ‡ç³»çš„å¯¹åº”å…³ç³»(åŒ…å«ç›¸æœºå†…å‚æ•°ä¿¡æ¯) ã€æ€»ç»“ã€‘ æçº¿æ˜¯æå¹³é¢å’Œåƒå¹³é¢äº¤çº¿ï¼Œæç‚¹æ˜¯æçº¿å’ŒåŸºçº¿äº¤ç‚¹ æœ¬è´¨çŸ©é˜µç¡®å®šäº†ä¸¤å¸§å›¾åƒä¸­å¯¹åº”ç‚¹çš„çº¦æŸå…³ç³» å¯ä»¥é€šè¿‡8ä¸ªå¯¹åº”ç‚¹æ±‚è§£æœ¬è´¨çŸ©é˜µï¼Œè¿›ä¸€æ­¥åˆ†è§£å¾—åˆ°Rå’Œt ä»£ç å®ä¾‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293#!/usr/bin/env python# -*- coding: utf-8 -*-# @Time : 2019/3/1 22:03# @Author : Seven# @File : PolarGeometry.py# @Software: PyCharm# function : æçº¿å‡ ä½•ï¼Œæµ‹é‡æçº¿import cv2import numpy as npimport matplotlib.pyplot as plt# åŠ è½½å›¾ç‰‡img1 = cv2.imread(&#x27;image/l.jpg&#x27;, 0)img2 = cv2.imread(&#x27;image/r.jpg&#x27;, 0)# åˆå§‹åŒ–SIFTæ–¹æ³•sift = cv2.xfeatures2d_SIFT.create()# è·å–å…³é”®ç‚¹å’Œæè¿°å­k1, d1 = sift.detectAndCompute(img1, None)k2, d2 = sift.detectAndCompute(img2, None)# è®¾ç½®FLANN è¶…å‚æ•°FLANN_INDEX_KDTREE = 0# K-Dæ ‘ç´¢å¼•è¶…å‚æ•°index_params = dict(algorithm=FLANN_INDEX_KDTREE, trees=5)# æœç´¢è¶…å‚æ•°search_params = dict(checks=50)# åˆå§‹åŒ–FlannBasedMatcheråŒ¹é…å™¨flann = cv2.FlannBasedMatcher(index_params, search_params)# é€šè¿‡KNNçš„æ–¹å¼åŒ¹é…ä¸¤å¼ å›¾çš„æè¿°å­matches = flann.knnMatch(d1, d2, k=2)good = []pts1 = []pts2 = []# ç­›é€‰æ¯”è¾ƒå¥½çš„åŒ¹é…ç‚¹for i, (m, n) in enumerate(matches): if m.distance &lt; 0.8 * n.distance: good.append(m) pts2.append(k2[m.trainIdx].pt) pts1.append(k1[m.queryIdx].pt)# è®¡ç®—åŸºç¡€çŸ©é˜µpts1 = np.int32(pts1)pts2 = np.int32(pts2)# Fä¸ºåŸºæœ¬çŸ©é˜µã€maskæ˜¯è¿”å›åŸºæœ¬çŸ©é˜µçš„å€¼ï¼šæ²¡æœ‰æ‰¾åˆ°çŸ©é˜µï¼Œè¿”å›0ï¼Œæ‰¾åˆ°ä¸€ä¸ªçŸ©é˜µè¿”å›1ï¼Œå¤šä¸ªçŸ©é˜µè¿”å›3F, mask = cv2.findFundamentalMat(pts1, pts2, cv2.FM_LMEDS)# åªé€‰æ‹©æœ‰æ•ˆæ•°æ®pts1 = pts1[mask.ravel() == 1]pts2 = pts2[mask.ravel() == 1]def drawlines(img1, img2, lines, pts1, pts2): &quot;&quot;&quot; ç»˜åˆ¶å›¾åƒæçº¿ :param img1: :param img2: :param lines: :param pts1: :param pts2: :return: &quot;&quot;&quot; r, c = img1.shape img1 = cv2.cvtColor(img1, cv2.COLOR_GRAY2BGR) img2 = cv2.cvtColor(img2, cv2.COLOR_GRAY2BGR) for r, pt1, pt2 in zip(lines, pts1, pts2): color = tuple(np.random.randint(0, 255, 3).tolist()) x0, y0 = map(int, [0, -r[2] / r[1]]) x1, y1 = map(int, [c, -(r[2] + r[0] * c) / r[1]]) img1 = cv2.line(img1, (x0, y0), (x1, y1), color, 1) img1 = cv2.circle(img1, tuple(pt1), 5, color, -1) img2 = cv2.circle(img2, tuple(pt2), 5, color, -1) return img1, img2# åœ¨å³å›¾ï¼ˆç¬¬äºŒå›¾ï¼‰ä¸­æ‰¾åˆ°ä¸ç‚¹ç›¸å¯¹åº”çš„æçº¿ï¼Œå¹¶åœ¨å·¦å›¾ä¸Šç”»å‡ºå®ƒçš„çº¿ã€‚lines1 = cv2.computeCorrespondEpilines(pts2.reshape(-1, 1, 2), 2, F)lines1 = lines1.reshape(-1, 3)img5, img6 = drawlines(img1, img2, lines1, pts1, pts2)# æ‰¾åˆ°ä¸å·¦å›¾åƒï¼ˆç¬¬ä¸€ä¸ªå›¾åƒï¼‰ä¸­çš„ç‚¹å¯¹åº”çš„æçº¿ï¼Œä»¥åŠåœ¨å³å›¾ä¸Šç”»çº¿lines2 = cv2.computeCorrespondEpilines(pts1.reshape(-1, 1, 2), 1, F)lines2 = lines2.reshape(-1, 3)img3, img4 = drawlines(img2, img1, lines2, pts2, pts1)plt.subplot(121), plt.imshow(img5)plt.subplot(122), plt.imshow(img3)plt.show()","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"https://aicc-cn.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"https://aicc-cn.github.io/tags/OpenCV/"}],"author":"Seven"},{"title":"ã€äºŒåã€‘ç‰¹å¾åŒ¹é…","slug":"2019-03-20-cv-image_feature","date":"2019-03-22T16:00:00.000Z","updated":"2022-03-25T13:52:38.780Z","comments":true,"path":"2019/03/23/2019-03-20-cv-image_feature/","link":"","permalink":"https://aicc-cn.github.io/2019/03/23/2019-03-20-cv-image_feature/","excerpt":"","text":"ç‰¹å¾åŒ¹é…ã€åŸºæœ¬é—®é¢˜ã€‘ ç‰¹å¾ç‚¹åŒ¹é… æš´åŠ›æœç´¢ä¸2NNåˆ¤æ® è®¾ä¸¤å¸§å›¾åƒä¸­çš„å¯¹åº”ç‰¹å¾ç‚¹é›†${ğ‘¥ğ‘–,ğ‘¦_ğ‘–}$å’Œ${ğ‘¥_ğ‘–^â€²,ğ‘¦_ğ‘–^â€²}$ï¼Œå…±Nä¸ªç‰¹å¾ç‚¹ å¯¹åº”ç‚¹ $ğ±_ğ’‹&#x3D;(ğ‘¥_ğ‘—,ğ‘¦_ğ‘—)$ï¼ŒåŒ¹é…ç‚¹ä¸ºè·ç¦»æœ€å°ç‚¹ $ğ±_ğ‘—^â€²&#x3D;ğ‘¥_ğ‘—^â€²âˆ—,ğ‘¦_ğ‘—^â€²âˆ—&#x3D;ğ‘šğ‘–ğ‘›{ğ‘˜&#x3D;1}^ğ‘||x_ğ‘—âˆ’ğ‘¥_ğ‘˜^â€²||$ ï¼Œå¯¹åº”è·ç¦»$ğ‘‘_ğ‘—^âˆ—$ è¿›ä¸€æ­¥å¾—åˆ°æ¬¡å°ç‚¹ğ±â€²â€²ï¼Œå¯¹åº”è·ç¦»$ğ‘‘_ğ‘—^{âˆ—â€²}$, åˆ™åŒ¹é…ç‚¹æ»¡è¶³ï¼š$ğ‘‘_ğ‘—^âˆ—&lt;ğ›¼âˆ—ğ‘‘_ğ‘—^{âˆ—â€²}$, è®¤ä¸ºæ­£å¸¸åŒ¹é…. ã€ç‰¹å¾ç‚¹åŒ¹é…æ–¹æ³•ã€‘ å¿«é€Ÿæœç´¢æ–¹å¼â€”-äºŒå‰æ ‘ ç®—æ³•å¤æ‚åº¦o(N2)ã€‚ç‰¹å¾ç‚¹æ•°é‡å¤šæ—¶ï¼ŒåŒ¹é…æ•ˆç‡ä½ã€‚ äºŒå‰æœç´¢æ ‘(BST)æä¾›äº†é«˜æ•ˆæœç´¢æ–¹å¼ ä»¥ä¸‹æ˜¯ä¸€é¢—ä¸€ç»´çš„äºŒå‰æœç´¢æ ‘ï¼Œå°è¯•æœç´¢å’Œ11æœ€è¿‘çš„ç‚¹ã€‚ K-Dæ ‘ å¯¹äºæ¯ä¸€å±‚ï¼Œå¯ä»¥æŒ‡å®šä¸€ä¸ªåˆ’åˆ†ç»´åº¦ï¼ˆè½´å‚ç›´åˆ†åŒºé¢axis-aligned splitting planesï¼‰ã€‚æœ€ç®€å•çš„å°±æ˜¯æŒ‰ç…§å…³é”®å­—è½®æµåˆ’åˆ†ï¼ˆä¾‹å¦‚ï¼šå¥‡æ•°å±‚æŒ‰ç…§xè½´åˆ’åˆ†ï¼Œä¹Ÿå³ç¬¬ä¸€ä¸ªå…³é”®å­—ï¼›å¶æ•°å±‚æŒ‰ç…§yè½´åˆ’åˆ†ï¼Œä¹Ÿå³ç¬¬äºŒä¸ªå…³é”®å­—ï¼‰ã€‚ K-Dæ ‘çš„å»ºç«‹æ–¹å¼ å¯¹äºæ‰€æœ‰çš„æ ·æœ¬ç‚¹ï¼Œç»Ÿè®¡å®ƒä»¬åœ¨æ¯ä¸ªç»´ä¸Šçš„æ–¹å·®ï¼ŒæŒ‘é€‰å‡ºæ–¹å·®ä¸­çš„æœ€å¤§å€¼ï¼Œå¯¹åº”çš„ç»´å°±æ˜¯åˆ†è£‚åŸŸçš„å€¼ã€‚æ•°æ®æ–¹å·®æœ€å¤§è¡¨æ˜æ²¿è¯¥ç»´åº¦æ•°æ®ç‚¹åˆ†æ•£å¾—æ¯”è¾ƒå¼€ï¼Œè¿™ä¸ªæ–¹å‘ä¸Šè¿›è¡Œæ•°æ®åˆ†å‰²å¯ä»¥è·å¾—æœ€å¥½çš„åˆ†è¾¨ç‡ï¼›ç„¶åå†å°†æ‰€æœ‰æ ·æœ¬ç‚¹æŒ‰å…¶ç¬¬è¯¥ç»´çš„å€¼è¿•è¡Œæ’åºï¼Œä½äºæ­£ä¸­é—´çš„é‚£ä¸ªæ•°æ®ç‚¹é€‰ä¸ºåˆ†è£‚ç»“ç‚¹å¯¹åº”åŸŸã€‚é‡å¤ä¸Šè¿°è¿‡ç¨‹ç›´è‡³è·å¾—æ‰€æœ‰å¶å­èŠ‚ç‚¹æ˜¾ç¤ºäº†æ„å»ºè¿”æ£µäºŒå‰æ ‘çš„æ‰€æœ‰æ­¥éª¤ã€‚ ä¸‹é¢ä»¥ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è§£é‡Šä¸Šè¿°k-d treeçš„æ„å»ºè¿‡ç¨‹ã€‚ å‡è®¾æ ·æœ¬é›†ä¸ºï¼š{(2,3), (5,4), (9,6), (4,7), (8,1), (7,2)}ã€‚ K-Dæ ‘æœ€è¿‘é‚»æŸ¥è¯¢ç®—æ³• é¦–å…ˆé€šè¿‡å°†æŸ¥æ‰¾ç‚¹æ•°æ®æ ¹ç»“ç‚¹æ•°æ®å¯¹åº”ç»´ ä¸Šçš„å€¼ç›¸æ¯”è¾ƒï¼ŒæŒ‰ç…§äºŒå‰æœç´¢çš„æ–¹å¼ï¼Œé¡ºç€â€œæœç´¢è·¯å¾„â€æ‰¾åˆ°æœ€è¿‘é‚»çš„è¿‘ä¼¼ç‚¹ï¼Œä¹Ÿå°±æ˜¯ ä¸æŸ¥è¯¢ç‚¹å¤„äºåŒä¸€ä¸ªå­ç©ºé—´çš„å¶å­èŠ‚ç‚¹ï¼› ä¸ºäº†é˜²æ­¢æ¼æŸ¥ä¸æŸ¥æ‰¾ç‚¹ è·Ÿè¿›çš„è·ç¦»çš„ç‚¹ï¼Œå›æº¯æœç´¢è·¯å¾„ï¼Œå¹¶ä¸”åˆ¤æ–­æœç´¢è·¯å¾„ä¸ŠèŠ‚ç‚¹çš„å…¶ä»–å­èŠ‚ç‚¹ç©º é—´ä¸­æ˜¯å¦è¿˜æœ‰è·ç¦»æŸ¥è¯¢ç‚¹æ›´è¿‘çš„æ•°æ®ç‚¹ï¼Œå¦‚æœæœ‰ï¼Œåˆ™éœ€è¦è·³åˆ°å…¶ä»–å­èŠ‚ç‚¹ç©ºé—´ä¸­å»æœç´¢ã€‚ é‡å¤è¿”ä¸ªè¿‡ç¨‹ç›´åˆ°æœç´¢è·¯å¾„ä¸ºç©ºã€‚ BBF(Best Bin First) â€‹ BBFçš„æŸ¥è¯¢æ€è·¯å°±æ˜¯å°†â€œæŸ¥è¯¢è·¯å¾„â€ä¸Šçš„èŠ‚ç‚¹è¿›è¡Œæ’åºï¼Œå¦‚æŒ‰å„è‡ªåˆ†å‰²è¶…å¹³é¢ï¼ˆç§°ä¸ºBinï¼‰ä¸æŸ¥è¯¢ç‚¹çš„è·ç¦»æ’åº,ä¼˜å…ˆè€ƒè™‘è·ç¦»å°çš„ç‚¹ã€‚BBFè¿˜è®¾ç½®äº†ä¸€ä¸ªè¿è¡Œè¶…æ—¶é™åˆ¶ï¼Œå½“ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½ç»è¿‡æ£€æŸ¥æˆ–è€…è¶…å‡ºæ—¶é—´é™åˆ¶æ—¶ï¼Œç®—æ³•è¿”å›å½“å‰æ‰¾åˆ°çš„æœ€å¥½ç»“æœä½œä¸ºè¿‘ä¼¼çš„æœ€è¿‘é‚»ã€‚ éšæœºåŒ–K-Dæ£®æ— åŒæ—¶ç‹¬ç«‹å»ºç«‹å¤šä¸ªk-dæ ‘ï¼Œæ¯æ£µæ ‘åœ¨å…·æœ‰å¤§æ–¹å·®çš„å„ç»´ä¸­(å¦‚top-5)éšæœºé€‰æ‹©ã€‚æŸ¥è¯¢æ—¶ï¼Œå¹¶è¡ŒæŸ¥è¯¢å¤šä¸ªk-dæ ‘ï¼ŒæŒ‰ç…§BBFå‡†ä¾§å°†å€™é€‰èŠ‚ç‚¹æ”¾åœ¨åŒä¸€é˜Ÿåˆ—ä¸­ã€‚ ã€RANSACã€‘ ç¨³å¥(robust): å¯¹æ•°æ®å™ªå£°çš„æ•æ„Ÿæ€§ åŸºæœ¬æ€æƒ³ RANSACé€šè¿‡åå¤é€‰æ‹©æ•°æ®ä¸­çš„ä¸€ç»„éšæœºå­é›†æ¥è¾¾æˆç›®æ ‡ã€‚è¢«é€‰å–çš„å­é›†è¢«å‡è®¾ä¸ºå±€å†…ç‚¹ï¼Œå¹¶ç”¨ä¸‹è¿°æ–¹æ³•è¿›è¡ŒéªŒè¯ï¼š æœ‰ä¸€ä¸ªæ¨¡å‹é€‚åº”äºå‡è®¾çš„å±€å†…ç‚¹ï¼Œå³æ‰€æœ‰çš„æœªçŸ¥å‚æ•°éƒ½èƒ½ä»å‡è®¾çš„å±€å†…ç‚¹è®¡ç®—å¾—å‡ºã€‚ ç”¨1ä¸­å¾—åˆ°çš„æ¨¡å‹å»æµ‹è¯•æ‰€æœ‰çš„å…¶å®ƒæ•°æ®ï¼Œå¦‚æœæŸä¸ªç‚¹é€‚ç”¨äºä¼°è®¡çš„æ¨¡å‹ï¼Œè®¤ä¸ºå®ƒä¹Ÿæ˜¯å±€å†…ç‚¹ã€‚ å¦‚æœæœ‰è¶³å¤Ÿå¤šçš„ç‚¹è¢«å½’ç±»ä¸ºå‡è®¾çš„å±€å†…ç‚¹ï¼Œé‚£ä¹ˆä¼°è®¡çš„æ¨¡å‹å°±è¶³å¤Ÿåˆç†ã€‚ ç„¶åï¼Œç”¨æ‰€æœ‰å‡è®¾çš„å±€å†…ç‚¹å»é‡æ–°ä¼°è®¡æ¨¡å‹ï¼Œå› ä¸ºå®ƒä»…ä»…è¢«åˆå§‹çš„å‡è®¾å±€å†…ç‚¹ä¼°è®¡è¿‡ã€‚ æœ€åï¼Œé€šè¿‡ä¼°è®¡å±€å†…ç‚¹ä¸æ¨¡å‹çš„é”™è¯¯ç‡æ¥è¯„ä¼°æ¨¡å‹ã€‚ è¿™ä¸ªè¿‡ç¨‹è¢«é‡å¤æ‰§è¡Œå›ºå®šçš„æ¬¡æ•°ï¼Œæ¯æ¬¡äº§ç”Ÿçš„æ¨¡å‹è¦ä¹ˆå› ä¸ºå±€å†…ç‚¹å¤ªå°‘è€Œè¢«èˆå¼ƒï¼Œè¦ä¹ˆå› ä¸ºæ¯”ç°æœ‰çš„æ¨¡å‹æ›´å¥½è€Œè¢«é€‰ç”¨ SIFTå’ŒRANSACç»“åˆ RANSACç®—æ³•åœ¨SIFTç‰¹å¾ç­›é€‰ä¸­çš„ä¸»è¦æµç¨‹ï¼š ä»æ ·æœ¬é›†ä¸­éšæœºæŠ½é€‰ä¸€ä¸ªRANSACæ ·æœ¬ï¼Œå³4ä¸ªåŒ¹é…ç‚¹å¯¹ æ ¹æ®è¿”4ä¸ªåŒ¹é…ç‚¹å¯¹è®¡ç®—å˜æ¢çŸ©é˜µM æ ¹æ®æ ·æœ¬é›†ï¼Œå˜æ¢çŸ©é˜µMï¼Œå’Œè¯¯å·®åº¦é‡å‡½æ•°è®¡ç®—æ»¡è¶³å½“å‰å˜æ¢çŸ©é˜µçš„ä¸€è‡´é›†consensusï¼Œå¹¶è¿”å›ä¸€è‡´é›†ä¸­å…ƒç´ ä¸ªæ•° æ ¹æ®å½“å‰ä¸€è‡´é›†ä¸­å…ƒç´ ä¸ªæ•°åˆ¤æ–­æ˜¯å¦æœ€ä¼˜(æœ€å¤§)ä¸€è‡´é›†ï¼Œè‹¥æ˜¯åˆ™æ›´æ–°å½“å‰æœ€ä¼˜ä¸€è‡´é›† æ›´æ–°å½“å‰é”™è¯¯æ¦‚ç‡pï¼Œè‹¥på¤§äºå…è®¸çš„æœ€å°é”™è¯¯æ¦‚ç‡åˆ™é‡å¤(1)è‡³(4)ç»§ç»­è¿­ä»£ï¼Œç›´åˆ°å½“å‰é”™è¯¯æ¦‚ç‡på°äºæœ€å°é”™è¯¯æ¦‚ç‡ ç»“æœæ¯”è¾ƒï¼š2NN vs 2NN+RANSAC ã€æ€»ç»“ã€‘ ç‰¹å¾åŒ¹é…æ˜¯ç«‹ä½“è§†è§‰ã€å…¨æ™¯è§†è§‰ã€ç”±è¿åŠ¨åˆ°ç»“æ„çš„é‡è¦ç¯èŠ‚ ä½¿ç”¨åŸºäºk-dæ ‘çš„ç‰¹å¾åŒ¹é…æ–¹æ³•ï¼Œèƒ½æœ‰æ•ˆæé«˜æœç´¢æ•ˆç‡ RANSACæ˜¯ä¸€ç±»éšæœºç¨³å¥ä¼°è®¡æ–¹æ³•ï¼Œå¯æœ‰æ•ˆæ»¤é™¤è¯¯é…ç‚¹","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"https://aicc-cn.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"https://aicc-cn.github.io/tags/OpenCV/"}],"author":"Seven"},{"title":"åŸºäºHarrisçš„ç‰¹å¾åŒ¹é…","slug":"2019-03-23-cv-Harris_feature","date":"2019-03-22T16:00:00.000Z","updated":"2022-03-25T13:38:22.216Z","comments":true,"path":"2019/03/23/2019-03-23-cv-Harris_feature/","link":"","permalink":"https://aicc-cn.github.io/2019/03/23/2019-03-23-cv-Harris_feature/","excerpt":"","text":"12345678910111213141516171819202122232425262728293031323334353637383940414243444546#!/usr/bin/env python# -*- coding: utf-8 -*-# @Time : 2019/3/4 14:35# @Author : Seven# @File : ImageMatching-Harris.py# @Software: PyCharm# function : ä½¿ç”¨Harrisè¿›è¡Œæå–ç‰¹å¾ç‚¹è¿›è¡Œå›¾ç‰‡åŒ¹é…# é€‰æ‹©äº†ä¸€ç§é€Ÿåº¦ã€ç‰¹å¾ç‚¹æ•°é‡å’Œç²¾åº¦éƒ½æ¯”è¾ƒå¥½çš„ç»„åˆæ–¹æ¡ˆï¼š# FASTè§’ç‚¹æ£€æµ‹ç®—æ³•+SURFç‰¹å¾æè¿°å­+FLANN(Fast Library for Approximate Nearest Neighbors) åŒ¹é…ç®—æ³•ã€‚import cv2# åŠ è½½å›¾ç‰‡imgL = cv2.imread(&#x27;image/A.jpg&#x27;)imgR = cv2.imread(&#x27;image/B.jpg&#x27;)# è½¬æ¢ä¸ºç°åº¦å›¾grayL = cv2.cvtColor(imgL, cv2.COLOR_BGR2GRAY)grayR = cv2.cvtColor(imgR, cv2.COLOR_BGR2GRAY)# æå–ç‰¹å¾ç‚¹harris = cv2.xfeatures2d_HarrisLaplaceFeatureDetector.create()kL = harris.detect(grayL, None)kR = harris.detect(grayR, None)# æå–æè¿°å­br = cv2.BRISK_create()kL, dL = br.compute(grayL, kL)kR, dR = br.compute(grayR, kR)# åˆ›å»º BFMatcher å¯¹è±¡bf = cv2.BFMatcher(cv2.NORM_L2)# æ ¹æ®æè¿°å­åŒ¹é…ç‰¹å¾ç‚¹.matches = bf.match(dL, dR)# ç”»å‡ºåŒ¹é…ç‚¹img3 = cv2.drawMatches(imgL, kL, imgR, kR, matches, None, flags=2)cv2.imshow(&quot;Harris&quot;, img3)# ------------------------------------------------------------------------------------------------# åˆå§‹åŒ–BruteforceåŒ¹é…å™¨bf = cv2.BFMatcher()# é€šè¿‡KNNåŒ¹é…ä¸¤å¼ å›¾ç‰‡çš„æè¿°å­matches = bf.knnMatch(dL, dR, k=2)# ç­›é€‰æ¯”è¾ƒå¥½çš„åŒ¹é…ç‚¹good = []for i, (m, n) in enumerate(matches): if m.distance &lt; 0.6 * n.distance: good.append(m)# ç”»å‡ºåŒ¹é…ç‚¹img3 = cv2.drawMatches(imgL, kL, imgR, kR, good, None, flags=2)cv2.imshow(&quot;Harris-BF&quot;, img3)cv2.waitKey(0)","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"https://aicc-cn.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"https://aicc-cn.github.io/tags/OpenCV/"}],"author":"Seven"},{"title":"åŸºäºSIFTçš„ç‰¹å¾åŒ¹é…","slug":"2019-03-24-cv-SIFT_feature","date":"2019-03-22T16:00:00.000Z","updated":"2022-03-25T13:38:26.621Z","comments":true,"path":"2019/03/23/2019-03-24-cv-SIFT_feature/","link":"","permalink":"https://aicc-cn.github.io/2019/03/23/2019-03-24-cv-SIFT_feature/","excerpt":"","text":"12345678910111213141516171819202122232425262728293031323334353637383940414243444546#!/usr/bin/env python# -*- coding: utf-8 -*-# @Time : 2019/3/2 22:26# @Author : Seven# @File : ImageMatching-SIFT.py# @Software: PyCharm# function : ä½¿ç”¨SIFTè¿›è¡Œæå–ç‰¹å¾ç‚¹è¿›è¡Œå›¾ç‰‡åŒ¹é…import cv2# åŠ è½½å›¾ç‰‡imgL = cv2.imread(&#x27;image/A.jpg&#x27;)imgR = cv2.imread(&#x27;image/B.jpg&#x27;)# è½¬æ¢ä¸ºç°åº¦å›¾grayL = cv2.cvtColor(imgL, cv2.COLOR_BGR2GRAY)grayR = cv2.cvtColor(imgR, cv2.COLOR_BGR2GRAY)# æå–ç‰¹å¾ç‚¹sift = cv2.xfeatures2d_SIFT.create()kL, dL = sift.detectAndCompute(grayL, None)kR, dR = sift.detectAndCompute(grayR, None)# åˆ›å»º BFMatcher å¯¹è±¡bf = cv2.BFMatcher(cv2.NORM_L2)# æ ¹æ®æè¿°å­åŒ¹é…ç‰¹å¾ç‚¹.matches = bf.match(dL, dR)# ç”»å‡ºåŒ¹é…ç‚¹img3 = cv2.drawMatches(imgL, kL, imgR, kR, matches, None, flags=2)cv2.imshow(&quot;SIFT&quot;, img3)# ------------------------------------------------------------------------------------------------# è®¾ç½®FLANN è¶…å‚æ•°FLANN_INDEX_KDTREE = 0# K-Dæ ‘ç´¢å¼•è¶…å‚æ•°index_params = dict(algorithm=FLANN_INDEX_KDTREE, trees=5)# æœç´¢è¶…å‚æ•°search_params = dict(checks=50)# åˆå§‹åŒ–FlannBasedMatcheråŒ¹é…å™¨flann = cv2.FlannBasedMatcher(index_params, search_params)# é€šè¿‡KNNçš„æ–¹å¼åŒ¹é…ä¸¤å¼ å›¾çš„æè¿°å­matches = flann.knnMatch(dL, dR, k=2)# ç­›é€‰æ¯”è¾ƒå¥½çš„åŒ¹é…ç‚¹good = []for i, (m, n) in enumerate(matches): if m.distance &lt; 0.6 * n.distance: good.append(m)# ç”»å‡ºåŒ¹é…ç‚¹img3 = cv2.drawMatches(imgL, kL, imgR, kR, good, None, flags=2)cv2.imshow(&quot;SIFT-FLANN&quot;, img3)cv2.waitKey(0)","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"https://aicc-cn.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"https://aicc-cn.github.io/tags/OpenCV/"}],"author":"Seven"},{"title":"åŸºäºFASTçš„ç‰¹å¾åŒ¹é…","slug":"2019-03-21-cv-fast_feature","date":"2019-03-22T16:00:00.000Z","updated":"2022-03-25T13:52:43.451Z","comments":true,"path":"2019/03/23/2019-03-21-cv-fast_feature/","link":"","permalink":"https://aicc-cn.github.io/2019/03/23/2019-03-21-cv-fast_feature/","excerpt":"","text":"1234567891011121314151617181920212223242526272829303132333435363738394041424344#!/usr/bin/env python# -*- coding: utf-8 -*-# @Time : 2019/3/4 13:57# @Author : Seven# @File : ImageMatching-FAST.py# @Software: PyCharm# function : ä½¿ç”¨FASTè¿›è¡Œæå–ç‰¹å¾ç‚¹è¿›è¡Œå›¾ç‰‡åŒ¹é…import cv2# åŠ è½½å›¾ç‰‡imgL = cv2.imread(&#x27;image/A.jpg&#x27;)imgR = cv2.imread(&#x27;image/B.jpg&#x27;)# è½¬æ¢ä¸ºç°åº¦å›¾grayL = cv2.cvtColor(imgL, cv2.COLOR_BGR2GRAY)grayR = cv2.cvtColor(imgR, cv2.COLOR_BGR2GRAY)# æå–ç‰¹å¾ç‚¹fast = cv2.FastFeatureDetector_create(50)kL = fast.detect(grayL, None)kR = fast.detect(grayR, None)# æå–æè¿°å­br = cv2.BRISK_create()kL, dL = br.compute(grayL, kL)kR, dR = br.compute(grayR, kR)# åˆ›å»º BFMatcher å¯¹è±¡bf = cv2.BFMatcher(cv2.NORM_L2)# æ ¹æ®æè¿°å­åŒ¹é…ç‰¹å¾ç‚¹.matches = bf.match(dL, dR)# ç”»å‡ºåŒ¹é…ç‚¹img3 = cv2.drawMatches(imgL, kL, imgR, kR, matches, None, flags=2)cv2.imshow(&quot;FAST&quot;, img3)# ------------------------------------------------------------------------------------------------# åˆå§‹åŒ–BruteforceåŒ¹é…å™¨bf = cv2.BFMatcher()# é€šè¿‡KNNåŒ¹é…ä¸¤å¼ å›¾ç‰‡çš„æè¿°å­matches = bf.knnMatch(dL, dR, k=2)# ç­›é€‰æ¯”è¾ƒå¥½çš„åŒ¹é…ç‚¹good = []for i, (m, n) in enumerate(matches): if m.distance &lt; 0.6 * n.distance: good.append(m)# ç”»å‡ºåŒ¹é…ç‚¹img3 = cv2.drawMatches(imgL, kL, imgR, kR, good, None, flags=2)cv2.imshow(&quot;FAST-BF&quot;, img3)cv2.waitKey(0)","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"https://aicc-cn.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"https://aicc-cn.github.io/tags/OpenCV/"}],"author":"Seven"},{"title":"ã€åä¸‰ã€‘èƒŒæ™¯å»ºæ¨¡","slug":"2019-03-13-cv-image_background","date":"2019-03-22T16:00:00.000Z","updated":"2022-03-25T13:51:56.365Z","comments":true,"path":"2019/03/23/2019-03-13-cv-image_background/","link":"","permalink":"https://aicc-cn.github.io/2019/03/23/2019-03-13-cv-image_background/","excerpt":"","text":"èƒŒæ™¯å»ºæ¨¡ç›¸å¯¹è¿åŠ¨çš„åŸºæœ¬æ–¹å¼ ç›¸æœºé™æ­¢ï¼Œç›®æ ‡è¿åŠ¢â€”â€”èƒŒæ™¯æå–(å‡é™¤) ç›¸æœºè¿åŠ¢ï¼Œç›®æ ‡é™æ­¢â€”â€”å…‰æµä¼°è®¡(å…¨å±€è¿åŠ¢) ç›¸æœºå’Œç›®æ ‡å‡è¿åŠ¢â€”â€”å…‰æµä¼°è®¡ å¸§å·®æ³•è¿åŠ¨ç›®æ ‡æ£€æµ‹ â€‹ å¦‚å›¾å¯è§ï¼Œç”±ç›®æ ‡è¿åŠ¨å¼•èµ·çš„è¿åŠ¨å˜åŒ–åŒºåŸŸåŒ…æ‹¬è¿åŠ¨ç›®æ ‡åœ¨å‰åä¸¤å¸§ä¸­çš„å…±åŒä½ç½®(å›¾ä¸­é»‘è‰²åŒºåŸŸ)ã€åœ¨å½“å‰å¸§ä¸­æ–°æ˜¾éœ²å‡ºçš„èƒŒæ™¯åŒºåŸŸå’Œæ–°è¦†ç›–çš„èƒŒæ™¯åŒºåŸŸä¸‰éƒ¨åˆ†ã€‚ ã€æ•°å­¦æ¨¡å‹ã€‘$sign(x)&#x3D;\\begin{cases}1,&amp;å¦‚æœI(xï¼Œ yï¼Œ t)-I(x, y, t-1)&gt;T \\ 0,&amp;å¦‚æœå…¶ä»–æƒ…å†µ\\end{cases}$ D(x, y): å¸§å·® I(x,y,t): å½“å‰å¸§(tæ—¶åˆ»)å›¾åƒ I(x,y,t): ä¸Šä¸€å¸§(t-1æ—¶åˆ»)å›¾åƒ T: åƒç´ ç°åº¦å·®é˜ˆå€¼ æ··åˆé«˜æ–¯èƒŒæ™¯å»ºæ¨¡ã€é«˜æ–¯èƒŒæ™¯ã€‘ åƒç´ ç°åº¦å€¼éšæ—¶é—´å˜åŒ–ç¬¦åˆé«˜æ–¯åˆ†å¸ƒ. $I(x, y) \\thicksim N(u, \\sigma^2)$ å¦‚æœ$I(x, y, t)-u&gt;3\\sigma$ ä¸ºå‰æ™¯ï¼Œå¦åˆ™å°±æ˜¯èƒŒæ™¯ã€‚ $I(x, y, t)$æ˜¯å½“å‰å¸§ã€‚ $u$ä¸ºå‡å€¼ã€$\\sigma$æ˜¯æ–¹å·®ã€‚ æ³¨æ„ï¼šå½“å‰å¸§çš„ç°åº¦å€¼å˜åŒ–è½åœ¨$3\\sigma$é—´çš„å°±æ˜¯èƒŒæ™¯ï¼Œå¦åˆ™å°±æ˜¯å‰æ™¯ã€‚ ã€æ··åˆé«˜æ–¯æ¨¡å‹ã€‘ ä»»ä½•ä¸€ç§åˆ†å¸ƒå‡½æ•°éƒ½å¯ä»¥çœ‹åšæ˜¯å¤šä¸ªé«˜æ–¯åˆ†å¸ƒçš„ç»„åˆ. â€‹ æ··åˆé«˜æ–¯èƒŒæ™¯å»ºæ¨¡æ˜¯åŸºäºåƒç´ æ ·æœ¬ç»Ÿè®¡ä¿¡æ¯çš„èƒŒæ™¯è¡¨ç¤ºæ–¹æ³•ï¼Œåˆ©ç”¨åƒç´ åœ¨è¾ƒé•¿æ—¶é—´å†…å¤§é‡æ ·æœ¬å€¼çš„æ¦‚ç‡å¯†åº¦ç­‰ç»Ÿè®¡ä¿¡æ¯(å¦‚æ¨¡å¼æ•°é‡ã€æ¯ä¸ªæ¨¡å¼çš„å‡å€¼å’Œæ ‡å‡†å·®)è¡¨ç¤ºèƒŒæ™¯ï¼Œç„¶åä½¿ç”¨ç»Ÿè®¡å·®åˆ†(å¦‚3ÏƒåŸåˆ™)è¿›è¡Œç›®æ ‡åƒç´ åˆ¤æ–­ï¼Œå¯ä»¥å¯¹å¤æ‚åŠ¨æ€èƒŒæ™¯è¿›è¡Œå»ºæ¨¡ï¼Œè®¡ç®—é‡è¾ƒå¤§ã€‚â€‹ åœ¨æ··åˆé«˜æ–¯èƒŒæ™¯æ¨¡å‹ä¸­ï¼Œè®¤ä¸ºåƒç´ ä¹‹é—´çš„é¢œè‰²ä¿¡æ¯äº’ä¸ç›¸å…³ï¼Œå¯¹å„åƒç´ ç‚¹çš„å¤„ç†éƒ½æ˜¯ç›¸äº’ç‹¬ç«‹çš„ã€‚å¯¹äºè§†é¢‘å›¾åƒä¸­çš„æ¯ä¸€ä¸ªåƒç´ ç‚¹ï¼Œå…¶å€¼åœ¨åºåˆ—å›¾åƒä¸­çš„å˜åŒ–å¯çœ‹ä½œæ˜¯ä¸æ–­äº§ç”Ÿåƒç´ å€¼çš„éšæœºè¿‡ç¨‹ï¼Œå³ç”¨é«˜æ–¯åˆ†å¸ƒæ¥æè¿°æ¯ä¸ªåƒç´ ç‚¹çš„é¢œè‰²å‘ˆç°è§„å¾‹&#123;å•æ¨¡æ€(å•å³°)ï¼Œå¤šæ¨¡æ€(å¤šå³°)&#125;ã€‚ â€‹ å¯¹äºå¤šå³°é«˜æ–¯åˆ†å¸ƒæ¨¡å‹ï¼Œå›¾åƒçš„æ¯ä¸€ä¸ªåƒç´ ç‚¹æŒ‰ä¸åŒæƒå€¼çš„å¤šä¸ªé«˜æ–¯åˆ†å¸ƒçš„å åŠ æ¥å»ºæ¨¡ï¼Œæ¯ç§é«˜æ–¯åˆ†å¸ƒå¯¹åº”ä¸€ä¸ªå¯èƒ½äº§ç”Ÿåƒç´ ç‚¹æ‰€å‘ˆç°é¢œè‰²çš„çŠ¶æ€ï¼Œå„ä¸ªé«˜æ–¯åˆ†å¸ƒçš„æƒå€¼å’Œåˆ†å¸ƒå‚æ•°éšæ—¶é—´æ›´æ–°ã€‚å½“å¤„ç†å½©è‰²å›¾åƒæ—¶ï¼Œå‡å®šå›¾åƒåƒç´ ç‚¹Rã€Gã€Bä¸‰è‰²é€šé“ç›¸äº’ç‹¬ç«‹å¹¶å…·æœ‰ç›¸åŒçš„æ–¹å·®ã€‚å¯¹äºéšæœºå˜é‡Xçš„è§‚æµ‹æ•°æ®é›†${x_1,x_2,â€¦,x_N}ï¼Œx_t&#x3D;(r_t,g_t,b_t)$ä¸ºtæ—¶åˆ»åƒç´ çš„æ ·æœ¬ï¼Œåˆ™å•ä¸ªé‡‡æ ·ç‚¹$x_t$å…¶æœä»çš„æ··åˆé«˜æ–¯åˆ†å¸ƒæ¦‚ç‡å¯†åº¦å‡½æ•°ï¼š â€‹ å…¶ä¸­Qä¸ºåˆ†å¸ƒæ¨¡å¼æ€»æ•°ï¼Œ$N(I,u_q, \\sigma_q^2)$ä¸ºé«˜æ–¯åˆ†å¸ƒï¼Œ$Î¼_q$ä¸ºå…¶å‡å€¼ï¼Œ$Î´_q$ä¸ºæ–¹å·®ï¼ŒIä¸ºä¸‰ç»´å•ä½çŸ©é˜µï¼Œ$Ï‰_q$ä¸ºé«˜æ–¯åˆ†å¸ƒçš„æƒé‡ã€‚ ã€æ··åˆé«˜æ–¯èƒŒæ™¯å»ºæ¨¡æ­¥éª¤ã€‘ ä»»åŠ¡ï¼šåœ¨çº¿è®¡ç®—ï¼š$Î¼_q$ï¼Œ$Î´_q$ï¼Œ$Ï‰_q$ æ¨¡å‹åˆå§‹åŒ– å°†é‡‡åˆ°çš„ç¬¬ä¸€å¸§å›¾åƒçš„æ¯ä¸ªè±¡ç´ çš„ç°åº¦å€¼ä½œä¸ºå‡å€¼ï¼Œå†èµ‹ä»¥è¾ƒå¤§çš„æ–¹å·®ã€‚åˆå€¼Q&#x3D;1, w&#x3D;1.0ã€‚ æ¨¡å‹å­¦ä¹  å°†å½“å‰å¸§çš„å¯¹åº”ç‚¹è±¡ç´ çš„ç°åº¦å€¼ä¸å·²æœ‰çš„Qä¸ªé«˜æ–¯æ¨¡å‹ä½œæ¯”è¾ƒï¼Œè‹¥æ»¡è¶³$|x_k-u_{q, k}|&lt;2.5\\sigma_{q,k}$ ï¼Œåˆ™æŒ‰æ¦‚ç‡å¯†åº¦å…¬å¼è°ƒæ•´ç¬¬qä¸ªé«˜æ–¯æ¨¡å‹çš„å‚æ•°å’Œæƒé‡ï¼›å¦åˆ™è½¬å…¥(3)ï¼š å¢åŠ &#x2F;æ›¿æ¢é«˜æ–¯åˆ†é‡ è‹¥ä¸æ»¡è¶³æ¡ä»¶ï¼Œä¸”q&lt;Qï¼Œåˆ™å¢åŠ ä¸€ä¸ªæ–°åˆ†é‡ï¼›è‹¥q&#x3D;Qï¼Œåˆ™æ›¿æ¢ åˆ¤æ–­èƒŒæ™¯ $B &#x3D; argmin_b(\\sum_{q&#x3D;1}^bw_q&gt;T)$ åˆ¤æ–­å‰æ™¯ ã€æ··åˆé«˜æ–¯æ¨¡å‹è¿­ä»£è®¡ç®—åŸç†ã€‘è¿­ä»£è®¡ç®—ï¼š $M_q(k)$ä¸ºäºŒå€¼åŒ–å‡½æ•°ï¼Œä»…å½“åƒç´ å€¼åŒ¹é…ç¬¬qç±»æ—¶å–1ï¼Œå…¶ä½™å–0 ç±»åˆ«æ•°å€¼å–å€¼ä¸å¤§äº5 æ€»ç»“ èƒŒæ™¯é™æ­¢æ—¶ï¼Œå¯ä»¥ä½¿ç”¨åŸºäºèƒŒæ™¯æå–çš„è¿åŠ¨ä¼°è®¡æ–±æ³•è®¡ç®—è¿åŠ¨ç›®æ ‡ã€‚ æ··åˆé«˜æ–¯æ¨¡å‹å¯æ¨¡æ‹Ÿä»»æ„æ¦‚ç‡å¯†åº¦å‡½æ•°ï¼Œæ˜¯èƒŒæ™¯å»ºæ¨¡çš„ä¸»æµæ–¹æ³• æ··åˆé«˜æ–¯æ¨¡å‹å‚æ•°é‡‡ç”¨è¿­ä»£æ–¹å¼è®¡ç®—ã€‚ ä»£ç å®ä¾‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960#!/usr/bin/env python# -*- coding: utf-8 -*-# @Time : 2019/1/22 21:09# @Author : Seven# @File : backgroundDemo.py# @Software: PyCharm# function : åŸºäºèƒŒæ™¯æå–çš„è¿åŠ¨ä¼°è®¡import cv2# åŠ è½½è§†é¢‘cap = cv2.VideoCapture()cap.open(&#x27;768x576.avi&#x27;)if not cap.isOpened(): print(&quot;æ— æ³•æ‰“å¼€è§†é¢‘æ–‡ä»¶&quot;)pBgModel = cv2.createBackgroundSubtractorMOG2()def labelTargets(img, mask, threshold): seg = mask.copy() cnts = cv2.findContours(seg, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE) count = 0 for i in cnts[1]: area = cv2.contourArea(i) if area &lt; threshold: continue count += 1 rect = cv2.boundingRect(i) print(&quot;çŸ©å½¢ï¼šX:&#123;&#125; Y:&#123;&#125; å®½ï¼š&#123;&#125; é«˜ï¼š&#123;&#125;&quot;.format(rect[0], rect[1], rect[2], rect[3])) cv2.drawContours(img, [i], -1, (255, 255, 0), 1) cv2.rectangle(img, (rect[0], rect[1]), (rect[0] + rect[2], rect[1] + rect[3]), (0, 0, 255), 1) cv2.putText(img, str(count), (rect[0], rect[1]), cv2.FONT_HERSHEY_PLAIN, 0.5, (0, 255, 0)) return countwhile True: flag, source = cap.read() if not flag: break image = cv2.pyrDown(source) fgMask = pBgModel.apply(image) kernel = cv2.getStructuringElement(cv2.MORPH_RECT, (5, 5)) morphImage_open = cv2.morphologyEx(fgMask, cv2.MORPH_OPEN, kernel, iterations=5) mask = fgMask - morphImage_open _, Mask = cv2.threshold(mask, 30, 255, cv2.THRESH_BINARY + cv2.THRESH_OTSU) # Mask = cv2.GaussianBlur(Mask, (5, 5), 0) targets = labelTargets(image, Mask, 30) print(&quot;å…±æ£€æµ‹%sä¸ªç›®æ ‡&quot; % targets) backGround = pBgModel.getBackgroundImage() foreGround = image - backGround cv2.imshow(&#x27;source&#x27;, image) cv2.imshow(&#x27;background&#x27;, backGround) cv2.imshow(&#x27;foreground&#x27;, Mask) key = cv2.waitKey(10) if key == 27: break","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"https://aicc-cn.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"https://aicc-cn.github.io/tags/OpenCV/"}],"author":"Seven"},{"title":"åŸºäºORBçš„ç‰¹å¾åŒ¹é…","slug":"2019-03-22-cv-ORB_feature","date":"2019-03-22T16:00:00.000Z","updated":"2022-03-25T13:38:18.191Z","comments":true,"path":"2019/03/23/2019-03-22-cv-ORB_feature/","link":"","permalink":"https://aicc-cn.github.io/2019/03/23/2019-03-22-cv-ORB_feature/","excerpt":"","text":"1234567891011121314151617181920212223242526272829303132333435363738394041#!/usr/bin/env python# -*- coding: utf-8 -*-# @Time : 2019/3/4 12:54# @Author : Seven# @File : ImageMatching-ORB.py# @Software: PyCharm# function : ä½¿ç”¨ORBè¿›è¡Œæå–ç‰¹å¾ç‚¹è¿›è¡Œå›¾ç‰‡åŒ¹é…import cv2# åŠ è½½å›¾ç‰‡imgL = cv2.imread(&#x27;image/A.jpg&#x27;)imgR = cv2.imread(&#x27;image/B.jpg&#x27;)# è½¬æ¢ä¸ºç°åº¦å›¾grayL = cv2.cvtColor(imgL, cv2.COLOR_BGR2GRAY)grayR = cv2.cvtColor(imgR, cv2.COLOR_BGR2GRAY)# æå–ç‰¹å¾ç‚¹orb = cv2.ORB_create()kL, dL = orb.detectAndCompute(grayL, None)kR, dR = orb.detectAndCompute(grayR, None)# åˆ›å»º BFMatcher å¯¹è±¡bf = cv2.BFMatcher(cv2.NORM_L2)# æ ¹æ®æè¿°å­åŒ¹é…ç‰¹å¾ç‚¹.matches = bf.match(dL, dR)# ç”»å‡ºåŒ¹é…ç‚¹img3 = cv2.drawMatches(imgL, kL, imgR, kR, matches, None, flags=2)cv2.imshow(&quot;ORB&quot;, img3)# ------------------------------------------------------------------------------------------------# åˆå§‹åŒ–BruteforceåŒ¹é…å™¨bf = cv2.BFMatcher()# é€šè¿‡KNNåŒ¹é…ä¸¤å¼ å›¾ç‰‡çš„æè¿°å­matches = bf.knnMatch(dL, dR, k=2)# ç­›é€‰æ¯”è¾ƒå¥½çš„åŒ¹é…ç‚¹good = []for i, (m, n) in enumerate(matches): if m.distance &lt; 0.6 * n.distance: good.append(m)# ç”»å‡ºåŒ¹é…ç‚¹img3 = cv2.drawMatches(imgL, kL, imgR, kR, good, None, flags=2)cv2.imshow(&quot;ORB-BF&quot;, img3)cv2.waitKey(0)","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"https://aicc-cn.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"https://aicc-cn.github.io/tags/OpenCV/"}],"author":"Seven"},{"title":"åŸºäºSURFçš„ç‰¹å¾åŒ¹é…","slug":"2019-03-25-cv-SURF_feature","date":"2019-03-22T16:00:00.000Z","updated":"2022-03-25T13:38:30.762Z","comments":true,"path":"2019/03/23/2019-03-25-cv-SURF_feature/","link":"","permalink":"https://aicc-cn.github.io/2019/03/23/2019-03-25-cv-SURF_feature/","excerpt":"","text":"12345678910111213141516171819202122232425262728293031323334353637383940414243444546#!/usr/bin/env python# -*- coding: utf-8 -*-# @Time : 2019/3/2 21:36# @Author : Seven# @File : ImageMatching-SURF.py# @Software: PyCharm# function : ä½¿ç”¨SURFè¿›è¡Œæå–ç‰¹å¾ç‚¹è¿›è¡Œå›¾ç‰‡åŒ¹é…import cv2# åŠ è½½å›¾ç‰‡imgL = cv2.imread(&#x27;image/A.jpg&#x27;)imgR = cv2.imread(&#x27;image/B.jpg&#x27;)# è½¬æ¢ä¸ºç°åº¦å›¾grayL = cv2.cvtColor(imgL, cv2.COLOR_BGR2GRAY)grayR = cv2.cvtColor(imgR, cv2.COLOR_BGR2GRAY)# æå–ç‰¹å¾ç‚¹surf = cv2.xfeatures2d.SURF_create(hessianThreshold=800) # hessiançŸ©é˜µé˜ˆå€¼ï¼Œåœ¨è¿™é‡Œè°ƒæ•´ç²¾åº¦ï¼Œå€¼è¶Šå¤§ï¼Œç‚¹è¶Šå°‘ï¼Œè¶Šç²¾å‡†kL, dL = surf.detectAndCompute(grayL, None)kR, dR = surf.detectAndCompute(grayR, None)# åˆ›å»º BFMatcher å¯¹è±¡bf = cv2.BFMatcher(cv2.NORM_L2)# æ ¹æ®æè¿°å­åŒ¹é…ç‰¹å¾ç‚¹.matches = bf.match(dL, dR)# ç”»å‡ºåŒ¹é…ç‚¹img3 = cv2.drawMatches(imgL, kL, imgR, kR, matches, None, flags=2)cv2.imshow(&quot;SURF&quot;, img3)# ------------------------------------------------------------------------------------------------# è®¾ç½®FLANN è¶…å‚æ•°FLANN_INDEX_KDTREE = 0# K-Dæ ‘ç´¢å¼•è¶…å‚æ•°index_params = dict(algorithm=FLANN_INDEX_KDTREE, trees=5)# æœç´¢è¶…å‚æ•°search_params = dict(checks=50)# åˆå§‹åŒ–FlannBasedMatcheråŒ¹é…å™¨flann = cv2.FlannBasedMatcher(index_params, search_params)# é€šè¿‡KNNçš„æ–¹å¼åŒ¹é…ä¸¤å¼ å›¾çš„æè¿°å­matches = flann.knnMatch(dL, dR, k=2)# ç­›é€‰æ¯”è¾ƒå¥½çš„åŒ¹é…ç‚¹good = []for i, (m, n) in enumerate(matches): if m.distance &lt; 0.6 * n.distance: good.append(m)# ç”»å‡ºåŒ¹é…ç‚¹img3 = cv2.drawMatches(imgL, kL, imgR, kR, good, None, flags=2)cv2.imshow(&quot;SURF-FLANN&quot;, img3)cv2.waitKey(0)","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"https://aicc-cn.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"https://aicc-cn.github.io/tags/OpenCV/"}],"author":"Seven"},{"title":"å›¾ç‰‡æ‹¼æ¥","slug":"2019-03-26-cv-IMAGE_JOIN","date":"2019-03-22T16:00:00.000Z","updated":"2022-03-25T13:38:40.199Z","comments":true,"path":"2019/03/23/2019-03-26-cv-IMAGE_JOIN/","link":"","permalink":"https://aicc-cn.github.io/2019/03/23/2019-03-26-cv-IMAGE_JOIN/","excerpt":"","text":"123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130#!/usr/bin/env python# -*- coding: utf-8 -*-# @Time : 2019/2/16 21:29# @Author : Seven# @File : ImageJoin.py# @Software: PyCharm# function : å›¾ç‰‡æ‹¼æ¥import cv2import numpy as npdef get_stitched_image(img1, img2, M): &quot;&quot;&quot; ä½¿ç”¨å…³é”®ç‚¹æ¥ç¼åˆå›¾åƒ :param img1: :param img2: :param M: å¯¹åº”çŸ©é˜µ :return: æ‹¼æ¥åçš„å›¾ç‰‡æ•°æ® &quot;&quot;&quot; # è·å–è¾“å…¥å›¾ç‰‡çš„ç»´åº¦ w1, h1 = img1.shape[:2] w2, h2 = img2.shape[:2] # ç”Ÿæˆå¯¹åº”ç»´åº¦çš„ç”»å¸ƒ img1_dims = np.float32([[0, 0], [0, w1], [h1, w1], [h1, 0]]).reshape(-1, 1, 2) img2_dims_temp = np.float32([[0, 0], [0, w2], [h2, w2], [h2, 0]]).reshape(-1, 1, 2) # è·å–é€è§†å˜æ¢çš„äº¤æ¢çŸ©é˜µ img2_dims = cv2.perspectiveTransform(img2_dims_temp, M) # æœ€ç»ˆçš„ç»´åº¦ result_dims = np.concatenate((img1_dims, img2_dims), axis=0) # å¼€å§‹æ‹¼æ¥å›¾ç‰‡ # é€šè¿‡åŒ¹é…ç‚¹æ¥è®¡ç®—ç»´åº¦ [x_min, y_min] = np.int32(result_dims.min(axis=0).ravel() - 0.5) [x_max, y_max] = np.int32(result_dims.max(axis=0).ravel() + 0.5) # å˜æ¢ååˆ›å»ºè¾“å‡ºçŸ©é˜µ transform_dist = [-x_min, -y_min] transform_array = np.array([[1, 0, transform_dist[0]], [0, 1, transform_dist[1]], [0, 0, 1]]) # ä¿®æ­£å›¾åƒä»¥è·å¾—ç»“æœå›¾åƒ result_img = cv2.warpPerspective(img2, transform_array.dot(M), (x_max - x_min, y_max - y_min)) result_img[transform_dist[1]:w1 + transform_dist[1], transform_dist[0]:h1 + transform_dist[0]] = img1 # è¿”å›æœ€ç»ˆç»“æœ return result_imgdef get_sift_homography(img1, img2): &quot;&quot;&quot; ä½¿ç”¨SIFTæ–¹æ³•è·å–ä¸¤å¼ å›¾ç‰‡çš„å…³é”®ç‚¹ :param img1: :param img2: :return: å…³é”®ç‚¹ç»„æˆçš„å¯¹åº”çŸ©é˜µ &quot;&quot;&quot; # åˆå§‹åŒ–SIFTæ–¹æ³• sift = cv2.xfeatures2d_SIFT.create() # è·å–å…³é”®ç‚¹å’Œæè¿°å­ k1, d1 = sift.detectAndCompute(img1, None) k2, d2 = sift.detectAndCompute(img2, None) # åˆå§‹åŒ–BruteforceåŒ¹é…å™¨ bf = cv2.BFMatcher() # é€šè¿‡KNNåŒ¹é…ä¸¤å¼ å›¾ç‰‡çš„æè¿°å­ matches = bf.knnMatch(d1, d2, k=2) # ç¡®å®šæœ€å¥½çš„åŒ¹é… verified_matches = [] for m1, m2 in matches: # æŠŠåŒ¹é…çš„è¾ƒå¥½çš„æ·»åŠ åˆ°çŸ©é˜µä¸­ if m1.distance &lt; 0.8 * m2.distance: verified_matches.append(m1) # æœ€å°åŒ¹é…æ•° min_matches = 8 if len(verified_matches) &gt; min_matches: # å­˜å‚¨åŒ¹é…ç‚¹ img1_pts = [] img2_pts = [] # å°†åŒ¹é…ç‚¹åŠ å…¥çŸ©é˜µä¸­ for match in verified_matches: img1_pts.append(k1[match.queryIdx].pt) img2_pts.append(k2[match.trainIdx].pt) img1_pts = np.float32(img1_pts).reshape(-1, 1, 2) img2_pts = np.float32(img2_pts).reshape(-1, 1, 2) # è®¡ç®—å•åº”çŸ©é˜µ M, mask = cv2.findHomography(img1_pts, img2_pts, cv2.RANSAC, 5.0) return M else: print(&#x27;Error: Not enough matches&#x27;) exit()def changeImage(img1, img2): # ä½¿ç”¨SIFTæŸ¥æ‰¾å…³é”®ç‚¹å¹¶è¿”å›å…³é”®ç‚¹ç»„æˆçš„çŸ©é˜µ M = get_sift_homography(img1, img2) # ä½¿ç”¨å…³é”®ç‚¹çŸ©é˜µå°†å›¾åƒç¼åˆåœ¨ä¸€èµ· result_image = get_stitched_image(img2, img1, M) return result_imagedef main(): # åŠ è½½å›¾ç‰‡ img1 = cv2.imread(&quot;images/csdn_A.jpg&quot;) img2 = cv2.imread(&quot;images/csdn_B.jpg&quot;) img3 = cv2.imread(&quot;images/csdn_C.jpg&quot;) # æ˜¾ç¤ºåŠ è½½çš„å›¾ç‰‡ input_images = np.hstack((img1, img2, img3)) cv2.imshow(&#x27;Input Images&#x27;, input_images) out1 = changeImage(img1, img2) out2 = changeImage(img1, img3) result_image = changeImage(out1, out2) # ä¿å­˜æ–‡ä»¶ result_image_name = &#x27;results/result_tree.jpg&#x27; cv2.imwrite(result_image_name, result_image) # æ˜¾ç¤ºæ‹¼æ¥çš„ç»“æœ cv2.imshow(&#x27;Result&#x27;, result_image) cv2.waitKey()if __name__ == &#x27;__main__&#x27;: main()","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"https://aicc-cn.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"https://aicc-cn.github.io/tags/OpenCV/"}],"author":"Seven"},{"title":"ã€ä¸€ã€‘è®¡ç®—æœºè§†è§‰å¼•è®º","slug":"2019-03-01-cv-introduction","date":"2019-03-21T16:00:00.000Z","updated":"2022-03-25T13:50:50.123Z","comments":true,"path":"2019/03/22/2019-03-01-cv-introduction/","link":"","permalink":"https://aicc-cn.github.io/2019/03/22/2019-03-01-cv-introduction/","excerpt":"","text":"è®¡ç®—æœºè§†è§‰ è®¡ç®—æœºè§†è§‰å°±æ˜¯è®©è®¡ç®—æœºçœ‹æ‡‚å›¾åƒå’Œè§†é¢‘ã€‚ è§†è§‰æ˜¯è‡ªç„¶æ™ºèƒ½ä¸å¯æ€è®®çš„ç»“æ™¶ çŒ•çŒ´çš„å¤§è„‘çš®å±‚ä¸­è§†è§‰éƒ¨åˆ†å æ®å¤§çº¦50% äººè„‘ä¸­æœ‰å…³è§†è§‰çš„éƒ¨åˆ†æ‰€å æ¯”é‡æœ€å¤§ äººç±»å¤§è„‘å¯¹è§†è§‰è¿›è¡Œå±‚æ¬¡åŒ–çš„å¤„ç† äººç±»é‡‡ç”¨ç¥ç»ç½‘ç»œå¯¹è§†è§‰ä¿¡æ¯è¿›è¡Œæ·±å±‚æ¬¡å¤„ç†ï¼Œå’Œæ·±åº¦å­¦ä¹ å¯†åˆ‡ç»“åˆã€‚ è®¡ç®—æœºè§†è§‰çš„äº§ç”Ÿå’Œå‘å±•éƒ½ç»å†çš„é˜¶æ®µ èµ·æºï¼š20ä¸–çºª50å¹´ä»£ç»Ÿè®¡æ¨¡å¼è¯†åˆ«ï¼ŒäºŒç»´å›¾åƒåˆ†æã€‚ è¯ç”Ÿï¼š1974å¹´ Minsky -&gt; David Marr æš‘æœŸï¼Œ 1981å¹´ï¼Œäººå·¥æ™ºèƒ½â€œè®¡ç®—æœºè§†è§‰â€ä¸“è¾‘ï¼ŒMarrè§†è§‰è®¡ç®—ç†è®º å¾—åˆ°äº†è¿…é€Ÿçš„å‘å±•ã€‚ å‘å±•ï¼š 80å¹´ä»£ä»¥åï¼š éšç€è®¡ç®—èƒ½åŠ›çš„è¿…é€Ÿå¢é•¿ï¼Œè§†è§‰è®¡ç®—æˆæœ¬æå¤§é™ä½ã€‚ ä»¥Marrç†è®ºä¸ºåŸºç¡€çš„è§†è§‰ç†è®ºå¹¿æ³›ç ”ç©¶ã€‚ 2000å¹´åï¼Œç‰¹å¾æå–å’ŒåŸºäºå­¦ä¹ çš„è§†è§‰å¾—åˆ°è¿…é€Ÿå‘å±•ã€‚ 2006å¹´ï¼ŒHinton æå‡ºæ·±åº¦å­¦ä¹ ã€‚ 2010å¹´ï¼Œ å¾®è½¯ä½¿ç”¨æ·±åº¦å­¦ä¹ åœ¨è¯­éŸ³æ–¹é¢å–å¾—çªç ´è¿›å±•ã€‚ 2015å¹´åï¼Œæ·±åº¦å­¦ä¹ åœ¨è§†è§‰ä¸ªå„é‚»åŸŸå–å¾—çªç ´ï¼š 2015å¹´ï¼Œ åœ¨imageNetä¸Šçš„è¯†åˆ«å‡†ç¡®ç‡é¦–æ¬¡è¶…è¶Šäººç±»ã€‚ 2016å¹´ï¼ŒTesla åˆ›é€ äº†56äº¿å…¬é‡Œçš„è‡ªåŠ¨é©¾é©¶è·¯æµ‹æ•°æ®ã€‚ 2017å¹´ï¼ŒiPone x å®£å¸ƒå¼•å…¥Face ID é«˜ç²¾åº¦äººè„¸è¯†åˆ«æŠ€æœ¯ã€‚ 2018å¹´ï¼ŒOpenAI 2:1 æˆ˜èƒœäººç±»DOTA2é«˜æ‰‹é˜Ÿã€‚ è®¡ç®—æœºè§†è§‰çš„åº”ç”¨ æœåŠ¡æœºå™¨äºº å®‰é˜²ç›‘æ§ è‡ªåŠ¨é©¾é©¶ æ™ºèƒ½ç©¿æˆ´ æ— äººæœºå¿«é€’ ç­‰ç­‰ å†…å®¹æ¶æ„ éµå¾ªMarrè§†è§‰è®¡ç®—æœºç†è®º ä»åˆç•¥å›¾ï¼ˆ2ç»´ï¼‰â€“&gt; $2 \\frac12$ç»´ â€“&gt;3ç»´ åˆç•¥å›¾ â€œçœ‹è§â€â€“ç…§ç›¸ï¼Œé¢œè‰²ï¼Œå›¾åƒé‡‡é›†çš„è¿‡ç¨‹ã€‚ â€œåŸºæœ¬ç†è§£â€â€“ æ»¤æ³¢ã€è¾¹ç¼˜æ£€æµ‹ã€ç°åº¦ç›´æ–¹å›¾ã€ç›´çº¿æ£€æµ‹â€“åŸºæœ¬ç‰¹å¾æå– å›¾åƒé˜ˆå€¼åˆ†å‰²ã€åŒºåŸŸç”Ÿé•¿ã€å›¾åƒæè¿° å…³é”®ç‚¹åŠç‰¹å¾æ£€æµ‹ èƒŒæ™¯å»ºæ¨¡åŠè¿åŠ¨ä¼°è®¡ $2 \\frac12$ç»´ è§†è§‰æˆåƒæ¨¡å‹ã€è§†è§‰å‡ ä½•åŸºç¡€ã€ç›¸æœºæ ‡å®š 3ç»´ å›¾åƒæ‹¼æ¥ ç«‹ä½“è§†è§‰ ä»åº•å±‚â€“&gt;ä¸­å±‚â€“&gt;é«˜å±‚ åº•å±‚æ˜¯ç”±é«˜ç­‰æ•°å­¦ï¼Œçº¿æ€§ä»£æ•°ï¼ŒçŸ©é˜µåˆ†æï¼Œæ¦‚ç‡è®ºï¼Œæœ€ä¼˜åŒ–æ–¹æ³•ï¼Œç‰©ç†(è¿åŠ¨å­¦)æ¥è¿›è¡Œæ¶æ„ ä½œä¸ºç†è®ºæ”¯æ’‘ã€‚ ä¸­å±‚ï¼šæœºå™¨è§†è§‰æ˜¯å»ºç«‹åœ¨æ•°å­—å›¾åƒå¤„ç†å’Œæ¨¡å¼è¯†åˆ«ä¹‹ä¸Šçš„ã€‚ é«˜å±‚ï¼šæ·±åº¦å­¦ä¹ +è®¡ç®—æœºè§†è§‰ å³å°†æ›´æ–°","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"https://aicc-cn.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"https://aicc-cn.github.io/tags/OpenCV/"}],"author":"Seven"},{"title":"ã€äºŒã€‘è§†è§‰ç³»ç»Ÿ","slug":"2019-03-02-cv-visualsystem","date":"2019-03-21T16:00:00.000Z","updated":"2022-03-25T13:50:54.566Z","comments":true,"path":"2019/03/22/2019-03-02-cv-visualsystem/","link":"","permalink":"https://aicc-cn.github.io/2019/03/22/2019-03-02-cv-visualsystem/","excerpt":"","text":"è§†è§‰ç³»ç»Ÿæ„æˆè¦ç´  ç…§æ˜è®¾å¤‡ï¼šå…‰æº æˆåƒè®¾å¤‡ï¼šç›¸æœº å¤„ç†è®¾å¤‡ï¼šä¸»æœº ç®—æ³•è½¯ä»¶ï¼šè§†è§‰å¤„ç†ç³»ç»Ÿ ã€è¦ç´ çš„å…³ç³»ã€‘ ã€è¦ç´ çš„ç†è§£ã€‘ å…‰æºï¼šå¯¹åœºæ™¯è¿›è¡Œç…§æ˜ï¼Œä½¿èƒ½æ•æ‰çš„èŒƒå›´æ›´å¤§ï¼Œäº‹ç‰©æ›´æ¸…æ™°ï¼Œä¸€èˆ¬å°±æ˜¯å„ç§å…‰ã€‚ ç›¸æœºï¼šæŠ“å–å›¾ç‰‡ï¼Œä¿ç•™ä¿¡æ¯ï¼Œä¸€èˆ¬æ˜¯æŒ‡ç…§ç›¸æœºï¼Œæ‘„åƒæœºï¼Œä¸€ä¸ªæˆ–å¤šä¸ªã€‚ ä¸»æœºï¼šå¤„ç†å›¾ç‰‡ä¿¡æ¯ï¼Œä¸€èˆ¬ä¸ºå°å¼è®¡ç®—æœºæˆ–åµŒå…¥å¼å¤„ç†å™¨ã€‚ ç®—æ³•è½¯ä»¶ï¼šè¾…åŠ©ä¸»æœºå¤„ç†å›¾ç‰‡ä¿¡æ¯ï¼Œæå–æ‰€éœ€è¦çš„ç‰¹å¾ï¼Œ ä¸€èˆ¬ä¸ºC++æˆ–è€…å…¶ä»–ç¼–ç¨‹è¯­è¨€ç¼–å†™çš„è§†è§‰è¯†åˆ«ç®—æ³•åŠç¨‹åºã€‚ ã€è¦ç´ æ¡ˆä¾‹ã€‘ å…‰æºï¼šå®¤å†…å…‰çº¿æˆ–ä¸“ç”¨ç…§æ˜ ç›¸æœºï¼šæ”¾åœ¨æœºæ¢°è‡‚å‰ç«¯ï¼Œå•ç›¸æœº ä¸»æœºï¼šå°å¼è®¡ç®—æœºæˆ–åµŒå…¥å¼å¤„ç†å™¨ ç®—æ³•è½¯ä»¶ï¼šä½¿ç”¨C++æˆ–å…¶å®ƒè¯­è¨€ç¼–å†™çš„è§†è§‰è¯†åˆ«ç®—æ³•åŠç¨‹åº å…‰æºï¼šçº¢å¤–å’Œå¯è§å…‰ ç›¸æœºï¼šRGB+çº¢å¤– ä¸»æœºï¼šç±»PCç»“æ„ è½¯ä»¶ï¼šè¿è¡Œåœ¨SoC+åç«¯ä¸»æœºè½¯ä»¶ Marrè§†è§‰è®¡ç®—æœºç†è®º ç›®çš„ï¼šé€šè¿‡è§†è§‰ç³»ç»Ÿï¼Œé‡æ„ä¸‰ç»´ç‰©ä½“çš„å½¢çŠ¶å’Œä½ç½® åˆç•¥å›¾ï¼ˆ2ç»´ï¼‰ï¼šè¿‡é›¶ç‚¹ï¼ˆzero-crossingï¼‰ã€çŸ­çº¿æ®µã€ç«¯ç‚¹ç­‰åŸºæœ¬ç‰¹å¾ $2 \\frac12$ç»´ï¼šå¯¹ç‰©ä½“å½¢çŠ¶çš„ä¸€äº›åˆç•¥æè¿° 3ç»´ï¼šå¯¹ç‰©ä½“çš„ä¸‰ç»´æè¿° ã€è§£é‡Šã€‘ Marrè§†è§‰è®¡ç®—æœºç†è®ºå°±æ˜¯é€šè¿‡è§†è§‰æ•æ‰ç‰©ä½“çš„å›¾åƒå’Œä½ç½®ï¼Œç„¶åé€šè¿‡æŠ€æœ¯é‡æ„ç‰©ä½“çš„ä¸‰ç»´ç‰¹å¾ï¼›è¿™ä¸ªè¿‡ç¨‹åŒ…æ‹¬ï¼š å…ˆé€šè¿‡å›¾åƒæå–å‡ºä¸€äº›2ç»´çš„åˆç•¥å›¾ ç„¶åå¯¹ç‰©ä½“çš„å½¢çŠ¶çš„ç‰¹å¾(æ³•å‘é‡ç­‰)æŠ½å–å¹¶åšä¸€äº›åˆç•¥çš„æè¿°ç¡®å®š$2 \\frac12$ç»´å›¾ æœ€åç»¼åˆæ‰€æœ‰ç‰¹å¾å½¢æˆç‰©ä½“çš„ä¸‰ç»´ç‰¹å¾å›¾ã€‚","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"https://aicc-cn.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"https://aicc-cn.github.io/tags/OpenCV/"}],"author":"Seven"},{"title":"ã€ä¸‰ã€‘æ•°å­—æˆåƒç³»ç»Ÿ","slug":"2019-03-03-cv-digitaltoimage","date":"2019-03-21T16:00:00.000Z","updated":"2022-03-25T13:51:00.893Z","comments":true,"path":"2019/03/22/2019-03-03-cv-digitaltoimage/","link":"","permalink":"https://aicc-cn.github.io/2019/03/22/2019-03-03-cv-digitaltoimage/","excerpt":"","text":"å…‰é€šé‡ æŒ‡äººçœ¼æ‰€èƒ½æ„Ÿè§‰åˆ°çš„è¾å°„åŠŸç‡ï¼Œå®ƒç­‰äºå•ä½æ—¶é—´å†…æŸä¸€æ³¢æ®µçš„è¾å°„èƒ½é‡å’Œè¯¥æ³¢æ®µçš„ç›¸å¯¹è§†è§ç‡çš„ä¹˜ç§¯ã€‚ ç¬¦å·ï¼šÎ¦ å•ä½ï¼šlm(æµæ˜) 1lm &#x3D; 0.00146ç“¦ å¸¸è§å…‰æºçš„å…‰é€šé‡ è¾ç…§åº¦ æŒ‡æŠ•å°„åˆ°ä¸€å¹³æ–¹ç±³è¡¨é¢ä¸Šçš„è¾å°„é€šé‡å¯†åº¦ã€‚ä¹Ÿå°±æ˜¯è¯´æ˜¯åˆ°è¾¾ä¸€å¹³æ–¹ç±³è¡¨é¢ä¸Šï¼Œå•ä½æ—¶é—´ï¼Œå•ä½é¢ç§¯ä¸Šçš„è¾å°„èƒ½ã€‚ ç¬¦å·ï¼šE å•ä½ï¼šlux(å‹’å…‹æ–¯) 1 lux &#x3D; 1 lm&#x2F;$m^2$ å¸¸è§ç…§æ˜ç¯å¢ƒçš„è¾ç…§åº¦ å…‰æºç±»åˆ« æŒ‰æ–¹å‘ ç›´å°„å…‰ æ¼«å°„å…‰ æŒ‰å…‰è°± å¯è§å…‰ è¿‘å¯è§å…‰ å…¶ä»– åæŒ¯ å…¶ä»– ç‰¹ç‚¹ã€é€è§†è½®å»“â€“èƒŒå…‰æºã€‘ å‘å°„é¢æ˜¯ä¸€ä¸ªæ¼«å°„é¢ï¼Œ å‡åŒ€æ€§å¥½ã€‚å¯ç”¨äºé•œé¢åå°„ææ–™ï¼Œå¦‚æ™¶ç‰‡æˆ–è€…ç»ç’ƒåŸºåº•ä¸Šçš„ä¼¤ç—•æ£€æµ‹ï¼›LCDæ£€æµ‹ï¼›å¾®å°ç”µå­å…ƒä»¶å°ºå¯¸ã€å½¢çŠ¶ã€é¶æ ‡æµ‹è¯• ã€è¡¨é¢ç…§æ˜â€“æ¼«å°„å…‰æºã€‘ åœ¨ä¸€å®šå·¥ä½œè·ç¦»ä¸‹ï¼Œå…‰æŸé›†ä¸­ã€äº®åº¦é«˜ã€å‡åŒ€æ€§å¥½ã€ç…§å°„é¢ç§¯ç›¸å¯¹è¾ƒå°ã€‚å¸¸ç”¨äºæ¶²æ™¶æ ¡æ­£ã€å¡‘èƒ¶å®¹å™¨æ£€æŸ¥ã€å·¥ä½œèºå­”å®šä½ã€æ ‡ç­¾æ£€æŸ¥ã€ç®¡è„šæ£€æŸ¥ã€é›†æˆç”µè·¯å°å­—æ£€æŸ¥ç­‰ç­‰ ã€é¢œè‰²å…‰æºã€‘ å¦‚æœå¸Œæœ›æ›´åŠ é²œæ˜åœ°çªå‡ºæŸäº›é¢œè‰²ï¼Œåˆ™é€‰æ‹©è‰²ç¯ä¸Šç›¸å¯¹åº”çš„äº’è¡¥é¢œè‰²å…‰æºç…§æ˜ï¼Œè¿™æ ·å°±å¯ä»¥æ˜æ˜¾çš„æé«˜å›¾åƒçš„å¯¹æ¯”åº¦ã€‚ RGB ä¸ºç”Ÿæ´»ä¸­æ‰€æœ€å¸¸è§çš„ä¸‰åŸºè‰²ï¼Œä¹Ÿæ˜¯å’Œè§†è§‰æ„Ÿå—ä¸€ä¸€è‡´çš„ï¼Œå¾ˆå¤šé¢œè‰²éƒ½æ˜¯ç”±è¿™ä¸‰åŸºè‰²äº§ç”Ÿã€‚ ä¸‰åŸºè‰²: çº¢ã€ç»¿ã€è“ ä¸‰è‰²ç›¸äº¤äº’æ˜¯ç™½è‰²ã€‚ CYMK è¡¥è‰²æ¨¡å‹ åŸºè‰²å˜ä¸ºåŸºæœ¬ä¸‰åŸºè‰²çš„è¡¥è‰²â€“çº¢è‰²â€“&gt;é’è‰²ã€ç»¿è‰²â€“&gt;é»„è‰²ã€è“è‰²â€“&gt;å“çº¢ ä¸‰åŸºè‰²ï¼šé’ã€é»„ã€å“çº¢ ä¸‰è‰²äº¤äº’æ˜¯é»‘è‰²ã€‚ HSI è‰²è°ƒHï¼šæè¿°çº¯è‰²çš„å±æ€§ï¼ˆçº¢ã€é»„ï¼‰ã€‚ é¥±å’Œåº¦Sï¼šè¡¨ç¤ºçš„æ˜¯ä¸€ç§çº¯è‰²è¢«ç™½å…‰ç¨€é‡Šçš„ç¨‹åº¦çš„åº¦é‡ã€‚ äº®åº¦Iï¼šä½“ç°äº†æ— è‰²çš„å…‰ç…§å¼ºåº¦çš„æ¦‚å¿µï¼Œæ˜¯ä¸€ä¸ªä¸»è§‚çš„æè¿°ã€‚ ã€ä¸RGBçš„æ¢ç®—å…³ç³»ã€‘ ä»£ç æ¼”ç¤º 1234567891011121314151617181920212223242526272829import cv2# åŠ è½½å›¾ç‰‡img = cv2.imread(&#x27;2.jpg&#x27;)# ç¼©æ”¾+ç°åº¦åŒ–sizeImage = cv2.pyrDown(img)grayImage = cv2.cvtColor(sizeImage, cv2.COLOR_BGR2GRAY)cv2.imshow(&quot;source image&quot;, sizeImage)cv2.imshow(&quot;gray&quot;, grayImage)# RGBé€šé“åˆ†ç¦»--opencvä¸­ï¼ŒRGBä¸‰ä¸ªé€šé“æ˜¯åè¿‡æ¥çš„rgbImage = cv2.split(sizeImage)cv2.imshow(&quot;R&quot;, rgbImage[2])cv2.imshow(&quot;G&quot;, rgbImage[1])cv2.imshow(&quot;B&quot;, rgbImage[0])# åˆ†ç¦»åä¸ºå•é€šé“ï¼Œç›¸å½“äºåˆ†ç¦»é€šé“çš„åŒæ—¶æŠŠå…¶ä»–ä¸¤ä¸ªé€šé“å¡«å……äº†ç›¸åŒçš„æ•°å€¼ã€‚# æ¯”å¦‚çº¢è‰²é€šé“ï¼Œåˆ†ç¦»å‡ºçº¢è‰²é€šé“çš„åŒæ—¶ï¼Œç»¿è‰²å’Œè“è‰²è¢«å¡«å……ä¸ºå’Œçº¢è‰²ç›¸åŒçš„æ•°å€¼ï¼Œè¿™æ ·ä¸€æ¥å°±åªæœ‰é»‘ç™½ç°äº†ã€‚# å¯ä»¥è¿›è¡Œè§‚å¯Ÿï¼Œä¼šå‘ç°åŸå›¾ä¸­é¢œè‰²è¶Šæ¥è¿‘çº¢è‰²çš„åœ°æ–¹åœ¨çº¢è‰²é€šé“è¶Šæ¥è¿‘ç™½è‰²ã€‚# åœ¨çº¯çº¢çš„åœ°æ–¹åœ¨çº¢è‰²é€šé“ä¼šå‡ºç°çº¯ç™½ã€‚# Rå€¼ä¸º255 -&gt; RGB(255ï¼Œ255ï¼Œ255)ï¼Œä¸ºçº¯ç™½# HSIé¢œè‰²æ¨¡å‹+é€šé“åˆ†ç¦»hsv = cv2.cvtColor(sizeImage, cv2.COLOR_BGR2HSV)hsvChannels = cv2.split(hsv)cv2.imshow(&quot;Hue&quot;, hsvChannels[0])cv2.imshow(&quot;Saturation&quot;, hsvChannels[1])cv2.imshow(&quot;Value&quot;, hsvChannels[2])cv2.waitKey(0) CCDä¼ æ„Ÿå™¨åŸºæœ¬åŸç† å½©è‰²å›¾åƒä¼ æ„Ÿå™¨çš„åŸºæœ¬åŸç† æœ€åº•å±‚çš„æ„Ÿå…‰åŒºåŒæ ·æ˜¯é‡‡ç”¨CCDå›¾åƒä¼ æ„Ÿå™¨ å½©è‰²æ»¤è‰²ç‰‡é˜µåˆ—(Color Filter Array),ä¹Ÿè¢«ç§°ä¸ºæ‹œå°”æ»¤è‰²é•œ(Bayer Filter)ï¼Œæ’åˆ—åœ¨æ„Ÿå…‰åŒºä¸Šæ–¹ã€‚ ä¼ æ„Ÿå™¨ä¸åŒï¼Œæ’åˆ—æ–¹å¼å°±ä¸åŒã€‚ è¿™ä¸ªå•å…ƒåŒ…å«äº†ä¸‰åŸè‰²ï¼šçº¢(R),ç»¿(G),è“(B)ã€‚å¯¹äºå•ä¸ªåƒç´ ç‚¹ï¼Œåªæœ‰ä¸€ç§ç‰¹å®šçš„å½©è‰²æ»¤è‰²ç‰‡æ”¾ç½®åœ¨å…¶ä¸Šæ–¹ã€‚å½©è‰²å›¾åƒçš„åƒç´ ç‚¹ä¸ä»…åŒ…å«é€šå¸¸çš„æ„Ÿå…‰åŒºåŸŸè¿˜åŒ…æ‹¬äº†ä¸€ä¸ªå½©è‰²æ»¤è‰²ç‰‡ã€‚å› ä¸ºäººçœ¼å¯¹ç»¿è‰²çš„æ•æ„Ÿåº¦å¾ˆé«˜ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨äº†æ›´å¤šçš„ç»¿è‰²æ»¤è‰²ç‰‡ï¼Œç±»ä¼¼æ£‹ç›˜æ ¼çš„å½¢å¼æ¥æ‘†æ”¾ç»¿è‰²æ»¤è‰²ç‰‡ï¼Œä»¥æœŸå¾—åˆ°æœ‰ç€æ›´é«˜ç©ºé—´åˆ†è¾¨ç‡çš„å›¾åƒã€‚çº¢è‰²å’Œè“è‰²æ»¤è‰²ç‰‡æ¯éš”ä¸€è¡Œä¸ç»¿è‰²æ»¤è‰²ç‰‡é”™è½æ”¾ç½®ã€‚ Î³æ ¡æ­£ å›¾åƒä¼ æ„Ÿå™¨è¾“å‡ºæ—¶ç»è¿‡Î³æ ¡æ­£ï¼Œä»¥ç¬¦åˆäººçš„è§†è§‰ä¹ æƒ¯ï¼›å­˜å‚¨æ—¶è¿˜åŸå›åŸæœ‰çš„RGBå€¼ã€‚ å›¾åƒä¼ è¾“çš„æ–¹å¼ æ¨¡æ‹Ÿè§†é¢‘ä¼ è¾“ï¼šé‡‡ç”¨åŒè½´ç”µç¼†ç­‰æ–¹å¼ï¼Œå°†äº®åº¦å’Œè‰²åº¦åˆ†ç¦»ï¼Œåœ¨ä¸åŒé¢‘å¸¦è°ƒåˆ¶ååœ¨åŒä¸€ä¿¡å·çº¿ä¸Šä¼ è¾“ã€‚å¸¸ç”¨çš„ä¸ºåŒè½´ç”µç¼†ï¼ŒåŒè½´ç”µç¼†çš„ä¸­å¿ƒå¯¼çº¿ç”¨äºä¼ è¾“ä¿¡å·ï¼Œå¤–å±‚æ˜¯é‡‘å±å±è”½ç½‘ã€‚ RGBæ–¹å¼ï¼šæ˜¾ç¤ºå™¨ï¼ŒæŠ•å½± æ•°å­—ä¼ è¾“ï¼ˆé•¿è·ç¦»ï¼‰ï¼šå…‰çº¤é«˜æ¸…ä¿¡å·ï¼Œç½‘çº¿ æ•°å­—ä¼ è¾“ï¼ˆçŸ­è·ç¦»ï¼‰ï¼šUSBï¼Œç«çº¿ï¼ŒHDMI æ¨¡æ‹Ÿã€æ•°å­—è§†é¢‘ä¼ è¾“æ¥å£ å¸¸è§çš„å›¾åƒå’Œè§†é¢‘å‹ç¼©æ ‡å‡† æ˜¾ç¤ºè®¾å¤‡åŠå‚æ•°ï¼ˆæ¶²æ™¶æ˜¾ç¤ºï¼‰ åˆ†è¾¨ç‡ï¼ˆæœ€ä½³åˆ†è¾¨ç‡ï¼‰åŠæ˜¾ç¤ºå™¨å°ºå¯¸ äº®åº¦å’Œå¯¹æ¯”åº¦ï¼šLCDçš„äº®åº¦ä»¥æµæ˜&#x2F;å¹³æ–¹ç±³ï¼ˆcd&#x2F;m2ï¼‰åº¦é‡ï¼Œå¯¹æ¯”åº¦æ˜¯ç›´æ¥åæ˜ LCDæ˜¾ç¤ºå™¨èƒ½å¦ç°ä¸°å¯Œçš„è‰²é˜¶çš„å‚æ•° å“åº”æ—¶é—´ï¼šå“åº”æ—¶é—´æ˜¯LCDæ˜¾ç¤ºå™¨çš„ä¸€ä¸ªé‡è¦çš„å‚æ•°ï¼Œå®ƒæŒ‡çš„æ˜¯LCDæ˜¾ç¤ºå™¨å¯¹äºè¾“å…¥ä¿¡å·çš„ååº”æ—¶é—´ã€‚ åç‚¹ï¼šå¦‚æœæ¶²æ™¶æ˜¾ç¤ºå±ä¸­æŸä¸€ä¸ªå‘å…‰å•å…ƒæœ‰é—®é¢˜å°±ä¼šå‡ºç°æ€»ä¸Œé€å…‰ã€æ€»é€å…‰ã€åŠé€å…‰ç­‰ç°è±¡ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„â€œåç‚¹â€","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"https://aicc-cn.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"https://aicc-cn.github.io/tags/OpenCV/"}],"author":"Seven"},{"title":"ã€äº”ã€‘å›¾åƒè¾¹ç¼˜æ£€æµ‹","slug":"2019-03-05-cv-image_edge","date":"2019-03-21T16:00:00.000Z","updated":"2022-03-25T13:51:10.104Z","comments":true,"path":"2019/03/22/2019-03-05-cv-image_edge/","link":"","permalink":"https://aicc-cn.github.io/2019/03/22/2019-03-05-cv-image_edge/","excerpt":"","text":"åŸºæœ¬æ€æƒ³ è¾¹ç¼˜æ£€æµ‹çš„åŸºæœ¬æ€æƒ³æ˜¯é€šè¿‡æ£€æµ‹æ¯ä¸ªåƒç´ å’Œå…¶é‚»åŸŸçš„çŠ¶æ€ï¼Œä»¥å†³å®šè¯¥åƒç´ æ˜¯å¦ä½äºä¸€ä¸ªç‰©ä½“çš„è¾¹ç•Œä¸Šã€‚å¦‚æœä¸€ä¸ªåƒç´ ä½äºä¸€ä¸ªç‰©ä½“çš„è¾¹ç•Œä¸Šï¼Œåˆ™å…¶é‚»åŸŸåƒç´ çš„ç°åº¦å€¼çš„å˜åŒ–å°±æ¯”è¾ƒå¤§ã€‚å‡å¦‚å¯ä»¥åº”ç”¨æŸç§ç®—æ³•æ£€æµ‹å‡ºè¿™ç§å˜åŒ–å¹¶è¿›è¡Œé‡åŒ–è¡¨ç¤ºï¼Œé‚£ä¹ˆå°±å¯ä»¥ç¡®å®šç‰©ä½“çš„è¾¹ç•Œã€‚ è¾¹ç¼˜æ£€æµ‹çš„å®è´¨æ˜¯å¾®åˆ†ã€‚ å®é™…ä¸­å¸¸ç”¨å·®åˆ†ï¼Œ Xæ–¹å‘ã€Yæ–¹å‘ã€‚ åŸºæœ¬ç®—å­ã€Robertç®—å­ï¼šä¸€é˜¶å¾®åˆ†ç®—å­ã€‘å¯¹äºå›¾åƒæ¥è¯´ï¼Œæ˜¯ä¸€ä¸ªäºŒç»´çš„ç¦»æ•£å‹æ•°é›†ï¼Œé€šè¿‡æ¨å¹¿äºŒç»´è¿ç»­å‹æ±‚å‡½æ•°åå¯¼çš„æ–¹æ³•ï¼Œæ¥æ±‚å¾—å›¾åƒçš„åå¯¼æ•°ï¼Œå³åœ¨(x,y)å¤„çš„æœ€å¤§å˜åŒ–ç‡ï¼Œä¹Ÿå°±æ˜¯è¿™é‡Œçš„æ¢¯åº¦ï¼š æ¢¯åº¦æ˜¯ä¸€ä¸ªçŸ¢é‡ï¼Œåˆ™(x,y)å¤„çš„æ¢¯åº¦è¡¨ç¤ºä¸ºï¼š å…¶å¤§å°ä¸ºï¼š å› ä¸ºå¹³æ–¹å’Œå¹³æ–¹æ ¹éœ€è¦å¤§é‡çš„è®¡ç®—å¼€é”€ï¼Œæ‰€ä»¥ä½¿ç”¨ç»å¯¹å€¼æ¥è¿‘ä¼¼æ¢¯åº¦å¹…å€¼ï¼š æ–¹å‘ä¸Î±(x,y)æ­£äº¤ï¼š å…¶å¯¹åº”çš„æ¨¡æ¿ä¸ºï¼š å›¾åƒçš„å‚ç›´å’Œæ°´å¹³æ¢¯åº¦ æˆ‘ä»¬æœ‰æ—¶å€™ä¹Ÿéœ€è¦å¯¹è§’çº¿æ–¹å‘çš„æ¢¯åº¦ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š å¯¹åº”æ¨¡æ¿ä¸ºï¼š Roberts äº¤å‰æ¢¯åº¦ç®—å­ã€‚ æ¨¡æ¿æ¨å¯¼ å‚ç›´æˆ–æ°´å¹³ç®—å­æ¨¡æ¿ äº¤å‰ç®—å­æ¨¡æ¿ 2*2 å¤§å°çš„æ¨¡æ¿åœ¨æ¦‚å¿µä¸Šå¾ˆç®€å•ï¼Œä½†æ˜¯ä»–ä»¬å¯¹äºç”¨å…³äºä¸­å¿ƒç‚¹å¯¹ç§°çš„æ¨¡æ¿æ¥è®¡ç®—è¾¹ç¼˜æ–¹å‘ä¸æ˜¯å¾ˆæœ‰ç”¨ï¼Œå…¶æœ€å°æ¨¡æ¿å¤§å°ä¸º3*3ã€‚3*3 æ¨¡æ¿è€ƒè™‘äº†ä¸­å¿ƒç‚¹å¯¹æ®µæ•°æ®çš„æ€§è´¨ï¼Œå¹¶æºå¸¦æœ‰å…³äºè¾¹ç¼˜æ–¹å‘çš„æ›´å¤šä¿¡æ¯ã€‚ ã€Prewittç®—å­ï¼šä¸€é˜¶å¾®åˆ†ç®—å­ã€‘ prewittç®—å­ä¸€èˆ¬ä½¿ç”¨çš„æ˜¯3*3çš„æ¨¡æ¿ æˆ‘å¦‚ä¸‹å®šä¹‰æ°´å¹³ã€å‚ç›´å’Œä¸¤å¯¹è§’çº¿æ–¹å‘çš„æ¢¯åº¦: Prewittç®—å­ï¼š æ•°å­¦æ¨å¯¼ï¼š Prewitt ç®—å­æ˜¯ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œæ£€æµ‹æ°´å¹³è¾¹ç¼˜çš„æ¨¡æ¿å’Œæ£€æµ‹å‚ç›´è¾¹ç¼˜çš„æ¨¡æ¿ï¼Œ Prewitt ç®—å­ä¸€ä¸ªæ–¹å‘æ±‚å¾®åˆ†ï¼Œä¸€ä¸ªæ–¹å‘æ±‚å¹³å‡ï¼Œæ‰€ä»¥å¯¹å™ªå£°ç›¸å¯¹ä¸æ•æ„Ÿã€‚ ã€Sobelç®—å­ï¼šä¸€é˜¶å¾®åˆ†ç®—å­ã€‘ Sobel ç®—å­æ˜¯åœ¨Prewittç®—å­çš„åŸºç¡€ä¸Šæ”¹è¿›çš„ï¼Œ åœ¨ä¸­å¿ƒç³»æ•°ä¸Šä½¿ç”¨ä¸€ä¸ªæƒå€¼2ï¼Œ ç›¸æ¯”è¾ƒPrewittç®—å­ï¼ŒSobelæ¨¡æ¿èƒ½å¤Ÿè¾ƒå¥½çš„æŠ‘åˆ¶(å¹³æ»‘)å™ªå£°ã€‚ è®¡ç®—å…¬å¼ï¼š sobelç®—å­ï¼š æ•°å­¦æ¨å¯¼ï¼š sobelç®—å­ä¹Ÿæœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯æ£€æµ‹æ°´å¹³è¾¹ç¼˜çš„æ¨¡æ¿åŸºäºsobelç®—å­çš„è¾¹ç¼˜æ£€æµ‹ï¼Œå¦ä¸€ä¸ªæ˜¯æ£€æµ‹å‚ç›´è¾¹ç¼˜çš„æ¨¡æ¿åŸºäºsobelç®—å­çš„è¾¹ç¼˜æ£€æµ‹ã€‚ ä¸Prewittç®—å­ç›¸æ¯”ï¼Œsobelç®—å­å¯¹äºåƒç´ ä½ç½®çš„å½±å“åšäº†åŠ æƒï¼Œå› æ­¤æ•ˆæœæ›´å¥½ã€‚ sobelç®—å­çš„å¦å¤–ä¸€ç§å½¢å¼æ˜¯å„å‘åŒæ€§Sobelç®—å­ï¼Œ ä¹Ÿæœ‰ä¸¤ä¸ªæ¨¡æ¿ç»„æˆï¼Œä¸€ä¸ªæ˜¯æ£€æµ‹æ°´å¹³è¾¹ç¼˜çš„åŸºäºsobelç®—å­çš„è¾¹ç¼˜æ£€æµ‹ï¼Œå¦ä¸€ä¸ªæ˜¯æ£€æµ‹å‚ç›´è¾¹ç¼˜çš„åŸºäºsobelç®—å­çš„è¾¹ç¼˜æ£€æµ‹ã€‚ å„å‘åŒæ€§Sobelç®—å­å’Œæ™®é€šsobelç®—å­ç›¸æ¯”ï¼Œä½ç½®åŠ æƒç³»æ•°æ›´ä¸ºå‡†ç¡®ï¼Œåœ¨æ£€æµ‹ä¸åŒæ–¹å‘çš„è¾¹ç¼˜æ˜¯æ¢¯åº¦çš„å¹…åº¦æ˜¯ä¸€è‡´çš„ã€‚ ã€Laplaceç®—å­ï¼šäºŒé˜¶å¾®åˆ†ç®—å­ã€‘ Laplace ç®—å­æ˜¯ä¸€ç§å„å‘åŒæ€§ç®—å­ï¼Œåœ¨åªå…³å¿ƒè¾¹ç¼˜çš„ä½ç½®è€Œä¸è€ƒè™‘å…¶å‘¨å›´çš„åƒç´ ç°åº¦å·®å€¼æ—¶æ¯”è¾ƒåˆé€‚ã€‚Laplaceç®—å­å¯¹å­¤ç«‹åƒç´ çš„å“åº”è¦æ¯”å¯¹è¾¹ç¼˜æˆ–çº¿çš„å“åº”è¦æ›´å¼ºçƒˆï¼Œ å› æ­¤åªé€‚åˆç”¨äºæ— å™ªå£°å›¾åƒã€‚å­˜åœ¨å™ªå£°æƒ…å†µä¸‹ï¼Œ ä½¿ç”¨Laplaceç®—å­æ£€æµ‹è¾¹ç¼˜ä¹‹å‰éœ€è¦å…ˆè¿›è¡Œä½é€šæ»¤æ³¢ã€‚ ä¸€é˜¶å¯¼æ•°ï¼š äºŒé˜¶å¯¼æ•°ï¼š æˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯å…³äºç‚¹xçš„äºŒé˜¶å¯¼æ•°ï¼Œæ•…å°†ä¸Šå¼ä¸­çš„å˜é‡å‡å»1åï¼Œå¾—åˆ°ï¼š åœ¨å›¾åƒå¤„ç†ä¸­é€šè¿‡æ‹‰æ™®æ‹‰æ–¯æ¨¡æ¿æ±‚äºŒé˜¶å¯¼æ•°ï¼Œ å…¶å®šä¹‰å¦‚ä¸‹ï¼š å†™æˆå·®åˆ†å½¢å¼ä¸º laplaceå·ç§¯æ ¸ï¼š åœ¨ç”¨lapacian ç®—å­å›¾åƒè¿›è¡Œå·ç§¯è¿ç®—æ—¶ï¼Œå½“å“åº”çš„ç»å¯¹å€¼è¶…è¿‡æŒ‡å®šé˜ˆå€¼æ—¶ï¼Œé‚£ä¹ˆè¯¥ç‚¹å°±æ˜¯è¢«æ£€æµ‹å‡ºæ¥çš„å­¤ç«‹ç‚¹ï¼Œå…·ä½“è¾“å‡ºå¦‚ä¸‹ï¼š ã€LoGç®—å­ï¼šäºŒé˜¶å¾®åˆ†ç®—å­ã€‘ Log è¾¹ç¼˜æ£€æµ‹åˆ™æ˜¯å…ˆè¿›è¡Œé«˜æ–¯æ»¤æ³¢å†è¿›è¡Œæ‹‰æ™®æ‹‰æ–¯ç®—å­æ£€æµ‹, ç„¶åæ‰¾è¿‡é›¶ç‚¹æ¥ç¡®å®šè¾¹ç¼˜ä½ç½®ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬åªæ˜¯çŸ¥é“Log 5*5 æ¨¡æ¿å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚ äºŒç»´é«˜æ–¯å…¬å¼ï¼š æŒ‰æ‹‰æ™®æ‹‰æ–¯ç®—å­å…¬å¼æ±‚Xï¼ŒYæ–¹å‘çš„äºŒé˜¶åå¯¼åï¼š è¿™é‡Œxï¼Œy ä¸èƒ½çœ‹æˆæ¨¡æ¿ä½ç½®ï¼Œåº”çœ‹æˆæ˜¯æ¨¡æ¿å…¶ä»–ä½ç½®åˆ°ä¸­å¿ƒä½ç½®çš„è·ç¦»ã€‚é‚£ä¹ˆå†™æˆï¼š è¿™é‡Œx0ï¼Œy0 å°±æ˜¯æ¨¡æ¿ä¸­å¿ƒä½ç½®ï¼Œxï¼Œy æ˜¯æ¨¡æ¿å…¶ä»–ä½ç½®ï¼Œå¯¹äº5*5 æ¨¡æ¿ï¼Œ åˆ™$x_0,&#x3D;2 , y_0&#x3D;2$ï¼Œé‚£å¯¹äºæ¨¡æ¿ä¸­ï¼ˆ0,0ï¼‰ä½ç½®çš„æƒå€¼ï¼Œå³æŠŠx&#x3D; 0ï¼Œy&#x3D; 0ï¼Œx0&#x3D; 2ï¼Œy0 &#x3D; 2 å¸¦å…¥ä¸Šå¼ï¼Œ ä»¤Ïƒ&#x3D; 1ï¼Œå¾—åˆ°çº¦ç­‰äº0.0175ï¼Œè¿™æ ·å¾—åˆ° é€šè¿‡å–æ•´å˜ç¬¦å·ï¼Œä¸”æ¨¡æ¿æ€»å’Œä¸º0ï¼Œå¾—åˆ°ä¸‹å›¾æ‰€ç¤ºçš„æ¨¡æ¿ã€‚ é€šå¸¸é«˜æ–¯åˆ†å¸ƒä¸­ï¼Œåœ¨ï¼ˆ-3Ïƒï¼Œ3Ïƒï¼‰çš„èŒƒå›´å†…å°±è¦†ç›–äº†ç»å¤§éƒ¨åˆ†åŒºåŸŸï¼Œæ‰€ä»¥æ¨¡æ¿å¤§å°ä¸€èˆ¬å–dim &#x3D; 1 + 6Ïƒï¼ˆåœ¨SIFT ç‰¹å¾ä¸­ï¼Œå…¶ä¸­çš„é«˜æ–¯æ¨¡ç³Šä¹Ÿæ˜¯è¿™æ ·å–ï¼‰ï¼Œdim å¦‚æœä¸ºå°æ•°ï¼Œåˆ™å–ä¸å°äºdim çš„æœ€å°æ•´æ•°ï¼Œå½“ç„¶å®é™…ä½¿ç”¨æ—¶æ²¡æœ‰è¿™ä¹ˆä¸¥æ ¼ï¼Œå¦‚ä¸Šé¢æˆ‘ä»¬å–Ïƒ&#x3D;1 æ—¶ï¼Œæ¨¡æ¿å¤§å°å–5*5ã€‚é‚£åŒä¸€ä¸ªå°ºå¯¸çš„æ¨¡æ¿ä¸­çš„æƒå€¼è°ƒæ•´å°±æ˜¯Ïƒçš„å˜åŒ–å¾—åˆ°çš„ï¼Œå˜åŒ–åˆ°ä¸€å®šç¨‹åº¦ï¼Œæ¨¡æ¿å°ºå¯¸å¤§å°æ”¹å˜ã€‚ Cannyç®—å­ï¼šéå¾®åˆ†ç®—å­ã€åŸºæœ¬åŸç†ã€‘ å›¾è±¡è¾¹ç¼˜æ£€æµ‹å¿…é¡»æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶: èƒ½æœ‰æ•ˆçš„æŠ‘åˆ¶å™ªå£°ã€‚ å¿…é¡»å°½é‡ç²¾ç¡®ç¡®å®šè¾¹ç¼˜çš„ä½ç½®ã€‚ æ ¹æ®å¯¹ä¿¡å™ªæ¯”ä¸å®šä½ä¹˜ç§¯è¿›è¡Œæµ‹åº¦ï¼Œï¼Œå¾—åˆ°æœ€ä¼˜åŒ–é€¼è¿‘ç®—å­ã€‚è¿™å°±æ˜¯Cannyè¾¹ç¼˜æ£€æµ‹ç®—å­ã€‚ ç±»ä¼¼ä¸LoGè¾¹ç¼˜æ£€æµ‹æ–¹æ³•ï¼Œä¹Ÿå±äºå…ˆå¹³æ»‘åæ±‚å¯¼æ•°çš„æ–¹æ³•ã€‚ ã€ç®—æ³•æ­¥éª¤ã€‘ ä½¿ç”¨é«˜æ–¯æ»¤æ³¢å™¨ï¼Œä»¥å¹³æ»‘å›¾åƒï¼Œæ»¤é™¤å™ªå£°ã€‚ è®¡ç®—å›¾åƒä¸­æ¯ä¸ªåƒç´ ç‚¹çš„æ¢¯åº¦å¼ºåº¦å’Œæ–¹å‘ã€‚ åº”ç”¨éæå¤§å€¼ï¼ˆNon-Maximum Suppressionï¼‰æŠ‘åˆ¶ï¼Œ ä»¥æ¶ˆé™¤è¾¹ç¼˜æ£€æµ‹å¸¦ç€çš„æ‚æ•£å“åº”ã€‚ åº”ç”¨åŒé˜ˆå€¼ï¼ˆDouble-Thresholdï¼‰æ£€æµ‹æ¥ç¡®å®šçœŸå®çš„å’Œæ½œåœ¨çš„è¾¹ç¼˜ã€‚ é€šè¿‡æŠ‘åˆ¶å­¤ç«‹çš„å¼±è¾¹ç¼˜æœ€ç»ˆå®Œæˆè¾¹ç¼˜æ£€æµ‹ã€‚ ç¬¬ä¸€æ­¥ï¼šåŒæ—¶å¹³æ»‘ä¸å¾®åˆ† ä½¿ç”¨é«˜æ–¯å‡½æ•°çš„ä¸€é˜¶å¯¼æ•°åŒæ—¶å®Œæˆå¹³æ»‘å’Œå¾®åˆ†ã€‚ ç¬¬äºŒæ­¥ï¼šè®¡ç®—æ¢¯åº¦å’Œæ–¹å‘ æ¢¯åº¦å¹…å€¼å’Œæ–¹å‘ æ–¹å‘ç¦»æ•£åŒ–ï¼šç¦»æ•£åŒ–ä¸ºä¸Šä¸‹å·¦å³å’Œæ–œ45Â°å…±4ä¸ªæ–¹å‘ ç¬¬ä¸‰æ­¥ï¼šæ¢¯åº¦å¹…å€¼éæå¤§å€¼æŠ‘åˆ¶ç»†åŒ–æ¢¯åº¦å¹…å€¼å›¾åƒä¸­çš„å±‹è„Šå¸¦ï¼Œåªä¿ç•™å¹…å€¼å±€éƒ¨å˜åŒ–æœ€å¤§çš„ç‚¹ ä½¿ç”¨ä¸€ä¸ª3*3é‚»åŸŸä½œç”¨äºå¹…å€¼é˜µåˆ—çš„æ‰€æœ‰ç‚¹ã€‚åœ¨æ¯ä¸€ç‚¹ä¸Š, é‚»åŸŸçš„ä¸­å¿ƒåƒç´ ä¸æ²¿æ¢¯åº¦æ–¹å‘çš„ä¸¤ä¸ªæ¢¯åº¦å¹…å€¼çš„æ’å€¼ç»“æœè¿›è¡Œè¾ƒï¼Œä»…ä¿ç•™æå¤§å€¼ç‚¹ ç¬¬å››æ­¥ï¼šè¾¹ç¼˜è¿æ¥å¯¹ä¸Šä¸€æ­¥å¾—åˆ°çš„å›¾åƒä½¿ç”¨ä½ã€é«˜é˜ˆå€¼t1, t2 é˜ˆå€¼åŒ–ï¼Œå¾—åˆ°ä¸‰å¹…å›¾åƒ T1å¯¹åº”å‡è¾¹ç¼˜ï¼Œå»é™¤ T3å¯¹åº”çœŸè¾¹ç¼˜ï¼Œå…¨éƒ¨ä¿ç•™ T2è¿æ¥ï¼šä¸´æ¥åƒç´ ä¸­æ˜¯å¦æœ‰å±äºT3çš„åƒç´  ç¬¬äº”æ­¥ï¼šæŠ‘åˆ¶å­¤ç«‹ä½é˜ˆå€¼ç‚¹ è¾¹ç¼˜æ£€æµ‹æ€»ç»“ è¾¹ç¼˜æ£€æµ‹å³å›¾åƒå·®åˆ† å¸¸è§è¾¹ç¼˜æ£€æµ‹ç®—å­åŒ…æ‹¬Robertç®—å­ï¼ŒSobelç®—å­ï¼ŒLoGç®—å­ç­‰ï¼Œå…¶ä¸­Sobelç®—å­æœ€ä¸ºå¸¸ç”¨ Cannyç®—å­çš„åŸºæœ¬ä¼˜ç‚¹åœ¨äºæ£€æµ‹å‡†ç¡®ã€å¯¹å™ªå£°ç¨³å¥ï¼Œåœ¨å®é™…ä¸­å¹¿æ³›åº”ç”¨. ä»£ç æ¼”ç¤º123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152import cv2import numpy as np# åŠ è½½å›¾ç‰‡image = cv2.imread(&#x27;lena.jpg&#x27;)img = cv2.pyrDown(image)cv2.imshow(&quot;source image&quot;, img)def RobertImage(img, name): &quot;&quot;&quot; robertç®—å­çš„å®ç° :param img: :param name: :return: &quot;&quot;&quot; r_sunnzi = np.array([[-1, 1], [1, -1]], np.float32) robertImage = cv2.filter2D(img, -1, r_sunnzi) cv2.imshow(&quot;Robert-%s&quot; % name, robertImage)def sobelImage(img, name): &quot;&quot;&quot; Sobelç®—å­ Sobel(src, ddepth, dx, dy, dst=None, ksize=None, scale=None, delta=None, borderType=None) å‰å››ä¸ªæ˜¯å¿…é¡»çš„å‚æ•°ï¼š ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯éœ€è¦å¤„ç†çš„å›¾åƒï¼› ç¬¬äºŒä¸ªå‚æ•°æ˜¯å›¾åƒçš„æ·±åº¦ï¼Œ-1è¡¨ç¤ºé‡‡ç”¨çš„æ˜¯ä¸åŸå›¾åƒç›¸åŒçš„æ·±åº¦ã€‚ç›®æ ‡å›¾åƒçš„æ·±åº¦å¿…é¡»å¤§äºç­‰äºåŸå›¾åƒçš„æ·±åº¦ï¼› dxå’Œdyè¡¨ç¤ºçš„æ˜¯æ±‚å¯¼çš„é˜¶æ•°ï¼Œ0è¡¨ç¤ºè¿™ä¸ªæ–¹å‘ä¸Šæ²¡æœ‰æ±‚å¯¼ï¼Œä¸€èˆ¬ä¸º0ã€1ã€2ã€‚ å…¶åæ˜¯å¯é€‰çš„å‚æ•°ï¼š dstä¸ç”¨è§£é‡Šäº†ï¼› ksizeæ˜¯Sobelç®—å­çš„å¤§å°ï¼Œå¿…é¡»ä¸º1ã€3ã€5ã€7ã€‚ scaleæ˜¯ç¼©æ”¾å¯¼æ•°çš„æ¯”ä¾‹å¸¸æ•°ï¼Œé»˜è®¤æƒ…å†µä¸‹æ²¡æœ‰ä¼¸ç¼©ç³»æ•°ï¼› deltaæ˜¯ä¸€ä¸ªå¯é€‰çš„å¢é‡ï¼Œå°†ä¼šåŠ åˆ°æœ€ç»ˆçš„dstä¸­ï¼ŒåŒæ ·ï¼Œé»˜è®¤æƒ…å†µä¸‹æ²¡æœ‰é¢å¤–çš„å€¼åŠ åˆ°dstä¸­ï¼› borderTypeæ˜¯åˆ¤æ–­å›¾åƒè¾¹ç•Œçš„æ¨¡å¼ã€‚è¿™ä¸ªå‚æ•°é»˜è®¤å€¼ä¸ºcv2.BORDER_DEFAULTã€‚ :param img: å›¾ç‰‡æ•°æ® :param name: å‘½åæ ‡å¿— :return: &quot;&quot;&quot; # å…ˆæ£€æµ‹xyæ–¹å‘ä¸Šçš„è¾¹ç¼˜ Sobel_Ex = cv2.Sobel(src=img, ddepth=cv2.CV_16S, dx=1, dy=0, ksize=3) Sobel_Ey = cv2.Sobel(src=img, ddepth=cv2.CV_16S, dx=0, dy=1, ksize=3) # å³Sobelå‡½æ•°æ±‚å®Œå¯¼æ•°åä¼šæœ‰è´Ÿå€¼ï¼Œè¿˜æœ‰ä¼šå¤§äº255çš„å€¼ã€‚è€ŒåŸå›¾åƒæ˜¯uint8ï¼Œå³8ä½æ— ç¬¦å·æ•°ï¼Œ # æ‰€ä»¥Sobelå»ºç«‹çš„å›¾åƒä½æ•°ä¸å¤Ÿï¼Œä¼šæœ‰æˆªæ–­ã€‚å› æ­¤è¦ä½¿ç”¨16ä½æœ‰ç¬¦å·çš„æ•°æ®ç±»å‹ï¼Œå³cv2.CV_16Sã€‚ # cv2.imshow(&quot;Sobel_Ex-%s&quot; % name, Sobel_Ex) # å›¾åƒçš„æ¯ä¸€ä¸ªåƒç´ çš„æ¨ªå‘åŠçºµå‘æ¢¯åº¦è¿‘ä¼¼å€¼ç»“åˆ # ç”¨convertScaleAbs()å‡½æ•°å°†å…¶è½¬å›åŸæ¥çš„uint8å½¢å¼ã€‚å¦åˆ™å°†æ— æ³•æ˜¾ç¤ºå›¾åƒï¼Œè€Œåªæ˜¯ä¸€å‰¯ç°è‰²çš„çª—å£ã€‚ absX = cv2.convertScaleAbs(Sobel_Ex) absY = cv2.convertScaleAbs(Sobel_Ey) # cv2.imshow(&quot;absX-%s&quot; % name, absX) # cv2.imshow(&quot;absY-%s&quot; % name, absY) SobelImage = cv2.addWeighted(absX, 0.5, absY, 0.5, 0) cv2.imshow(&quot;sobel-%s&quot; % name, SobelImage) # ddepth=-1è¡¨ç¤ºå›¾åƒæ·±åº¦å’ŒåŸå›¾æ·±åº¦ä¸€è‡´ # Ex = cv2.Sobel(img, -1, 1, 0, ksize=3) # Ey = cv2.Sobel(img, -1, 0, 1, ksize=3) # # cv2.imshow(&quot;Ex-%s&quot; % name, Ex) # SobelImg = cv2.addWeighted(Ex, 0.5, Ey, 0.5, 0) # cv2.imshow(&quot;soImg-%s&quot; % name, SobelImg)def LaplaceImage(img, name): &quot;&quot;&quot; Laplaceç®—å­ Laplacian(src, ddepth, dst=None, ksize=None, scale=None, delta=None, borderType=None) å‰ä¸¤ä¸ªæ˜¯å¿…é¡»çš„å‚æ•°ï¼š ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯éœ€è¦å¤„ç†çš„å›¾åƒï¼› ç¬¬äºŒä¸ªå‚æ•°æ˜¯å›¾åƒçš„æ·±åº¦ï¼Œ-1è¡¨ç¤ºé‡‡ç”¨çš„æ˜¯ä¸åŸå›¾åƒç›¸åŒçš„æ·±åº¦ã€‚ç›®æ ‡å›¾åƒçš„æ·±åº¦å¿…é¡»å¤§äºç­‰äºåŸå›¾åƒçš„æ·±åº¦ï¼› å…¶åæ˜¯å¯é€‰çš„å‚æ•°ï¼š dstä¸ç”¨è§£é‡Šäº†ï¼› ksizeæ˜¯ç®—å­çš„å¤§å°ï¼Œå¿…é¡»ä¸º1ã€3ã€5ã€7ã€‚é»˜è®¤ä¸º1ã€‚ scaleæ˜¯ç¼©æ”¾å¯¼æ•°çš„æ¯”ä¾‹å¸¸æ•°ï¼Œé»˜è®¤æƒ…å†µä¸‹æ²¡æœ‰ä¼¸ç¼©ç³»æ•°ï¼› deltaæ˜¯ä¸€ä¸ªå¯é€‰çš„å¢é‡ï¼Œå°†ä¼šåŠ åˆ°æœ€ç»ˆçš„dstä¸­ï¼ŒåŒæ ·ï¼Œé»˜è®¤æƒ…å†µä¸‹æ²¡æœ‰é¢å¤–çš„å€¼åŠ åˆ°dstä¸­ï¼› borderTypeæ˜¯åˆ¤æ–­å›¾åƒè¾¹ç•Œçš„æ¨¡å¼ã€‚è¿™ä¸ªå‚æ•°é»˜è®¤å€¼ä¸ºcv2.BORDER_DEFAULTã€‚ :param img: å›¾ç‰‡æ•°æ® :param name: å‘½åæ ‡å¿— :return: &quot;&quot;&quot; # ddepth=-1è¡¨ç¤ºå›¾åƒæ·±åº¦å’ŒåŸå›¾æ·±åº¦ä¸€è‡´ # laplaceImage = cv2.Laplacian(img, ddepth=-1, ksize=3) # cv2.imshow(&quot;laplace-%s&quot; % name, laplaceImage) # ddepth=cv2.CV_16Sè¡¨ç¤ºå›¾åƒæ·±åº¦ laplaceImg = cv2.Laplacian(img, ddepth=cv2.CV_16S, ksize=3) lapimg = cv2.convertScaleAbs(laplaceImg) cv2.imshow(&quot;laplace-%s&quot; % name, lapimg)def LoG(img, name): &quot;&quot;&quot; LoGç®—å­çš„å®ç° :param img: :param name: :return: &quot;&quot;&quot; gaussImage = cv2.GaussianBlur(img, (5, 5), 0.01) laplaceImg = cv2.Laplacian(gaussImage, ddepth=cv2.CV_16S, ksize=3) logImg = cv2.convertScaleAbs(laplaceImg) cv2.imshow(&quot;LoG-%s&quot; % name, logImg)def CannyImage(img, name): &quot;&quot;&quot; å¿…è¦å‚æ•°ï¼š ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯éœ€è¦å¤„ç†çš„åŸå›¾åƒï¼Œè¯¥å›¾åƒå¿…é¡»ä¸ºå•é€šé“çš„ç°åº¦å›¾ï¼› ç¬¬äºŒä¸ªå‚æ•°æ˜¯é˜ˆå€¼1ï¼› ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯é˜ˆå€¼2ã€‚ å…¶ä¸­è¾ƒå¤§çš„é˜ˆå€¼2ç”¨äºæ£€æµ‹å›¾åƒä¸­æ˜æ˜¾çš„è¾¹ç¼˜ï¼Œä½†ä¸€èˆ¬æƒ…å†µä¸‹æ£€æµ‹çš„æ•ˆæœä¸ä¼šé‚£ä¹ˆå®Œç¾ï¼Œ è¾¹ç¼˜æ£€æµ‹å‡ºæ¥æ˜¯æ–­æ–­ç»­ç»­çš„ã€‚æ‰€ä»¥è¿™æ—¶å€™ç”¨è¾ƒå°çš„ç¬¬ä¸€ä¸ªé˜ˆå€¼ç”¨äºå°†è¿™äº›é—´æ–­çš„è¾¹ç¼˜è¿æ¥èµ·æ¥ã€‚ :param img: å›¾ç‰‡æ•°æ® :param name: å‘½åæ ‡å¿— :return: &quot;&quot;&quot; # å…ˆè¿›è¡Œé«˜æ–¯å¹³æ»‘ gaussImage = cv2.GaussianBlur(img, (3, 3), 0) # è¾¹ç¼˜æ£€æµ‹ï¼Œæœ€å¤§é˜ˆå€¼ä¸º150ï¼Œæœ€å°é˜ˆå€¼ä¸º50 # Canny æ¨èçš„ é«˜:ä½ é˜ˆå€¼æ¯”åœ¨ 2:1 åˆ°3:1ä¹‹é—´ã€‚ cannyImage = cv2.Canny(gaussImage, 50, 150) cv2.imshow(&quot;canny-%s&quot; % name, cannyImage)# å½©è‰²å›¾åƒè¿›è¡ŒRobertè¾¹ç¼˜æ£€æµ‹RobertImage(img, &#x27;rgb&#x27;)# ç°åº¦å›¾åƒè¿›è¡Œrobertè¾¹ç¼˜æ£€æµ‹grayImage = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)RobertImage(grayImage, &#x27;gray&#x27;)# å½©è‰²å›¾åƒè¿›è¡Œsobelè¾¹ç¼˜æ£€æµ‹sobelImage(img, &#x27;rgb&#x27;)# ç°åº¦å›¾åƒè¿›è¡Œsobelè¾¹ç¼˜æ£€æµ‹grayImage = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)sobelImage(grayImage, &#x27;gray&#x27;)# å½©è‰²å›¾åƒè¿›è¡Œlaplaceè¾¹ç¼˜æ£€æµ‹LaplaceImage(img, &#x27;rgb&#x27;)# ç°åº¦å›¾åƒè¿›è¡Œlaplaceè¾¹ç¼˜æ£€æµ‹grayImage = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)LaplaceImage(grayImage, &#x27;gray&#x27;)# å½©è‰²å›¾åƒè¿›è¡ŒLoGè¾¹ç¼˜æ£€æµ‹LoG(img, &#x27;rgb&#x27;)# ç°åº¦å›¾åƒè¿›è¡ŒLoGè¾¹ç¼˜æ£€æµ‹grayImage = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)LoG(grayImage, &#x27;gray&#x27;)# å½©è‰²å›¾åƒè¿›è¡Œcannyè¾¹ç¼˜æ£€æµ‹CannyImage(img, &#x27;rgb&#x27;)# ç°åº¦å›¾åƒè¿›è¡Œcannyè¾¹ç¼˜æ£€æµ‹grayImage = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)CannyImage(grayImage, &#x27;gray&#x27;)cv2.waitKey(0) sobel äº§ç”Ÿçš„è¾¹ç¼˜æœ‰å¼ºå¼±ï¼ŒæŠ—å™ªæ€§å¥½ laplace å¯¹è¾¹ç¼˜æ•æ„Ÿï¼Œå¯èƒ½æœ‰äº›æ˜¯å™ªå£°çš„è¾¹ç¼˜ï¼Œä¹Ÿè¢«ç®—è¿›æ¥äº† canny äº§ç”Ÿçš„è¾¹ç¼˜å¾ˆç»†ï¼Œå¯èƒ½å°±ä¸€ä¸ªåƒç´ é‚£ä¹ˆç»†ï¼Œæ²¡æœ‰å¼ºå¼±ä¹‹åˆ†ã€‚","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"https://aicc-cn.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"https://aicc-cn.github.io/tags/OpenCV/"}],"author":"Seven"},{"title":"ã€å…­ã€‘ç›´æ–¹å›¾","slug":"2019-03-06-cv-image_hist","date":"2019-03-21T16:00:00.000Z","updated":"2022-03-25T13:51:15.610Z","comments":true,"path":"2019/03/22/2019-03-06-cv-image_hist/","link":"","permalink":"https://aicc-cn.github.io/2019/03/22/2019-03-06-cv-image_hist/","excerpt":"","text":"å›¾åƒç›´æ–¹å›¾ é€šè¿‡ç°åº¦ç›´æ–¹å›¾çœ‹åˆ°å›¾åƒçš„ç…§æ˜æ•ˆæœ ä»£ç å®ä¾‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157#!/usr/bin/env python# -*- coding: utf-8 -*-# @Time : 2019/3/9 21:28# @Author : Seven# @File : HistDemo.py# @Software: PyCharm# function : å›¾åƒç›´æ–¹å›¾import cv2import matplotlib.pyplot as pltimport numpy as npdef GrayHist(img): &quot;&quot;&quot; calcHist(images, channels, mask, histSize, ranges, hist=None, accumulate=None) images â€” æºçŸ©é˜µæŒ‡é’ˆï¼ˆè¾“å…¥å›¾åƒï¼Œå¯ä»¥å¤šå¼ ï¼‰ã€‚ ä½†éƒ½åº”å½“æœ‰åŒæ ·çš„æ·±åº¦ï¼ˆdepthï¼‰, æ¯”å¦‚CV_8U æˆ–è€… CV_32F ï¼Œ å’ŒåŒæ ·çš„å¤§å°ã€‚æ¯å¼ å›¾ç‰‡å¯ä»¥æ‹¥æœ‰ä»»æ„æ•°é‡çš„é€šé“ã€‚ channels â€” é€šé“çš„æ•°é‡ï¼Œæ¯ä¸ªé€šé“éƒ½æœ‰ç¼–å·ï¼Œç°åº¦å›¾ä¸ºä¸€é€šé“ï¼Œå³channel[1]=0;å¯¹åº”ç€ä¸€ç»´ã€‚ BGRä¸‰é€šé“å›¾åƒç¼–å·ä¸ºchannels[3]=&#123;0,1,2&#125;;åˆ†åˆ«å¯¹åº”ç€ç¬¬ä¸€ç»´ï¼Œç¬¬äºŒç»´ï¼Œç¬¬ä¸‰ç»´ã€‚ mask â€” æ©ç å›¾åƒï¼šè¦å¯¹å›¾åƒå¤„ç†æ—¶ï¼Œå…ˆçœ‹çœ‹è¿™ä¸ªåƒç´ å¯¹åº”çš„æ©ç ä½æ˜¯å¦ä¸ºå±è”½ï¼Œå¦‚æœä¸ºå±è”½ï¼Œå°±æ˜¯è¯´è¯¥åƒç´ ä¸å¤„ç†ï¼ˆæ©ç å€¼ä¸º0çš„åƒç´ éƒ½å°†è¢«å¿½ç•¥ï¼‰ hist â€” è¿”å›çš„ç›´æ–¹å›¾ã€‚ histSize â€” ç›´æ–¹å›¾æ¯ä¸€ç»´çš„æ¡ç›®ä¸ªæ•°çš„æ•°ç»„ï¼Œç°åº¦å›¾ä¸€ç»´æœ‰256ä¸ªæ¡ç›®ã€‚ ranges â€” æ¯ä¸€ç»´çš„åƒç´ å€¼çš„èŒƒå›´ï¼Œä¼ é€’æ•°ç»„ï¼Œä¸ç»´æ•°ç›¸å¯¹åº”ï¼Œç°åº¦å›¾ä¸€ç»´åƒç´ å€¼èŒƒå›´ä¸º0~255ã€‚ :param name: å‘½åæ ‡å¿— :param img: å›¾ç‰‡æ•°æ® :return: &quot;&quot;&quot; img = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY) hist = cv2.calcHist([img], [0], None, [256], [0.0, 255.0]) plt.plot(hist) plt.xlim([0, 256]) plt.show()def colorHist(img): # é¢œè‰²ç›´æ–¹å›¾ channels = cv2.split(img) colors = (&#x27;b&#x27;, &#x27;g&#x27;, &#x27;r&#x27;) for (chan, color) in zip(channels, colors): hist = cv2.calcHist([chan], [0], None, [256], [0, 256]) plt.plot(hist, color=color) plt.xlim([0, 256]) plt.show()def channelsHist(img): b, g, r = cv2.split(img) def calcAndDrawHist(image, color): hist = cv2.calcHist([image], [0], None, [256], [0.0, 255.0]) minVal, maxVal, minLoc, maxLoc = cv2.minMaxLoc(hist) histImg = np.zeros([256, 256, 3], np.uint8) hpt = int(0.9 * 256); for h in range(256): intensity = int(hist[h] * hpt / maxVal) cv2.line(histImg, (h, 256), (h, 256 - intensity), color) return histImg; histImgB = calcAndDrawHist(b, [255, 0, 0]) histImgG = calcAndDrawHist(g, [0, 255, 0]) histImgR = calcAndDrawHist(r, [0, 0, 255]) plt.figure(figsize=(8, 6)) plt.subplot(221) plt.imshow(img[:, :, ::-1]); plt.title(&#x27;origin&#x27;) plt.subplot(222) plt.imshow(histImgB[:, :, ::-1]); plt.title(&#x27;histImgB&#x27;) plt.subplot(223) plt.imshow(histImgG[:, :, ::-1]); plt.title(&#x27;histImgG&#x27;) plt.subplot(224) plt.imshow(histImgR[:, :, ::-1]); plt.title(&#x27;histImgR&#x27;) plt.tight_layout() plt.show()def grayEqualize(img): img = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY) equ = cv2.equalizeHist(img) # ä¸¤ä¸ªå›¾ç‰‡çš„åƒç´ åˆ†å¸ƒè¿æ¥åœ¨ä¸€èµ·ï¼Œæ‹æˆä¸€ç»´æ•°ç»„ res = np.hstack((img, equ)) plt.figure(figsize=(8, 6)) ax1 = plt.subplot2grid((2, 2), (0, 0)) ax1.imshow(img, cmap=plt.cm.gray) ax1.set_title(&#x27;orignal image&#x27;) ax1 = plt.subplot2grid((2, 2), (0, 1)) ax1.imshow(equ, cmap=plt.cm.gray) ax1.set_title(&#x27;equalization&#x27;) ax1 = plt.subplot2grid((2, 2), (1, 0), colspan=3, rowspan=1) ax1.imshow(res, cmap=plt.cm.gray) ax1.set_title(&#x27;horizational&#x27;) plt.tight_layout() plt.show()def colorEqualize(img): def hisEqulColor(img): ycrcb = cv2.cvtColor(img, cv2.COLOR_BGR2YCR_CB) channels = cv2.split(ycrcb) print(len(channels)) cv2.equalizeHist(channels[0], channels[0]) cv2.merge(channels, ycrcb) cv2.cvtColor(ycrcb, cv2.COLOR_YCR_CB2BGR, img) return img equ = hisEqulColor(img) h_stack_img = np.hstack((img, equ)) plt.figure(figsize=(10, 8)) ax1 = plt.subplot2grid((2, 2), (0, 0)) ax1.imshow(img[:, :, ::-1]) ax1.set_title(&#x27;orignal image&#x27;) ax1 = plt.subplot2grid((2, 2), (0, 1)) ax1.imshow(equ[:, :, ::-1]) ax1.set_title(&#x27;equalization&#x27;) ax1 = plt.subplot2grid((2, 2), (1, 0), colspan=3, rowspan=1) ax1.imshow(h_stack_img[:, :, ::-1]) ax1.set_title(&#x27;horizational&#x27;) plt.tight_layout() plt.show()plt.figure()plt.title(&quot;Grayscale Histogram&quot;)plt.xlabel(&quot;Bins&quot;)plt.ylabel(&quot;# of Pixels&quot;)# ç°åº¦ç›´æ–¹å›¾img = cv2.imread(&#x27;lena.jpg&#x27;)GrayHist(img)# é¢œè‰²ç›´æ–¹å›¾colorHist(img)# å¤šé€šé“ç›´æ–¹å›¾channelsHist(img)# ç°åº¦ç›´æ–¹å›¾å‡è¡¡grayEqualize(img)# å½©è‰²å›¾åƒç›´æ–¹å›¾å‡è¡¡colorEqualize(img) ç°åº¦ç›´æ–¹å›¾ é¢œè‰²ç›´æ–¹å›¾ å¤šé€šé“ç›´æ–¹å›¾ ç°åº¦ç›´æ–¹å›¾å‡è¡¡ å½©è‰²å›¾åƒç›´æ–¹å›¾å‡è¡¡","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"https://aicc-cn.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"https://aicc-cn.github.io/tags/OpenCV/"}],"author":"Seven"},{"title":"ã€å››ã€‘å›¾åƒæ»¤æ³¢","slug":"2019-03-04-cv-image_filter","date":"2019-03-21T16:00:00.000Z","updated":"2022-03-25T13:51:07.339Z","comments":true,"path":"2019/03/22/2019-03-04-cv-image_filter/","link":"","permalink":"https://aicc-cn.github.io/2019/03/22/2019-03-04-cv-image_filter/","excerpt":"","text":"å›¾åƒæ»¤æ³¢åŸºæœ¬åŸç† å›¾åƒä¿¡æ¯åœ¨é‡‡é›†è¿‡ç¨‹ä¸­å¾€å¾€å—åˆ°å„ç§å™ªå£°æºçš„å¹²æ‰°ï¼Œè¿™äº›å™ªå£°åœ¨å›¾åƒä¸Šçš„å¸¸å¸¸è¡¨ç°ä¸ºä¸€äº›å­¤ç«‹åƒç´ ç‚¹ï¼Œè¿™å¯ç†è§£ä¸ºåƒç´ çš„ç°åº¦æ˜¯ç©ºé—´ç›¸å…³çš„ï¼Œå³å™ªå£°ç‚¹åƒç´ ç°åº¦ä¸å®ƒä»¬ä¸´è¿‘åƒç´ çš„ç°åº¦æœ‰ç€æ˜¾è‘—ä¸åŒã€‚é€šå¸¸ï¼Œä¸€èˆ¬çš„å‰ç½®å›¾åƒå¤„ç†åçš„ä¿¡æ¯ä»ç„¶å¸¦æœ‰åç»­æ‰€ä¸å¸Œæœ›å¤¹å¸¦çš„å­¤ç«‹åƒç´ ç‚¹ï¼Œè¿™ç§å¹²æ‰°æˆ–å­¤ç«‹åƒç´ ç‚¹å¦‚ä¸ç»è¿‡æ»¤æ³¢å¤„ç†ï¼Œä¼šå¯¹ä»¥åçš„å›¾åƒåŒºåŸŸåˆ†å‰²ã€åˆ†æå’Œåˆ¤æ–­å¸¦æ¥å½±å“ã€‚ åŸºæœ¬å›¾åƒé¢„å¤„ç†æ»¤æ³¢æ–¹æ³•å›¾åƒæ»¤æ³¢ä¸å·ç§¯ã€å…¬å¼å®šä¹‰ã€‘ ä¸1ç»´ä¿¡å·æ»¤æ³¢ç±»ä¼¼ï¼Œå›¾åƒæ»¤æ³¢ç”±å·ç§¯å®šä¹‰ã€‚ åœ¨å›¾åƒä¸­ï¼Œ ä»¥æ¨¡æ¿å½¢å¼å®šä¹‰ã€‚ æ³¨æ„ï¼šå¦‚æœæ»¤æ³¢å™¨æ˜¯å¯¹ç§°çš„ï¼Œé‚£ä¹ˆä¸¤ä¸ªå…¬å¼å°±æ˜¯ç­‰ä»·çš„ã€‚ â€‹ $f(x, y)$ä¸ºå›¾ç‰‡åŸå§‹æ•°æ®ã€$g(x, y)$ä¸ºå·ç§¯æ ¸ã€‚ ã€è®¡ç®—æ–¹å¼ã€‘ä¸¾ä¸ªæ —å­ï¼š å‡è®¾ä¸€å¼ å›¾åƒæœ‰ 5x5 ä¸ªåƒç´ ï¼Œ1 ä»£è¡¨ç™½ï¼Œ0 ä»£è¡¨é»‘ï¼Œè¿™å¹…å›¾åƒè¢«è§†ä¸º 5x5 çš„å•è‰²å›¾åƒã€‚ç°åœ¨ç”¨ä¸€ä¸ªç”±éšæœºåœ° 0 å’Œ 1 ç»„æˆçš„ 3x3 çŸ©é˜µå»å’Œå›¾åƒä¸­çš„å­åŒºåŸŸåšHadamardä¹˜ç§¯ï¼Œæ¯æ¬¡è¿­ä»£ç§»åŠ¨ä¸€ä¸ªåƒç´ ï¼Œè¿™æ ·è¯¥ä¹˜æ³•ä¼šå¾—åˆ°ä¸€ä¸ªæ–°çš„ 3x3 çš„çŸ©é˜µã€‚ä¸‹é¢çš„åŠ¨å›¾å±•ç¤ºäº†è¿™ä¸ªè¿‡ç¨‹ã€‚ ç›´è§‚ä¸Šæ¥ç†è§£ï¼š ç”¨ä¸€ä¸ªå°çš„æƒé‡çŸ©é˜µå»è¦†ç›–è¾“å…¥æ•°æ®ï¼Œå¯¹åº”ä½ç½®å…ƒç´ åŠ æƒç›¸ä¹˜ï¼Œå…¶å’Œä½œä¸ºç»“æœçš„ä¸€ä¸ªåƒç´ ç‚¹ã€‚ è¿™ä¸ªæƒé‡åœ¨è¾“å…¥æ•°æ®ä¸Šæ»‘åŠ¨ï¼Œå½¢æˆä¸€å¼ æ–°çš„çŸ©é˜µ è¿™ä¸ªæƒé‡çŸ©é˜µå°±è¢«ç§°ä¸ºå·ç§¯æ ¸ï¼ˆconvolution kernelï¼‰ å…¶è¦†ç›–çš„ä½ç½®ç§°ä¸ºæ„Ÿå—é‡ï¼ˆreceptive fileld ï¼‰ ç”Ÿæˆçš„æ–°çŸ©é˜µå«åšç‰¹å¾å›¾ï¼ˆfeature mapï¼‰ åˆ†è§£å¼€æ¥ï¼Œå°±å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å…¶ä¸­ï¼š æ»‘åŠ¨çš„åƒç´ æ•°é‡å°±å«åšæ­¥é•¿ï¼ˆstrideï¼‰ï¼Œæ­¥é•¿ä¸º1ï¼Œè¡¨ç¤ºè·³è¿‡1ä¸ªåƒç´ ï¼Œæ­¥é•¿ä¸º2ï¼Œå°±è¡¨ç¤ºè·³è¿‡2ä¸ªåƒç´ ï¼Œä»¥æ­¤ç±»æ¨ ä»¥å·ç§¯æ ¸çš„è¾¹è¿˜æ˜¯ä¸­å¿ƒç‚¹ä½œä¸ºå¼€å§‹&#x2F;ç»“æŸçš„ä¾æ®ï¼Œå†³å®šäº†å·ç§¯çš„è¡¥é½ï¼ˆpaddingï¼‰æ–¹å¼ã€‚å‰é¢æˆ‘ä»¬æ‰€ä¸¾çš„æ —å­æ˜¯validæ–¹å¼ï¼Œè€Œsameæ–¹å¼åˆ™ä¼šåœ¨å›¾åƒçš„è¾¹ç¼˜ç”¨0è¡¥é½ï¼Œå¦‚å°†å‰é¢çš„validæ”¹ä¸ºsameæ–¹å¼ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š å…¶é‡‡æ ·æ–¹å¼å¯¹åº”å˜æ¢ä¸ºï¼š æˆ‘ä»¬å‰é¢æ‰€æåˆ°çš„è¾“å…¥å›¾åƒéƒ½æ˜¯ç°è‰²çš„ï¼Œåªæœ‰ä¸€ä¸ªé€šé“ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸€èˆ¬ä¼šé‡åˆ°è¾“å…¥é€šé“ä¸åªæœ‰ä¸€ä¸ªï¼Œé‚£ä¹ˆå·ç§¯æ ¸æ˜¯ä¸‰é˜¶çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ‰€æœ‰çš„é€šé“çš„ç»“æœåšç´¯åŠ ã€‚ å½“ç„¶ï¼Œæœ€åï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªæœ¯è¯­ï¼šâ€œåç½®ï¼ˆbiasï¼‰â€ï¼Œæ¯ä¸ªè¾“å‡ºæ»¤æ³¢å™¨éƒ½æœ‰ä¸€ä¸ªåç½®é¡¹ï¼Œåç½®è¢«æ·»åŠ åˆ°è¾“å‡ºé€šé“äº§ç”Ÿæœ€ç»ˆè¾“å‡ºé€šé“ã€‚ å›¾åƒå»å™ªã€å¹³å‡æ»¤æ³¢ã€‘ åœ¨ä¸€ä¸ªå°åŒºåŸŸå†…ï¼ˆé€šå¸¸æ˜¯3*3ï¼‰åƒç´ å€¼å¹³å‡ã€‚ æ•°å­¦å…¬å¼å®šä¹‰ è¯´æ˜ï¼šå¦‚æœåœ¨3*3çš„ä¸€ä¸ªåŒºåŸŸå†…ï¼Œå¦‚æœå­˜åœ¨5ä¸ªæœ‰æ•ˆåƒç´ å€¼ï¼Œé‚£ä¹ˆæ•´ä½“å°±é™¤ä»¥5ï¼Œä»¥æ­¤ç±»æ¨ã€‚ ã€åŠ æƒå¹³å‡æ»¤æ³¢ã€‘ åœ¨ä¸€ä¸ªå°åŒºåŸŸå†…ï¼ˆé€šå¸¸æ˜¯3*3ï¼‰åƒç´ å€¼åŠ æƒå¹³å‡ã€‚ æ•°å­¦å…¬å¼å®šä¹‰ åœ¨è¿›è¡ŒåŸºæœ¬å¹³å‡æ»¤æ³¢å‰ï¼Œå…ˆæŠŠåŸå§‹æ•°æ®ä¹˜ä»¥ä¸€ä¸ªæŒ‡å®šçš„æƒé‡å€¼ï¼Œç„¶åå†è¿›è¡Œå¹³å‡ã€‚ æ™®é€šå·ç§¯æ ¸ é«˜æ–¯å·ç§¯æ ¸ æƒé‡çš„åˆ†å¸ƒç¬¦åˆé«˜æ–¯åˆ†å¸ƒï¼Œæ‰€ä»¥å«é«˜æ–¯å·ç§¯æ ¸ã€‚ ã€ä¸­å€¼æ»¤æ³¢ã€‘ å°†æ»¤æ³¢æ¨¡æ¿ï¼ˆå«æœ‰è‹¥å¹²ä¸ªç‚¹çš„æ»‘åŠ¨çª—å£ï¼‰åœ¨å›¾åƒä¸­æ¼«æ¸¸ï¼Œå¹¶å°†æ¨¡æ¿ä¸­å¿ƒä¸å›¾ä¸­æŸä¸ªåƒç´ ä½ç½®é‡åˆ è¯»å–æ¨¡æ¿ä¸­å„å¯¹åº”åƒç´ çš„ç°åº¦å€¼ï¼› å°†è¿™äº›ç°åº¦å€¼ä»å°åˆ°å¤§æ’åˆ—ï¼› å–è¿™ä¸€åˆ—æ•°æ®çš„ä¸­é—´æ•°æ®ï¼Œå°†å…¶èµ‹ç»™å¯¹åº”æ¨¡æ¿ä¸­å¿ƒä½ç½®çš„åƒç´ ã€‚å¦‚æœçª—å£ä¸­æœ‰å¥‡æ•°ä¸ªå…ƒç´ ï¼Œä¸­å€¼å–å…ƒç´ æŒ‰ç°åº¦å€¼å¤§å°æ’åºåçš„ä¸­é—´å…ƒç´ ç°åº¦å€¼ã€‚å¦‚æœçª—å£ä¸­æœ‰å¶æ•°ä¸ªå…ƒç´ ï¼Œä¸­å€¼å–å…ƒç´ æŒ‰ç°åº¦å€¼å¤§å°æ’åºåï¼Œä¸­é—´ä¸¤ä¸ªå…ƒç´ ç°åº¦çš„å¹³å‡å€¼ã€‚å› ä¸ºå›¾åƒä¸ºäºŒç»´ä¿¡å·ï¼Œä¸­å€¼æ»¤æ³¢çš„çª—å£å½¢çŠ¶å’Œå°ºå¯¸å¯¹æ»¤æ³¢å™¨æ•ˆæœå½±å“å¾ˆå¤§ï¼Œä¸åŒå›¾åƒå†…å®¹å’Œä¸åŒåº”ç”¨è¦æ±‚å¾€å¾€é€‰ç”¨ä¸åŒçš„çª—å£å½¢çŠ¶å’Œå°ºå¯¸ã€‚ ç¤ºä¾‹ å¸¸ç”¨é€‰å–å½¢å¼ 3*3 5*5 ä¸­å€¼æ»¤æ³¢å¯¹æ¤’ç›å™ªå£°æœ‰æ•ˆã€‚ æ•°å­¦å½¢æ€å­¦æ»¤æ³¢ã€æ¦‚è¿°ã€‘ å½¢æ€å­¦ï¼ˆmorphologyï¼‰ä¸€è¯é€šå¸¸è¡¨ç¤ºç”Ÿç‰©å­¦çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œè¯¥åˆ†æ”¯ä¸»è¦ç ”ç©¶åŠ¨æ¤ç‰©çš„å½¢æ€å’Œç»“æ„ã€‚è€Œæˆ‘ä»¬å›¾åƒå¤„ç†ä¸­æŒ‡çš„å½¢æ€å­¦ï¼Œå¾€å¾€è¡¨ç¤ºçš„æ˜¯æ•°å­¦å½¢æ€å­¦ã€‚ æ•°å­¦å½¢æ€å­¦ï¼ˆMathematical morphologyï¼‰ æ˜¯ä¸€é—¨å»ºç«‹åœ¨æ ¼è®ºå’Œæ‹“æ‰‘å­¦åŸºç¡€ä¹‹ä¸Šçš„å›¾åƒåˆ†æå­¦ç§‘ï¼Œæ˜¯æ•°å­¦å½¢æ€å­¦å›¾åƒå¤„ç†çš„åŸºæœ¬ç†è®ºã€‚å…¶åŸºæœ¬çš„è¿ç®—åŒ…æ‹¬ï¼šäºŒå€¼è…èš€å’Œè†¨èƒ€ã€äºŒå€¼å¼€é—­è¿ç®—ã€éª¨æ¶æŠ½å–ã€æé™è…èš€ã€å‡»ä¸­å‡»ä¸ä¸­å˜æ¢ã€å½¢æ€å­¦æ¢¯åº¦ã€Top-hatå˜æ¢ã€é¢—ç²’åˆ†æã€æµåŸŸå˜æ¢ã€ç°å€¼è…èš€å’Œè†¨èƒ€ã€ç°å€¼å¼€é—­è¿ç®—ã€ç°å€¼å½¢æ€å­¦æ¢¯åº¦ç­‰ã€‚ ã€è†¨èƒ€å’Œè…èš€ã€‘ æŒ‰æ•°å­¦æ–¹é¢æ¥è¯´ï¼Œè†¨èƒ€æˆ–è€…è…èš€æ“ä½œå°±æ˜¯å°†å›¾åƒï¼ˆæˆ–å›¾åƒçš„ä¸€éƒ¨åˆ†åŒºåŸŸï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºAï¼‰ä¸æ ¸ï¼ˆæˆ‘ä»¬ç§°ä¹‹ä¸ºBï¼‰è¿›è¡Œå·ç§¯ã€‚ æ ¸å¯ä»¥æ˜¯ä»»ä½•çš„å½¢çŠ¶å’Œå¤§å°ï¼Œå®ƒæ‹¥æœ‰ä¸€ä¸ªå•ç‹¬å®šä¹‰å‡ºæ¥çš„å‚è€ƒç‚¹ï¼Œæˆ‘ä»¬ç§°å…¶ä¸ºé”šç‚¹ï¼ˆanchorpointï¼‰ã€‚å¤šæ•°æƒ…å†µä¸‹ï¼Œæ ¸æ˜¯ä¸€ä¸ªå°çš„ä¸­é—´å¸¦æœ‰å‚è€ƒç‚¹å’Œå®å¿ƒæ­£æ–¹å½¢æˆ–è€…åœ†ç›˜ï¼Œå…¶å®ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ ¸è§†ä¸ºæ¨¡æ¿æˆ–è€…æ©ç ã€‚ è†¨èƒ€ è†¨èƒ€å°±æ˜¯æ±‚å±€éƒ¨æœ€å¤§å€¼çš„æ“ä½œï¼Œæ ¸Bä¸å›¾å½¢å·ç§¯ï¼Œå³è®¡ç®—æ ¸Bè¦†ç›–çš„åŒºåŸŸçš„åƒç´ ç‚¹çš„æœ€å¤§å€¼ï¼Œå¹¶æŠŠè¿™ä¸ªæœ€å¤§å€¼èµ‹å€¼ç»™å‚è€ƒç‚¹æŒ‡å®šçš„åƒç´ ã€‚è¿™æ ·å°±ä¼šä½¿å›¾åƒä¸­çš„é«˜äº®åŒºåŸŸé€æ¸å¢é•¿ã€‚ æ•°å­¦å®šä¹‰ $A\\oplus B$è¡¨ç¤ºé›†åˆAç”¨ç»“æ„å…ƒç´ Bè†¨èƒ€ã€‚ ç¤ºä¾‹ è…èš€ è…èš€å°±æ˜¯è†¨èƒ€çš„ç›¸åæ“ä½œï¼Œè…èš€å°±æ˜¯æ±‚å±€éƒ¨æœ€å°å€¼çš„æ“ä½œã€‚ æ•°å­¦å®šä¹‰ $A\\ominus B$è¡¨ç¤ºé›†åˆAç”¨ç»“æ„å…ƒç´ Bè…èš€ã€‚ ç¤ºä¾‹ ã€å¼€é—­è¿ç®—ã€‘ è†¨èƒ€å’Œè…èš€å¹¶ä¸äº’ä¸ºé€†è¿ç®—ï¼ŒäºŒè€…çº§è”ä½¿ç”¨å¯ç”Ÿæˆæ–°çš„å½¢æ€å­¦è¿ç®—ã€‚ å¼€è¿ç®— å…ˆè…èš€åè†¨èƒ€ é—­è¿ç®— å…ˆè†¨èƒ€åè…èš€ å…ˆå¼€åé—­ å¯æœ‰æ•ˆçš„å»é™¤å™ªå£°ã€‚ æ»¤æ³¢æ€»ç»“ æ»¤æ³¢å³å·ç§¯ï¼Œç”±é€ç‚¹ä¹˜ç§¯åç´¯åŠ å¾—åˆ° å¹³æ»‘æ»¤æ³¢åŒ…æ‹¬å¹³å‡æ»¤æ³¢ã€é«˜æ–¯æ»¤æ³¢ã€ä¸­å€¼æ»¤æ³¢ç­‰æ–¹æ³•ï¼Œå…¶ä¸­é«˜æ–¯æ»¤æ³¢æœ€ä¸ºå¸¸ç”¨ æ•°å­¦å½¢æ€å­¦æ»¤æ³¢åŸºäºè…èš€ä¸è†¨èƒ€ä¸¤ä¸ªåŸºæœ¬æ“ä½œ ä»£ç æ¼”ç¤º123456789101112131415161718192021222324252627282930import cv2# åŠ è½½å›¾ç‰‡image = cv2.imread(&#x27;lena.jpg&#x27;)img = cv2.pyrDown(image)cv2.imshow(&quot;source image&quot;, img)# é«˜æ–¯å¹³æ»‘æ»¤æ³¢gaussImage = cv2.GaussianBlur(img, (5, 5), 0)cv2.imshow(&quot;gauss image&quot;, gaussImage)# ä¸­å€¼æ»¤æ³¢medianImage = cv2.medianBlur(img, 5)cv2.imshow(&quot;median image&quot;, medianImage)# å½¢æ€å­¦æ»¤æ³¢kernel = cv2.getStructuringElement(cv2.MORPH_RECT, (5, 5))# è…èš€å›¾åƒeroded = cv2.erode(img, kernel)cv2.imshow(&quot;Eroded Image&quot;, eroded)# è†¨èƒ€å›¾åƒdilated = cv2.dilate(img, kernel)cv2.imshow(&quot;dilated Image&quot;, dilated)# å½¢æ€å­¦æ»¤æ³¢-å¼€è¿ç®—morphImage_open = cv2.morphologyEx(img, cv2.MORPH_OPEN, kernel)cv2.imshow(&quot;image-open&quot;, morphImage_open)# å½¢æ€å­¦æ»¤æ³¢-é—­è¿ç®—morphImage_close = cv2.morphologyEx(img, cv2.MORPH_CLOSE, kernel)cv2.imshow(&quot;image-close&quot;, morphImage_close)# å½¢æ€å­¦æ»¤æ³¢-å…ˆå¼€åé—­è¿ç®—morphImage_open_close = cv2.morphologyEx(morphImage_open, cv2.MORPH_CLOSE, kernel)cv2.imshow(&quot;image-open-close&quot;, morphImage_open_close)cv2.waitKey(0)","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"https://aicc-cn.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"https://aicc-cn.github.io/tags/OpenCV/"}],"author":"Seven"},{"title":"ã€ä¸ƒã€‘å›¾åƒç‰¹å¾æè¿°","slug":"2019-03-07-cv-image_description","date":"2019-03-21T16:00:00.000Z","updated":"2022-03-25T13:51:21.324Z","comments":true,"path":"2019/03/22/2019-03-07-cv-image_description/","link":"","permalink":"https://aicc-cn.github.io/2019/03/22/2019-03-07-cv-image_description/","excerpt":"","text":"ç®€å•æè¿°ã€ç®€å•æè¿°ç¬¦ã€‘ åŒºåŸŸé¢ç§¯ï¼šåŒºåŸŸåŒ…å«çš„åƒç´ æ•° åŒºåŸŸé‡å¿ƒï¼š æ³¨æ„ï¼šåŒºåŸŸé‡å¿ƒå¯èƒ½ä¸æ˜¯æ•´æ•°ã€‚ ã€å½¢çŠ¶æè¿°ç¬¦ã€‘ å½¢çŠ¶å‚æ•° æ³¨æ„ï¼šå½¢çŠ¶ä¸ºåœ†å½¢æ—¶ï¼šF&#x3D;1ï¼›å½¢çŠ¶ä¸ºå…¶ä»–æ—¶ï¼ŒF&gt;1 åå¿ƒç‡ï¼šç­‰æ•ˆæ¤­åœ†å®½é«˜æ¯”ã€‚ æ¬§æ‹‰æ•°ï¼š$E &#x3D; C-H$ åœ†å½¢æ€§ï¼š ä¸€èˆ¬åŒ–æè¿° æœ€å°åŒ…å›´çŸ©å½¢ï¼ˆMERï¼‰ æ–¹å‘å’Œç¦»å¿ƒç‡ ä¸å˜çŸ© é¦–å…ˆå®šä¹‰å½’ä¸€åŒ–çš„ä¸­å¿ƒçŸ© å›¾åƒf(x,y)çš„p+qé˜¶çŸ©å®šä¹‰ä¸ºï¼š f(x,y)çš„p+qé˜¶ä¸­å¿ƒçŸ©å®šä¹‰ä¸ºï¼š å…¶ä¸­ï¼š å³å‰é¢å®šä¹‰çš„é‡å¿ƒã€‚ f(x,y)çš„å½’ä¸€åŒ–ä¸­å¿ƒçŸ©å®šä¹‰ä¸ºï¼š ç„¶åå®šä¹‰ä¸å˜çŸ© å¸¸ç”¨çš„æœ‰ä¸ƒä¸ªä¸å˜çŸ©ï¼Œå³å¯¹å¹³ç§»ã€æ—‹è½¬å’Œå°ºåº¦å˜åŒ–ä¿æŒä¸å˜ã€‚è¿™äº›å¯ç”±å½’ä¸€åŒ–çš„äºŒé˜¶å’Œä¸‰é˜¶ä¸­å¿ƒçŸ©å¾—åˆ°ï¼š è®¡ç®—ç¤ºä¾‹ å›¾åƒç‰¹å¾æè¿°æ€»ç»“ åŒºåŸŸçš„åŸºæœ¬ç‰¹å¾åŒ…æ‹¬é¢ç§¯ã€è´¨å¿ƒã€åœ†å½¢æ€§ç­‰. æœ€å°åŒ…å›´çŸ©å½¢å’Œå¤šè¾¹å½¢æ‹Ÿåˆèƒ½æœ‰æ•ˆçš„æè¿°åŒºåŸŸå½¢çŠ¶ ä¸ƒä¸ªä¸å˜çŸ©ç‰¹å¾å¯ä»¥æœ‰æ•ˆçš„åº¦é‡åŒºåŸŸå½¢çŠ¶ï¼Œå¯¹å¹³ç§»ã€æ—‹è½¬å’Œæ¯”ä¾‹æ”¾ç¼©å˜æ¢ä¸æ•æ„Ÿ ä»£ç å®ä¾‹1234567891011121314151617181920212223242526272829303132333435363738394041#!/usr/bin/env python# -*- coding: utf-8 -*-# @Time : 2019/1/16 16:39# @Author : Seven# @File : featureDescription.py# @Software: PyCharmimport cv2# åŠ è½½å›¾ç‰‡img = cv2.imread(&#x27;rice.png&#x27;)cv2.imshow(&#x27;source&#x27;, img)# è½¬æ¢ä¸ºç°åº¦å›¾grayImage = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)# å½¢æ€å­¦å¤„ç†--äº”æ¬¡å¼€è¿ç®—kernel = cv2.getStructuringElement(cv2.MORPH_RECT, (5, 5))morphImage_open = cv2.morphologyEx(grayImage, cv2.MORPH_OPEN, kernel, iterations=5)# åŸå›¾å‡å»èƒŒæ™¯å›¾riceImage = grayImage - morphImage_open# å¤§æ´¥ç®—æ³•é˜ˆå€¼åŒ–thresholdImage = cv2.threshold(riceImage, 0, 255, cv2.THRESH_BINARY + cv2.THRESH_OTSU)# å›¾åƒåˆ†å‰²partition = cv2.findContours(thresholdImage[1], cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)count = 0for i in partition[1]: area = cv2.contourArea(i) # print(&quot;area:&quot;, area) if area &lt;= 10: continue else: count += 1 print(&quot;blob:&#123;&#125;:&#123;&#125;&quot;.format(count, area)) # å¾—åˆ°ç±³ç²’çš„åæ ‡--xã€yã€wã€h rect = cv2.boundingRect(i) # åœ¨imgä¸­ç”»å‡ºæœ€å¤§é¢ç§¯ç±³ç²’ cv2.drawContours(img, [i], -1, (255, 255, 0), 1) cv2.rectangle(img, (rect[0], rect[1]), (rect[0]+rect[2], rect[1]+rect[3]), (0, 0, 255), 1) cv2.putText(img, str(count), (rect[0], rect[1]), cv2.FONT_HERSHEY_PLAIN, 0.5, (0, 255, 0))print(&quot;ç±³ç²’æ•°é‡ï¼š%s&quot; % count)cv2.imshow(&quot;area&quot;, img)cv2.waitKey(0)","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"https://aicc-cn.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"https://aicc-cn.github.io/tags/OpenCV/"}],"author":"Seven"},{"title":"ã€ä¹ã€‘ç›´çº¿æ£€æµ‹","slug":"2019-03-09-cv-image_hough","date":"2019-03-21T16:00:00.000Z","updated":"2022-03-25T13:51:33.474Z","comments":true,"path":"2019/03/22/2019-03-09-cv-image_hough/","link":"","permalink":"https://aicc-cn.github.io/2019/03/22/2019-03-09-cv-image_hough/","excerpt":"","text":"Houghå˜æ¢ã€ç®€ä»‹ã€‘ Houghå˜æ¢æ˜¯å›¾åƒå¤„ç†ä¸­ä»å›¾åƒä¸­è¯†åˆ«å‡ ä½•å½¢çŠ¶çš„åŸºæœ¬æ–¹æ³•ä¹‹ä¸€ã€‚Houghå˜æ¢çš„åŸºæœ¬åŸç†åœ¨äºåˆ©ç”¨ç‚¹ä¸çº¿çš„å¯¹å¶æ€§ï¼Œå°†åŸå§‹å›¾åƒç©ºé—´çš„ç»™å®šçš„æ›²çº¿é€šè¿‡æ›²çº¿è¡¨è¾¾å½¢å¼å˜ä¸ºå‚æ•°ç©ºé—´çš„ä¸€ä¸ªç‚¹ã€‚è¿™æ ·å°±æŠŠåŸå§‹å›¾åƒä¸­ç»™å®šæ›²çº¿çš„æ£€æµ‹é—®é¢˜è½¬åŒ–ä¸ºå¯»æ‰¾å‚æ•°ç©ºé—´ä¸­çš„å³°å€¼é—®é¢˜ã€‚ä¹Ÿå³æŠŠæ£€æµ‹æ•´ä½“ç‰¹æ€§è½¬åŒ–ä¸ºæ£€æµ‹å±€éƒ¨ç‰¹æ€§ã€‚æ¯”å¦‚ç›´çº¿ã€æ¤­åœ†ã€åœ†ã€å¼§çº¿ç­‰ã€‚ ã€åŸç†ã€‘ é‡‡ç”¨å‚æ•°ç©ºé—´å˜æ¢çš„æ–¹æ³•ï¼Œå¯¹å™ªå£°å’Œä¸é—´æ–­ç›´çº¿çš„æ£€æµ‹å…·æœ‰é²æ£’æ€§ã€‚ å¯ç”¨äºæ£€æµ‹åœ†å’Œå…¶ä»–å‚æ•°å½¢çŠ¶ã€‚ æ ¸å¿ƒæ€æƒ³ï¼šç›´çº¿$y &#x3D; kx +b $, æ¯ä¸€æ¡ç›´çº¿å¯¹åº”ä¸€ä¸ªk,bï¼Œæåæ ‡ä¸‹å¯¹åº”ä¸€ä¸ªç‚¹($\\rho, \\theta$). ã€ç›´çº¿ã€‘ ç›´è§’åæ ‡ç³»çš„ä¸€ç‚¹$(x, y)$ï¼Œå¯¹åº”æåæ ‡ç³»ä¸‹çš„ä¸€æ¡æ­£å¼¦æ›²çº¿$\\rho&#x3D; x cos\\theta+y\\sin\\theta$ åŒä¸€æ¡ç›´çº¿ä¸Šçš„å¤šä¸ªç‚¹ï¼Œåœ¨æåæ ‡ä¸‹å¿…ç›¸äº¤äºä¸€ç‚¹ã€‚ ã€æ­¥éª¤ã€‘ å°†($\\rho, \\theta$)ç©ºé—´é‡åŒ–ä¸ºè®¸å¤šå°æ ¼ã€‚ æ ¹æ®$x-y$å¹³é¢æ¯ä¸€ä¸ªç›´çº¿ç‚¹ä»£å…¥$\\theta$çš„é‡åŒ–å€¼ï¼Œç®—å‡ºå„ä¸ª$\\rho$ï¼Œå°†å¯¹åº”æ ¼è®¡æ•°ç´¯åŠ ã€‚ å½“å…¨éƒ¨ç‚¹å˜æ¢åï¼Œå¯¹å°æ ¼è¿›è¡Œæ£€éªŒã€‚è®¾ç½®ç´¯è®¡é˜ˆå€¼Tï¼Œè®¡æ•°å™¨å¤§äºTçš„å°æ ¼å¯¹åº”äºå…±çº¿ç‚¹ï¼Œå…¶å¯ä»¥ç”¨ä½œç›´çº¿æ‹Ÿåˆå‚æ•°ã€‚å°äºTçš„åæ˜ éå…±çº¿ç‚¹ï¼Œä¸¢å¼ƒä¸ç”¨ã€‚ æ³¨æ„ï¼š$\\theta$çš„å–å€¼ä¸º$(0,2\\pi)$. ã€æ€»ç»“ã€‘ Houghå˜æ¢çš„æ ¸å¿ƒæ€æƒ³åŸºäºå‚æ•°ç©ºé—´ä¸‹çš„ç›´çº¿æ¨¡å‹åŠæŠ•ç¥¨åŸç†ã€‚ Houghå˜æ¢é€šè¿‡ç‰¹å¾å€¼åˆ¤æ–­ç°åº¦æ˜¯å¦å‘ç”Ÿçªå˜ã€‚ Houghå˜æ¢æƒ³æ³•ç›´æ¥ï¼Œæ˜“äºå®ç°ï¼Œæ˜¯å…¶å®ƒè§’ç‚¹æå–ç®—æ³•çš„åŸºç¡€ã€‚ ä»£ç å®ä¾‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172#!/usr/bin/env python# -*- coding: utf-8 -*-# @Time : 2019/1/18 14:39# @Author : Seven# @File : HoughDemo.py# @Software: PyCharmimport cv2import numpy as npimg = cv2.imread(&#x27;sudoku.png&#x27;)edgeImage = cv2.Canny(img, 50, 200, apertureSize=3)grayImage = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)def basicHough(edgeImage): &quot;&quot;&quot; HoughLines(image, rho, theta, threshold, lines=None, srn=None, stn=None, min_theta=None, max_theta=None) image:è¾¹ç¼˜æ£€æµ‹çš„è¾“å‡ºå›¾åƒ. å®ƒåº”è¯¥æ˜¯ä¸ªç°åº¦å›¾ (ä½†äº‹å®ä¸Šæ˜¯ä¸ªäºŒå€¼åŒ–å›¾) lines:å‚¨å­˜ç€æ£€æµ‹åˆ°çš„ç›´çº¿çš„å‚æ•°å¯¹ çš„å®¹å™¨ rho:å‚æ•°æå¾„ ä»¥åƒç´ å€¼ä¸ºå•ä½çš„åˆ†è¾¨ç‡. æˆ‘ä»¬ä½¿ç”¨ 1 åƒç´ . theta:å‚æ•°æè§’ ä»¥å¼§åº¦ä¸ºå•ä½çš„åˆ†è¾¨ç‡. æˆ‘ä»¬ä½¿ç”¨ 1åº¦ (å³CV_PI/180) theta:è¦â€æ£€æµ‹â€ ä¸€æ¡ç›´çº¿æ‰€éœ€æœ€å°‘çš„çš„æ›²çº¿äº¤ç‚¹ srn and stn: å‚æ•°é»˜è®¤ä¸º0. :param img: :return: &quot;&quot;&quot; cv2.imshow(&#x27;edge&#x27;, edgeImage) lines = cv2.HoughLines(edgeImage, 1, np.pi / 180, 150) for rho, theta in lines[:, 0, :]: a = np.cos(theta) b = np.sin(theta) x0 = a * rho y0 = b * rho x1 = int(x0 + 1000 * (-b)) y1 = int(y0 + 1000 * a) x2 = int(x0 - 1000 * (-b)) y2 = int(y0 - 1000 * a) cv2.line(img, (x1, y1), (x2, y2), (0, 0, 255), 2) cv2.imshow(&quot;hough&quot;, img)def uphough(edgeImage): &quot;&quot;&quot; HoughLinesP(image, rho, theta, threshold, lines=None, minLineLength=None, maxLineGap=None) imageï¼š å¿…é¡»æ˜¯äºŒå€¼å›¾åƒï¼Œæ¨èä½¿ç”¨cannyè¾¹ç¼˜æ£€æµ‹çš„ç»“æœå›¾åƒï¼› rho: çº¿æ®µä»¥åƒç´ ä¸ºå•ä½çš„è·ç¦»ç²¾åº¦ï¼Œdoubleç±»å‹çš„ï¼Œæ¨èç”¨1.0 thetaï¼š çº¿æ®µä»¥å¼§åº¦ä¸ºå•ä½çš„è§’åº¦ç²¾åº¦ï¼Œæ¨èç”¨numpy.pi/180 threshod: ç´¯åŠ å¹³é¢çš„é˜ˆå€¼å‚æ•°ï¼Œintç±»å‹ï¼Œè¶…è¿‡è®¾å®šé˜ˆå€¼æ‰è¢«æ£€æµ‹å‡ºçº¿æ®µï¼Œå€¼è¶Šå¤§ï¼ŒåŸºæœ¬ä¸Šæ„å‘³ç€æ£€å‡ºçš„çº¿æ®µè¶Šé•¿ï¼Œæ£€å‡ºçš„çº¿æ®µä¸ªæ•°è¶Šå°‘ã€‚æ ¹æ®æƒ…å†µæ¨èå…ˆç”¨100è¯•è¯• linesï¼šè¿™ä¸ªå‚æ•°çš„æ„ä¹‰æœªçŸ¥ï¼Œå‘ç°ä¸åŒçš„lineså¯¹ç»“æœæ²¡å½±å“ï¼Œä½†æ˜¯ä¸è¦å¿½ç•¥äº†å®ƒçš„å­˜åœ¨ minLineLengthï¼šçº¿æ®µä»¥åƒç´ ä¸ºå•ä½çš„æœ€å°é•¿åº¦ï¼Œæ ¹æ®åº”ç”¨åœºæ™¯è®¾ç½® maxLineGapï¼šåŒä¸€æ–¹å‘ä¸Šä¸¤æ¡çº¿æ®µåˆ¤å®šä¸ºä¸€æ¡çº¿æ®µçš„æœ€å¤§å…è®¸é—´éš”ï¼ˆæ–­è£‚ï¼‰ï¼Œè¶…è¿‡äº†è®¾å®šå€¼ï¼Œåˆ™æŠŠä¸¤æ¡çº¿æ®µå½“æˆä¸€æ¡çº¿æ®µï¼Œå€¼è¶Šå¤§ï¼Œå…è®¸çº¿æ®µä¸Šçš„æ–­è£‚è¶Šå¤§ï¼Œè¶Šæœ‰å¯èƒ½æ£€å‡ºæ½œåœ¨çš„ç›´çº¿æ®µ :param img: :return: &quot;&quot;&quot; cv2.imshow(&#x27;ep&#x27;, edgeImage) linesP = cv2.HoughLinesP(edgeImage, 1, np.pi/180, threshold=100, maxLineGap=100, minLineLength=10) for x1, x2, y1, y2 in linesP[:, 0, :]: cv2.line(img, (x1, x2), (y1, y2), (0, 0, 255), 2, cv2.LINE_AA) cv2.imshow(&#x27;houghP&#x27;, img)basicHough(edgeImage)uphough(edgeImage)cv2.waitKey(0)","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"https://aicc-cn.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"https://aicc-cn.github.io/tags/OpenCV/"}],"author":"Seven"},{"title":"ã€å…«ã€‘å›¾åƒåˆ†å‰²","slug":"2019-03-08-cv-image_split","date":"2019-03-21T16:00:00.000Z","updated":"2022-03-25T13:51:27.332Z","comments":true,"path":"2019/03/22/2019-03-08-cv-image_split/","link":"","permalink":"https://aicc-cn.github.io/2019/03/22/2019-03-08-cv-image_split/","excerpt":"","text":"ç°åº¦é˜ˆå€¼åˆ†å‰² å‡è®¾ï¼šå›¾åƒä¸­çš„ç›®æ ‡åŒºå’ŒèƒŒæ™¯åŒºä¹‹é—´æˆ–è€…ä¸åŒç›®æ ‡åŒºä¹‹é—´ï¼Œå­˜åœ¨ä¸åŒçš„ç°åº¦æˆ–å¹³å‡ç°åº¦ã€‚ å‡¡æ˜¯ç°åº¦å€¼åŒ…å«äºzçš„åƒç´ éƒ½å˜æˆæŸä¸€ç°åº¦å€¼ï¼Œå…¶ä»–çš„å˜æˆå¦ä¸€ä¸ªç°åº¦å€¼ï¼Œåˆ™è¯¥å›¾åƒå°±ä»¥zä¸ºç•Œè¢«åˆ†æˆä¸¤ä¸ªåŒºåŸŸã€‚ å¦‚æœ&#x3D;1å’Œ&#x3D;0ï¼Œåˆ†å‰²åçš„å›¾åƒä¸ºäºŒå€¼å›¾åƒ ç¡®å®šæœ€ä½³é˜ˆå€¼ï¼Œä½¿èƒŒæ™¯å’Œç›®æ ‡ä¹‹é—´çš„å·®å¼‚æœ€å¤§ã€‚ å¤§æ´¥ï¼ˆOtsuï¼‰ç®—æ³• ç¡®å®šæœ€ä½³é˜ˆå€¼ï¼Œä½¿èƒŒæ™¯å’Œç›®æ ‡ä¹‹é—´çš„ç±»é—´æ–¹å·®æœ€å¤§ (å› ä¸ºäºŒè€…å·®å¼‚æœ€å¤§)ã€‚ ç®—æ³•å®ç°ï¼šéå†ç°åº¦å–å€¼ã€‚ åŒºåŸŸç”Ÿé•¿æ³•åˆ†å‰²å®ç°æ­¥éª¤ï¼š å¯¹å›¾åƒé¡ºåºæ‰«æ!æ‰¾åˆ°ç¬¬1ä¸ªè¿˜æ²¡æœ‰å½’å±çš„åƒç´ , è®¾è¯¥åƒç´ ä¸º(x0, y0); ä»¥(x0, y0)ä¸ºä¸­å¿ƒ, è€ƒè™‘(x0, y0)çš„8é‚»åŸŸåƒç´ (x, y)ï¼Œå¦‚æœ(x, y)æ»¡è¶³ç”Ÿé•¿å‡†åˆ™, å°†(x, y)ä¸ (x0, y0)åˆå¹¶, åŒæ—¶å°†(x, y)å‹å…¥å †æ ˆ; ä»å †æ ˆä¸­å–å‡ºä¸€ä¸ªåƒç´ , æŠŠå®ƒå½“ä½œ(x0, y0)è¿”å›åˆ°æ­¥éª¤2; å½“å †æ ˆä¸ºç©ºæ—¶ï¼Œè¿”å›åˆ°æ­¥éª¤1; é‡å¤æ­¥éª¤1 - 4ç›´åˆ°å›¾åƒä¸­çš„æ¯ä¸ªç‚¹éƒ½æœ‰å½’å±æ—¶ã€‚ç”Ÿé•¿ç»“æŸã€‚ ã€æ€»ç»“ã€‘ ã€åŸºäºé˜ˆå€¼çš„åˆ†å‰²ã€‘ åŸºäºé˜ˆå€¼çš„åˆ†å‰²ç®—æ³•æ˜¯æœ€ç®€å•ç›´æ¥çš„åˆ†å‰²ç®—æ³•ã€‚ç”±äºå›¾åƒä¸­ç›®æ ‡ä½ç½®å’Œå…¶ä»–åŒºåŸŸä¹‹é—´å…·æœ‰ä¸åŒçš„ç°åº¦å€¼ï¼Œå…·æœ‰è¿™ç§æ€§è´¨çš„ç›®æ ‡åŒºåŸŸé€šè¿‡é˜ˆå€¼åˆ†å‰²èƒ½å¤Ÿå–å¾—éå¸¸å¥½çš„æ•ˆæœã€‚é€šè¿‡é˜ˆå€¼è¿›è¡Œåˆ†å‰²é€šå¸¸å¯ä»¥éœ€è¦ä¸€ä¸ªæˆ–å¤šä¸ªç°åº¦å€¼ä½œä¸ºé˜ˆå€¼ä½¿å›¾åƒåˆ†æˆä¸åŒçš„ç›®æ ‡åŒºåŸŸä¸èƒŒæ™¯åŒºåŸŸã€‚ å¦‚ä½•æ‰¾åˆ°åˆé€‚çš„é˜ˆå€¼è¿›è¡Œåˆ†å‰²æ˜¯åŸºäºé˜ˆå€¼çš„åˆ†å‰²ç®—æ³•ä¸­æœ€æ ¸å¿ƒçš„é—®é¢˜ã€‚å­¦è€…ä»¬é’ˆå¯¹è¿™ä¸€é—®é¢˜è¿›è¡Œäº†æ·±å…¥çš„ç ”ç©¶ã€‚å¤§æ´¥æ³•ï¼ˆOTSUï¼‰ã€æœ€å¤§ç†µæ³•ç­‰ç®—æ³•æ˜¯å…¶ä¸­æ¯”è¾ƒçªå‡ºçš„ç®—æ³•ï¼Œè¿™ç±»ç®—æ³•åœ¨å›¾åƒä¸­é€‚ç”¨å›ºå®šçš„é˜ˆå€¼ã€‚ä½†æ˜¯ä¹Ÿæœ‰ä¸€ç±»ç®—æ³•ä½¿ç”¨å±€éƒ¨é˜ˆå€¼ï¼Œè¿™ç±»ç®—æ³•ç§°ä¸ºè‡ªé€‚åº”é˜ˆå€¼ç®—æ³•ã€‚è¿™ç±»ç®—æ³•æ ¹æ®å›¾åƒçš„å±€éƒ¨ç‰¹å¾è®¡ç®—å±€éƒ¨çš„é˜ˆå€¼ï¼Œé€šå¸¸æƒ…å†µä¸‹è¿™ç±»ç®—æ³•åœ¨æœ‰é˜´å½±æˆ–è€…å›¾åƒç°åº¦ä¸å‡åŒ€çš„æƒ…å†µä¸‹ï¼Œå…·æœ‰æ¯”å…¨å±€é˜ˆå€¼æ›´åŠ å¥½çš„åˆ†å‰²æ•ˆæœã€‚ç”±äºåŸºäºé˜ˆå€¼çš„åˆ†å‰²ç®—æ³•å¯¹å™ªå£°æ•æ„Ÿï¼Œé€šå¸¸æƒ…å†µå›¾åƒåœ¨åˆ†å‰²ä¹‹å‰éœ€è¦è¿›è¡Œå›¾åƒå»å™ªçš„æ“ä½œã€‚ OTSUç®—æ³•é€šè¿‡è®¡ç®—å‰æ™¯å’ŒèƒŒæ™¯çš„ä¸¤ä¸ªç±»çš„æœ€å¤§ç±»é—´æ–¹å·®å¾—åˆ°é˜ˆå€¼ï¼Œé˜ˆå€¼å°†æ•´å¼ å›¾åƒåˆ†ä¸ºå‰æ™¯å’ŒèƒŒæ™¯ä¸¤ä¸ªéƒ¨åˆ†ã€‚ ã€åŸºäºåŒºåŸŸçš„åˆ†å‰²ã€‘ â€‹ åŸºäºåŒºåŸŸç”Ÿé•¿çš„åˆ†å‰²ç®—æ³•å°†å…·æœ‰ç›¸ä¼¼ç‰¹å¾çš„åƒç´ é›†åˆèšé›†æ„æˆä¸€ä¸ªåŒºåŸŸï¼Œè¿™ä¸ªåŒºåŸŸä¸­çš„ç›¸é‚»åƒç´ ä¹‹é—´å…·æœ‰ç›¸ä¼¼çš„æ€§è´¨ã€‚ç®—æ³•é¦–å…ˆåœ¨æ¯ä¸ªåŒºåŸŸä¸­å¯»æ‰¾ä¸€ä¸ªåƒç´ ç‚¹ä½œä¸ºç§å­ç‚¹ï¼Œç„¶åäººå·¥è®¾å®šåˆé€‚çš„ç”Ÿé•¿è§„åˆ™ä¸åœæ­¢è§„åˆ™ï¼Œè¿™äº›è§„åˆ™å¯ä»¥æ˜¯ç°åº¦çº§åˆ«çš„ç‰¹å¾ã€çº¹ç†çº§åˆ«çš„ç‰¹å¾ã€æ¢¯åº¦çº§åˆ«çš„ç‰¹å¾ç­‰ï¼Œç”Ÿé•¿è§„åˆ™å¯ä»¥æ ¹æ®å®é™…éœ€è¦å…·ä½“è®¾ç½®ã€‚æ»¡è¶³ç”Ÿé•¿è§„åˆ™çš„åƒç´ ç‚¹è§†ä¸ºå…·æœ‰ç›¸ä¼¼ç‰¹å¾ï¼Œå°†è¿™äº›åƒç´ ç‚¹åˆ’åˆ†åˆ°ç§å­ç‚¹æ‰€åœ¨åŒºåŸŸä¸­ã€‚å°†æ–°çš„åƒç´ ç‚¹ä½œä¸ºç§å­ç‚¹é‡å¤ä¸Šé¢çš„æ­¥éª¤ï¼Œç›´åˆ°æ‰€æœ‰çš„ç§å­ç‚¹éƒ½æ‰§è¡Œçš„ä¸€éï¼Œç”Ÿæˆçš„åŒºåŸŸå°±æ˜¯è¯¥ç§å­ç‚¹æ‰€åœ¨çš„åŒºåŸŸã€‚ â€‹ åŒºåŸŸç”Ÿé•¿æ³•çš„ä¼˜åŠ¿æ˜¯æ•´ä¸ªç®—æ³•è®¡ç®—ç®€å•ï¼Œå¯¹äºåŒºåŸŸå†…éƒ¨è¾ƒä¸ºå¹³æ»‘çš„è¿é€šç›®æ ‡èƒ½åˆ†å‰²å¾—åˆ°å¾ˆå¥½çš„ç»“æœï¼ŒåŒæ—¶ç®—æ³•å¯¹å™ªå£°ä¸é‚£ä¹ˆæ•æ„Ÿã€‚è€Œå®ƒçš„ç¼ºç‚¹ä¹Ÿéå¸¸æ˜æ˜¾ï¼Œéœ€è¦äººä¸ºé€‰å®šåˆé€‚çš„åŒºåŸŸç”Ÿé•¿ç§å­ç‚¹ï¼Œè€Œä¸”ç”Ÿé•¿è§„åˆ™é€‰å–çš„ä¸åˆé€‚å¯èƒ½å¯¼è‡´åŒºåŸŸå†…æœ‰ç©ºæ´ï¼Œç”šè‡³åœ¨å¤æ‚çš„å›¾åƒä¸­ä½¿ç”¨åŒºåŸŸç”Ÿé•¿ç®—æ³•å¯ä»¥å¯¼è‡´æ¬ åˆ†å‰²æˆ–è€…è¿‡åˆ†å‰²ã€‚æœ€åï¼Œä½œä¸ºä¸€ç§ä¸²è¡Œçš„ç®—æ³•ï¼Œå½“ç›®æ ‡åŒºåŸŸè¾ƒå¤§æ—¶ï¼Œç›®æ ‡åˆ†å‰²çš„é€Ÿåº¦è¾ƒæ…¢ã€‚ ã€åŸºäºè¾¹ç¼˜çš„åˆ†å‰²ã€‘ â€‹ é€šè¿‡åŒºåŸŸçš„è¾¹ç¼˜æ¥å®ç°å›¾åƒçš„åˆ†å‰²æ˜¯å›¾åƒåˆ†å‰²ä¸­å¸¸è§çš„ä¸€ç§ç®—æ³•ã€‚ç”±äºä¸åŒåŒºåŸŸä¸­é€šå¸¸å…·æœ‰ç»“æ„çªå˜æˆ–è€…ä¸è¿ç»­çš„åœ°æ–¹ï¼Œè¿™äº›åœ°æ–¹å¾€å¾€èƒ½å¤Ÿä¸ºå›¾åƒåˆ†å‰²æä¾›äº†æœ‰æ•ˆçš„ä¾æ®ã€‚è¿™äº›ä¸è¿ç»­æˆ–è€…ç»“æ„çªå˜çš„åœ°æ–¹ç§°ä¸ºè¾¹ç¼˜ã€‚å›¾åƒä¸­ä¸åŒåŒºåŸŸé€šå¸¸å…·æœ‰æ˜æ˜¾çš„è¾¹ç¼˜ï¼Œåˆ©ç”¨è¾¹ç¼˜ä¿¡æ¯èƒ½å¤Ÿå¾ˆå¥½çš„å®ç°å¯¹ä¸åŒåŒºåŸŸçš„åˆ†å‰²ã€‚ â€‹ åŸºäºè¾¹ç¼˜çš„å›¾åƒåˆ†å‰²ç®—æ³•æœ€é‡è¦çš„æ˜¯è¾¹ç¼˜çš„æ£€æµ‹ã€‚å›¾åƒçš„è¾¹ç¼˜é€šå¸¸æ˜¯å›¾åƒé¢œè‰²ã€ç°åº¦æ€§è´¨ä¸è¿ç»­çš„ä½ç½®ã€‚å¯¹äºå›¾åƒè¾¹ç¼˜çš„æ£€æµ‹ï¼Œé€šå¸¸ä½¿ç”¨è¾¹ç¼˜æ£€æµ‹ç®—å­è®¡ç®—å¾—å‡ºã€‚å¸¸ç”¨çš„å›¾åƒè¾¹ç¼˜æ£€æµ‹ç®—å­æœ‰ï¼šLaplaceç®—å­ã€Sobelç®—å­ã€Cannyç®—å­ç­‰ã€‚ ä»£ç æ¼”ç¤º123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899import cv2import matplotlib.pyplot as pltimport numpy as npimport random# åŠ è½½å›¾ç‰‡histImage = cv2.imread(&#x27;lena.jpg&#x27;)image_1 = cv2.imread(&#x27;pic2.png&#x27;)image_2 = cv2.imread(&#x27;pic6.png&#x27;)cv2.imshow(&quot;source-1&quot;, image_1)cv2.imshow(&quot;source-2&quot;, image_2)def GrayHist(img): &quot;&quot;&quot; calcHist(images, channels, mask, histSize, ranges, hist=None, accumulate=None) images â€” æºçŸ©é˜µæŒ‡é’ˆï¼ˆè¾“å…¥å›¾åƒï¼Œå¯ä»¥å¤šå¼ ï¼‰ã€‚ ä½†éƒ½åº”å½“æœ‰åŒæ ·çš„æ·±åº¦ï¼ˆdepthï¼‰, æ¯”å¦‚CV_8U æˆ–è€… CV_32F ï¼Œ å’ŒåŒæ ·çš„å¤§å°ã€‚æ¯å¼ å›¾ç‰‡å¯ä»¥æ‹¥æœ‰ä»»æ„æ•°é‡çš„é€šé“ã€‚ channels â€” é€šé“çš„æ•°é‡ï¼Œæ¯ä¸ªé€šé“éƒ½æœ‰ç¼–å·ï¼Œç°åº¦å›¾ä¸ºä¸€é€šé“ï¼Œå³channel[1]=0;å¯¹åº”ç€ä¸€ç»´ã€‚ BGRä¸‰é€šé“å›¾åƒç¼–å·ä¸ºchannels[3]=&#123;0,1,2&#125;;åˆ†åˆ«å¯¹åº”ç€ç¬¬ä¸€ç»´ï¼Œç¬¬äºŒç»´ï¼Œç¬¬ä¸‰ç»´ã€‚ mask â€” æ©ç å›¾åƒï¼šè¦å¯¹å›¾åƒå¤„ç†æ—¶ï¼Œå…ˆçœ‹çœ‹è¿™ä¸ªåƒç´ å¯¹åº”çš„æ©ç ä½æ˜¯å¦ä¸ºå±è”½ï¼Œå¦‚æœä¸ºå±è”½ï¼Œå°±æ˜¯è¯´è¯¥åƒç´ ä¸å¤„ç†ï¼ˆæ©ç å€¼ä¸º0çš„åƒç´ éƒ½å°†è¢«å¿½ç•¥ï¼‰ hist â€” è¿”å›çš„ç›´æ–¹å›¾ã€‚ histSize â€” ç›´æ–¹å›¾æ¯ä¸€ç»´çš„æ¡ç›®ä¸ªæ•°çš„æ•°ç»„ï¼Œç°åº¦å›¾ä¸€ç»´æœ‰256ä¸ªæ¡ç›®ã€‚ ranges â€” æ¯ä¸€ç»´çš„åƒç´ å€¼çš„èŒƒå›´ï¼Œä¼ é€’æ•°ç»„ï¼Œä¸ç»´æ•°ç›¸å¯¹åº”ï¼Œç°åº¦å›¾ä¸€ç»´åƒç´ å€¼èŒƒå›´ä¸º0~255ã€‚ :param name: å‘½åæ ‡å¿— :param img: å›¾ç‰‡æ•°æ® :return: &quot;&quot;&quot; grayHist = cv2.calcHist([img], [0], None, [256], [0.0, 255.0]) print(grayHist) plt.plot(grayHist) plt.show()def ThresholdImage(image, name): &quot;&quot;&quot; threshold(src, thresh, maxval, type, dst=None) srcï¼š è¾“å…¥å›¾ï¼Œåªèƒ½è¾“å…¥å•é€šé“å›¾åƒï¼Œé€šå¸¸æ¥è¯´ä¸ºç°åº¦å›¾ dstï¼š è¾“å‡ºå›¾ threshï¼š é˜ˆå€¼ maxvalï¼š å½“åƒç´ å€¼è¶…è¿‡äº†é˜ˆå€¼ï¼ˆæˆ–è€…å°äºé˜ˆå€¼ï¼Œæ ¹æ®typeæ¥å†³å®šï¼‰ï¼Œæ‰€èµ‹äºˆçš„å€¼ typeï¼šäºŒå€¼åŒ–æ“ä½œçš„ç±»å‹ï¼ŒåŒ…å«ä»¥ä¸‹5ç§ç±»å‹ï¼š cv2.THRESH_BINARYï¼› cv2.THRESH_BINARY_INVï¼› cv2.THRESH_TRUNCï¼› cv2.THRESH_TOZEROï¼›cv2.THRESH_TOZERO_INV :param img: :return: &quot;&quot;&quot; img = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY) listType = [cv2.THRESH_BINARY, cv2.THRESH_BINARY_INV, cv2.THRESH_TRUNC, cv2.THRESH_TOZERO, cv2.THRESH_TOZERO_INV] for i in listType: thresholdImage = cv2.threshold(img, 125, 255, i) cv2.imshow(&quot;threshold-%s-%s&quot; % (name, i), thresholdImage[1])def floodFillImage(img, name, lo, up): &quot;&quot;&quot; floodFill(image, mask, seedPoint, newVal, loDiff=None, upDiff=None, flags=None) image ã€è¾“å…¥/è¾“å‡ºã€‘ 1æˆ–è€…3é€šé“ã€ 8bitæˆ–è€…æµ®ç‚¹å›¾åƒã€‚ä»…å½“å‚æ•°flagsçš„FLOODFILL_MASK_ONLYæ ‡å¿—ä½è¢«è®¾ç½®æ—¶imageä¸ä¼šè¢«ä¿®æ”¹ï¼Œå¦åˆ™ä¼šè¢«ä¿®æ”¹ã€‚ mask ã€è¾“å…¥/è¾“å‡ºã€‘ æ“ä½œæ©ç ï¼Œå¿…é¡»ä¸ºå•é€šé“ã€8bitï¼Œä¸”æ¯”imageå®½2ä¸ªåƒç´ ã€é«˜2ä¸ªåƒç´ ã€‚ä½¿ç”¨å‰å¿…é¡»å…ˆåˆå§‹åŒ–ã€‚ Flood-fillingæ— æ³•è·¨è¶Šmaskä¸­çš„é0åƒç´ ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªè¾¹ç¼˜æ£€æµ‹çš„ç»“æœå¯ä»¥ä½œä¸ºmaskæ¥é˜»æ­¢è¾¹ç¼˜å¡«å……ã€‚ åœ¨è¾“å‡ºä¸­ï¼Œmaskä¸­ä¸imageä¸­å¡«å……åƒç´ å¯¹åº”çš„åƒç´ ç‚¹è¢«è®¾ç½®ä¸º1ï¼Œæˆ–è€…flagsæ ‡å¿—ä½ä¸­è®¾ç½®çš„å€¼(è¯¦è§flagsæ ‡å¿—ä½çš„è§£é‡Š)ã€‚ æ­¤å¤–ï¼Œè¯¥å‡½æ•°è¿˜ç”¨1å¡«å……äº†maskçš„è¾¹ç¼˜æ¥ç®€åŒ–å†…éƒ¨å¤„ç†ã€‚å› æ­¤ï¼Œå¯ä»¥åœ¨å¤šä¸ªè°ƒç”¨ä¸­ä½¿ç”¨åŒä¸€maskï¼Œä»¥ç¡®ä¿å¡«å……åŒºåŸŸä¸ä¼šé‡å ã€‚ seedPoint èµ·å§‹åƒç´ ç‚¹ newVal é‡ç»˜åƒç´ åŒºåŸŸçš„æ–°çš„å¡«å……å€¼(é¢œè‰²) loDiff å½“å‰é€‰å®šåƒç´ ä¸å…¶è¿é€šåŒºä¸­ç›¸é‚»åƒç´ ä¸­çš„ä¸€ä¸ªåƒç´ ï¼Œæˆ–è€…ä¸åŠ å…¥è¯¥è¿é€šåŒºçš„ä¸€ä¸ªseedPointåƒç´ ï¼ŒäºŒè€…ä¹‹é—´çš„æœ€å¤§ä¸‹è¡Œå·®å¼‚å€¼ã€‚ upDiff å½“å‰é€‰å®šåƒç´ ä¸å…¶è¿é€šåŒºä¸­ç›¸é‚»åƒç´ ä¸­çš„ä¸€ä¸ªåƒç´ ï¼Œæˆ–è€…ä¸åŠ å…¥è¯¥è¿é€šåŒºçš„ä¸€ä¸ªseedPointåƒç´ ï¼ŒäºŒè€…ä¹‹é—´çš„æœ€å¤§ä¸Šè¡Œå·®å¼‚å€¼ã€‚ flags flagsæ ‡å¿—ä½æ˜¯ä¸€ä¸ª32bitçš„intç±»å‹æ•°æ®ï¼Œå…¶ç”±3éƒ¨åˆ†ç»„æˆï¼š 0-7bitè¡¨ç¤ºé‚»æ¥æ€§(4é‚»æ¥ã€8é‚»æ¥)ï¼› 8-15bitè¡¨ç¤ºmaskçš„å¡«å……é¢œè‰²ï¼›16-31bitè¡¨ç¤ºå¡«å……æ¨¡å¼ï¼ˆè¯¦è§å¡«å……æ¨¡å¼è§£é‡Šï¼‰ :param img: :param name: :return: &quot;&quot;&quot; seed = (10, 30) # èµ·å§‹ä½ç½® # æ„å»ºmask,æ ¹æ®maskå‚æ•°çš„ä»‹ç»,å…¶sizeå¿…é¡»ä¸ºå®½img+2,é«˜img+2 mask = np.zeros((img.shape[0] + 2, img.shape[1] + 2), dtype=np.uint8) newVal = (255, 64, 64) # img fillçš„å¡«å……é¢œè‰²å€¼ # æ‰§è¡ŒfloodFillæ“ä½œ # ret, image, mask, rect = cv2.floodFill(img, mask, seed, newVal) cv2.floodFill(img, mask, seed, newVal, (lo, )*3, (up, )*3, cv2.FLOODFILL_FIXED_RANGE) cv2.imshow(&#x27;floodfill-%s&#x27; % name, img)# è®¡ç®—å¹¶æ˜¾ç¤ºç›´æ–¹å›¾GrayHist(image_1)# å¤§æ´¥ç®—æ³•ThresholdImage(image_1, &#x27;1&#x27;)ThresholdImage(image_2, &#x27;2&#x27;)# riceImage = cv2.imread(&#x27;rice.png&#x27;)# ThresholdImage(riceImage, &#x27;rice&#x27;)floodFillImage(image_1, &#x27;1&#x27;, 200, 255)floodFillImage(image_2, &#x27;2&#x27;, 0, 0)cv2.waitKey(0)","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"https://aicc-cn.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"https://aicc-cn.github.io/tags/OpenCV/"}],"author":"Seven"},{"title":"ã€åä¸€ã€‘SIFTè§’ç‚¹æ£€æµ‹","slug":"2019-03-11-cv-image_sift","date":"2019-03-21T16:00:00.000Z","updated":"2022-03-25T13:51:45.626Z","comments":true,"path":"2019/03/22/2019-03-11-cv-image_sift/","link":"","permalink":"https://aicc-cn.github.io/2019/03/22/2019-03-11-cv-image_sift/","excerpt":"","text":"æ¦‚è¿° SIFTçš„å…¨ç§°æ˜¯Scale Invariant Feature Transformï¼ˆå°ºåº¦ä¸å˜ç‰¹å¾å˜æ¢ï¼‰ï¼Œæ˜¯ç”±åŠ æ‹¿å¤§æ•™æˆDavid G.Loweåœ¨1999å¹´åœ¨ä¼šè®®æ–‡ç« ä¸­æå‡ºï¼Œ2004å¹´å‘è¡¨åœ¨IJCVä¸Šã€‚ æ˜¯è®¡ç®—æœºè§†è§‰ç•Œè¿‘äºŒåå¹´æ¥å¼•ç”¨ç‡æœ€é«˜çš„æ–‡ç« ä¹‹ä¸€ã€‚ SIFTç‰¹å¾å¯¹æ—‹è½¬ã€å°ºåº¦ç¼©æ”¾ã€äº®åº¦å˜åŒ–ç­‰ä¿æŒä¸å‘æ€§ï¼Œæ˜¯ä¸€ç§ç¨³å®šçš„å±€éƒ¨ç‰¹å¾ã€‚ SIFTçš„ç‰¹å¾æå–æ–¹é¢å¯¹è®¡ç®—æœºè§†è§‰è¿‘å¹´æ¥çš„å‘å±•å½±å“æ·±è¿œï¼Œç‰¹åˆ«æ˜¯å‡ ä¹å½±å“åˆ°äº†åç»­æ‰€æœ‰çš„è§’ç‚¹æå–å’ŒåŒ¹é…ç®—æ³•ã€‚ ç®—æ³•ç‰¹ç‚¹ å›¾åƒçš„å±€éƒ¨ç‰¹å¾ï¼Œå¯¹æ—‹è½¬ã€å°ºåº¦ç¼©æ”¾ã€äº®åº¦å˜åŒ–ä¿æŒä¸å˜ï¼Œå¯¹è§†è§’å˜åŒ–ã€ä»¿å°„å˜æ¢ã€å™ªå£°ä¹Ÿä¿æŒä¸€å®šç¨‹åº¦çš„ç¨³å®šæ€§ã€‚ ç‹¬ç‰¹æ€§å¥½ï¼Œä¿¡æ¯é‡ä¸°å¯Œï¼Œé€‚ç”¨äºæµ·é‡ç‰¹å¾åº“è¿›è¡Œå¿«é€Ÿã€å‡†ç¡®çš„åŒ¹é…ã€‚ å¤šé‡æ€§ï¼šå³ä½¿æ˜¯å¾ˆå°‘å‡ ä¸ªç‰©ä½“ä¹Ÿå¯ä»¥äº§ç”Ÿå¤§é‡çš„SIFTç‰¹å¾ é«˜é€Ÿæ€§ï¼šæ”¹è¿›çš„SIFTåŒ¹é…ç®—æ³•ç”šè‡³å¯ä»¥è¾¾åˆ°å®æ—¶æ€§ æ‰©å±•æ€§ï¼šå¯ä»¥å¾ˆæ–¹ä¾¿çš„ä¸å…¶ä»–çš„ç‰¹å¾å‘é‡è¿›è¡Œè”åˆã€‚ å°ºåº¦ç©ºé—´æ¦‚è¿° äººçœ¼å¯è‡ªåŠ¨è°ƒèŠ‚å°ºåº¦ï¼Œå®Œæˆå¯¹ç‰©ä½“çš„æ£€æµ‹å’Œè¯†åˆ« æ¨¡ä»¿äººçš„è§†è§‰è®¤çŸ¥ï¼ŒæŠŠç‰©ä½“ä¸åŒå°ºåº¦ä¸‹çš„å›¾åƒéƒ½æä¾›ç»™æœºå™¨ï¼Œè®©æœºå™¨èƒ½å¤Ÿå¯¹ç‰©ä½“åœ¨ä¸åŒçš„å°ºåº¦ä¸‹ç»¼åˆä¿¡æ¯è¯†åˆ«ã€‚ å› æ­¤ï¼Œé¦–å…ˆéœ€è¦å»ºç«‹å°ºåº¦ç©ºé—´ã€‚ é€šè¿‡é«˜æ–¯å‡½æ•°ä¸åŸå›¾åƒå·ç§¯ï¼Œå¹¶ç»è¿‡ä¸‹é‡‡æ ·ï¼Œå¯å»ºç«‹åŸå§‹å›¾åƒçš„å°ºåº¦ç©ºé—´æ¨¡å‹ã€‚ ç†è®º åœ¨å›¾åƒä¿¡æ¯å¤„ç†æ¨¡å‹ä¸­å¼•å…¥ä¸€ä¸ªè¢«è§†ä¸ºå°ºåº¦çš„å‚æ•°ï¼Œé€šè¿‡è¿ç»­å˜åŒ–å°ºåº¦å‚æ•°è·å¾—å¤šå°ºåº¦ä¸‹çš„å°ºåº¦ç©ºé—´è¡¨ç¤ºåºåˆ—ï¼Œå¯¹è¿™äº›åºåˆ—è¿›è¡Œå°ºåº¦ç©ºé—´ä¸»è½®å»“çš„æå–ï¼Œå¹¶ä»¥è¯¥ä¸»è½®å»“ä½œä¸ºä¸€ç§ç‰¹å¾å‘é‡ï¼Œå®ç°è¾¹ç¼˜ã€è§’ç‚¹æ£€æµ‹å’Œä¸åŒåˆ†è¾¨ç‡ä¸Šçš„ç‰¹å¾æå–ç­‰ã€‚ å°ºåº¦ç©ºé—´æ–¹æ³•å°†ä¼ ç»Ÿçš„å•å°ºåº¦å›¾åƒä¿¡æ¯å¤„ç†æŠ€æœ¯çº³å…¥å°ºåº¦ä¸æ–­å˜åŒ–çš„åŠ¨æ€åˆ†ææ¡†æ¶ä¸­ï¼Œæ›´å®¹æ˜“è·å–å›¾åƒçš„æœ¬è´¨ç‰¹å¾ã€‚å°ºåº¦ç©ºé—´ä¸­å„å°ºåº¦å›¾åƒçš„æ¨¡ç³Šç¨‹åº¦é€æ¸å‘å¤§ï¼Œèƒ½å¤Ÿæ¨¡æ‹Ÿäººåœ¨è·ç¦»ç›®æ ‡ç”±è¿‘åˆ°è¿œæ—¶ç›®æ ‡åœ¨è§†ç½‘è†œä¸Šçš„å½¢æˆè¿‡ç¨‹ã€‚ å®šä¹‰ é«˜æ–¯å·ç§¯æ ¸æ˜¯å®ç°å°ºåº¦å˜æ¢çš„å”¯ä¸€å˜æ¢æ ¸ ä¸€å¹…å›¾åƒçš„å°ºåº¦ç©ºé—´è¢«å®šä¹‰ä¸ºï¼šé«˜æ–¯å·ç§¯æ ¸ä¸è¯¥å›¾åƒçš„å·ç§¯ï¼Œå®ƒæ˜¯é«˜æ–¯å·ç§¯æ ¸ä¸­çš„å‚æ•°$\\sigma$çš„å‡½æ•°ï¼Œè¿™é‡Œç”¨åˆ°â€œç©ºé—´â€è¿™ä¸ªè¯ï¼Œæ˜¯å› ä¸º$\\sigma$æ˜¯å¯ä»¥è¿ç»­å˜åŒ–çš„ï¼Œå…·ä½“åœ°ï¼Œå›¾åƒ$I(x,y)$çš„å°ºåº¦ç©ºé—´ä¸ºï¼š $L(x,y,\\sigma) &#x3D; G(x,y,\\sigma)*I(x,y)$ $G(x,y,\\sigma) &#x3D; \\frac{1}{2\\pi\\sigma^2}*e^{-\\frac{x^2+y^2}{2\\sigma^2}}$ æ˜¯é«˜æ–¯æ ¸å‡½æ•°ã€‚ $\\sigma$æ˜¯å°ºåº¦å› å­ï¼Œ$\\sigma$çš„å¤§å°å†³å®šå›¾åƒçš„å¹³æ»‘ç¨‹åº¦ï¼Œå¤§å°ºåº¦å¯¹åº”å›¾åƒçš„æ¦‚è²Œç‰¹å¾ï¼Œå°å°ºåº¦å¯¹åº”å›¾åƒçš„ç»†èŠ‚ç‰¹å¾ã€‚å¤§çš„$\\sigma$å€¼å¯¹åº”ç²—ç³™å°ºåº¦(ä½åˆ†è¾¨ç‡)ï¼Œå°çš„$\\sigma$å€¼å¯¹åº”ç²¾ç»†å°ºåº¦(é«˜åˆ†è¾¨ç‡)ã€‚ *æ˜¯å·ç§¯æ“ä½œã€‚ $L(x,y,\\sigma) $å°±æ˜¯è¾“å…¥å›¾åƒ$I(x,y)$çš„å°ºåº¦ç©ºé—´ã€‚ æ —å­ â€‹ æ¯”å¦‚è¦è§‚å¯Ÿä¸€æ£µæ ‘ï¼Œæ‰€é€‰æ‹©çš„å°ºåº¦åº”è¯¥æ˜¯â€œç±³â€çº§ï¼›å¦‚æœè§‚å¯Ÿæ ‘ä¸Šçš„æ ‘å¶ï¼Œæ‰€é€‰æ‹©çš„å°ºåº¦åˆ™åº”è¯¥æ˜¯â€œå˜ç±³â€çº§ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ‘„åƒè®¾å¤‡æ‰€èƒ½å‘ˆç°çš„ç”»é¢åˆ†è¾¨ç‡æ˜¯å›ºå®šçš„ã€‚è¦ä»¥åŒæ ·çš„åˆ†è¾¨ç‡åˆ†åˆ«è§‚å¯Ÿæ ‘å’Œæ ‘å¶ï¼Œæˆ‘ä»¬éœ€è¦è°ƒæ•´æ‘„åƒè®¾å¤‡çš„æ‘„åƒä½ç½®ã€‚å› æ­¤ï¼Œè§†è§‰é—®é¢˜ä¸­çš„â€œå°ºåº¦â€æ¦‚å¿µä¹Ÿå¯ä»¥è¢«å½¢è±¡åœ°ç†è§£ä¸ºæ‘„åƒè®¾å¤‡ä¸è¢«è§‚å¯Ÿç‰©ä½“ä¹‹é—´çš„è·ç¦»ï¼šè¾ƒè¿œçš„è·ç¦»å¯¹åº”è¾ƒå¤§çš„å°ºåº¦ï¼Œè¾ƒè¿‘çš„è·ç¦»å¯¹åº”è¾ƒå°çš„å°ºåº¦ã€‚ æ¦‚å†µçš„è¯´ï¼šâ€œå°ºåº¦ç©ºé—´â€çš„æ¦‚å¿µå°±æ˜¯åœ¨å¤šä¸ªå°ºåº¦ä¸‹è§‚å¯Ÿç›®æ ‡ï¼Œç„¶ååŠ ä»¥ç»¼åˆçš„åˆ†æå’Œç†è§£ã€‚ ç‰¹å¾æå–ä¸€å¹…å›¾åƒçš„SIFTç‰¹å¾æå–ï¼Œåˆ†ä¸º4ä¸ªæ­¥éª¤ï¼š å°ºåº¦ç©ºé—´æå€¼æ£€æµ‹. å…³é”®ç‚¹ä½ç½®åŠå°ºåº¦ç¡®å®š å…³é”®ç‚¹æ–¹å‘ç¡®å®š ç‰¹å¾å‘é‡ç”Ÿæˆ å°ºåº¦ç©ºé—´æå€¼æ£€æµ‹ SIFTç‰¹å¾ç‚¹å…¶å®å°±æ˜¯å°ºåº¦ç©ºé—´ä¸­ç¨³å®šçš„ç‚¹&#x2F;æå€¼ç‚¹ï¼Œé‚£ä¹ˆï¼Œä¸ºäº†å¾—åˆ°è¿™äº›ç¨³å®šç‚¹ï¼š é¦–å…ˆï¼Œéœ€è¦å¯¹è¾“å…¥å›¾åƒå»ºç«‹å°ºåº¦ç©ºé—´ï¼ˆé€šè¿‡å›¾åƒé«˜æ–¯é‡‘å­—å¡”ï¼‰ ç„¶åï¼Œéœ€è¦ä»å»ºç«‹å¾—åˆ°çš„å°ºåº¦ç©ºé—´ä¸­æ£€æµ‹æå€¼ç‚¹ï¼ˆè½¬æ¢ä¸ºå›¾åƒå·®åˆ†é«˜æ–¯é‡‘å­—å¡”ä¸­æå€¼ç‚¹çš„æ£€æµ‹ï¼‰ è·å–å·®åˆ†é«˜æ–¯é‡‘å­—å¡” DoGä¸­æå€¼ç‚¹çš„æ£€æµ‹ ã€æ„å»ºé«˜æ–¯é‡‘å­—å¡”ã€‘ å°ºåº¦ç©ºé—´åœ¨å®ç°æ—¶ä½¿ç”¨é«˜æ–¯é‡‘å­—å¡”è¡¨ç¤ºï¼Œé«˜æ–¯é‡‘å­—å¡”çš„æ„å»ºåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š å¯¹å›¾åƒåšä¸åŒå°ºåº¦çš„é«˜æ–¯æ¨¡ç³Šï¼› å¯¹å›¾åƒåšé™é‡‡æ ·(éš”ç‚¹é‡‡æ ·)ã€‚ å›¾åƒçš„é‡‘å­—å¡”æ¨¡å‹æ˜¯æŒ‡ï¼Œå°†åŸå§‹å›¾åƒä¸æ–­é™é˜¶é‡‡æ ·ï¼Œå¾—åˆ°ä¸€ç³»åˆ—å¤§å°ä¸ä¸€çš„å›¾åƒï¼Œç”±å¤§åˆ°å°ï¼Œä»ä¸‹åˆ°ä¸Šæ„æˆçš„å¡”çŠ¶æ¨¡å‹ã€‚ â€‹ å¯¹äºä¸€å¹…è¾“å…¥å›¾åƒï¼Œä¸ºäº†è¿›è¡Œsiftç‰¹å¾æ£€æµ‹ã€å®ç°scale-invariantï¼ˆä»»ä½•å°ºåº¦ä¸‹éƒ½èƒ½å¤Ÿæœ‰å¯¹åº”çš„ç‰¹å¾ç‚¹ï¼‰ï¼Œéœ€è¦å¯¹è¯¥å›¾åƒçš„å°ºåº¦ç©ºé—´è¿›è¡Œåˆ†æï¼Œå³å»ºç«‹é«˜æ–¯é‡‘å­—å¡”å›¾åƒã€å¾—åˆ°ä¸åŒscaleçš„å›¾åƒï¼Œè¿™é‡Œçš„é«˜æ–¯é‡‘å­—å¡”ä¸æœ€åŸå§‹çš„é«˜æ–¯é‡‘å­—å¡”ç¨å¾®æœ‰ç‚¹åŒºåˆ«ï¼Œå› ä¸ºå®ƒåœ¨æ„é€ å°ºåº¦ç©ºé—´æ—¶ï¼Œå°†è¿™äº›ä¸åŒå°ºåº¦å›¾åƒåˆ†ä¸ºäº†å¤šä¸ªOctaveã€æ¯ä¸ªOctaveåˆåˆ†ä¸ºäº†å¤šå±‚ã€‚ä¸‹å›¾å·¦ä¾§æ¡†å†…ç»™å‡ºäº†Siftä¸­çš„é«˜æ–¯é‡‘å­—å¡”çš„ç»“æ„å›¾ã€‚ é«˜æ–¯é‡‘å­—å¡”åˆ†ä¸ºSç»„ï¼ˆå³Sä¸ªå¡”ã€æˆ–è€…ç§°ä¸ºSä¸ªoctaveï¼‰ï¼Œæ¯ä¸ªå¡”ä¸­æœ‰så±‚ï¼›å…·ä½“æœ‰å‡ ä¸ªå¡”ã€æ¯ä¸ªå¡”åŒ…å«å‡ å±‚ç”±è¾“å…¥å›¾åƒçš„å°ºå¯¸å†³å®šï¼å¯¹äºä¸Šå›¾è€Œè¨€ï¼šæœ‰S&#x3D;2ç»„ï¼Œæ¯ç»„ç”±s&#x3D;5å±‚ï¼› åŒä¸€å¡”ä¸­å›¾åƒå°ºå¯¸ç›¸åŒä½†å°ºåº¦ä¸åŒã€ä¸åŒå¡”ä¸­å›¾åƒå°ºå¯¸å’Œå°ºåº¦éƒ½ä¸åŒï¼ˆæ³¨æ„ï¼šè¿™é‡Œçš„å°ºå¯¸å’Œå°ºåº¦æ¦‚å¿µä¸åŒï¼å°ºå¯¸å¯¹åº”å›¾åƒåˆ†è¾¨ç‡ã€å°ºåº¦ä¸ºé«˜æ–¯æ ¸å¤§å°ï¼‰ æ¯ä¸€ä¸ªå¡”ä¸­å›¾åƒå°ºå¯¸ç¡®å®šæ–¹æ³•ä¸ºï¼šç¬¬ä¸€ä¸ªå¡”çš„å°ºå¯¸ä¸ºåŸå›¾å¤§å°ï¼Œåé¢æ¯ä¸ªå¡”çš„å°ºå¯¸ä¸ºä¸Šä¸€ä¸ªå¡”çš„é™é‡‡æ ·çš„ç»“æœï¼ˆå³é•¿å®½åˆ†åˆ«å‡åŠçš„ç»“æœï¼‰ æ¯ä¸ªå¡”ä¸­å„å±‚å›¾åƒçš„å°ºåº¦ä¸åŒï¼Œå³$\\sigma$å–å€¼ä¸åŒï¼Œå„å±‚ä¹‹é—´ç›¸å·®ä¸€ä¸ªkå€¼ã€‚ä¾‹å¦‚ï¼šä¸Šå›¾ä¸­ç¬¬ä¸€ä¸ªå¡”ä¸­å„å±‚çš„å°ºåº¦å› å­åˆ†åˆ«ä¸º$\\sigmaã€k\\sigmaã€ k^2\\sigmaã€k^3\\sigmaã€k^4\\sigma$ï¼›è€Œç¬¬äºŒä¸ªå¡”ä¸­å„å±‚çš„å°ºåº¦å› å­åˆ†åˆ«ä¸º$2\\sigmaã€2k\\sigmaã€ 2k^2\\sigmaã€2k^3\\sigmaã€2k^4\\sigma$ å¦‚ä½•ç¡®å®šç›¸é‚»å±‚ä¹‹é—´çš„æ¯”ä¾‹å› å­kå‘¢ï¼Ÿä¸‹å›¾æ˜¯åŒä¸€Octaveä¸­ä¸åŒå±‚å’Œä¸åŒOctaveä¹‹é—´çš„å°ºåº¦å¤§å°å…³ç³»ï¼Œä¸ºäº†æ»¡è¶³å°ºåº¦å˜åŒ–çš„è¿ç»­æ€§ï¼Œå³æŸä¸€ç»„çš„æœ€åä¸€å±‚å¯¹åº”çš„å°ºåº¦ä¸ä¸‹ä¸€ç»„çš„ç¬¬ä¸€å±‚å¯¹åº”çš„å°ºåº¦åº”è¯¥ç›¸å·®ä¸€ä¸ªkå€ï¼Œæ‰€ä»¥åº”è¯¥æœ‰**$k^{s-1}\\sigma_0 k &#x3D; 2\\sigma_0$ï¼Œ æ‰€ä»¥$k^s&#x3D;2$ï¼Œå³$k&#x3D;2^{1&#x2F;2}$ï¼Œ å…¶ä¸­ï¼Œ$\\sigma_0$**ä¸ºåŸºç¡€å°ºåº¦å› å­ã€‚ æ³¨æ„ï¼šå…³äºå°ºåº¦å˜åŒ–çš„è¿ç»­æ€§åº”è¯¥å°±æ˜¯æŒ‡ï¼šé‡‘å­—å¡”å›¾åƒä¸­æ‰€æœ‰å›¾åƒä¹‹é—´çš„å°ºåº¦å› å­éƒ½ç›¸å·®ä¸€ä¸ªkå€ï¼šæ¯ä¸ªoctaveä¸­ç›¸é‚»å›¾åƒä¹‹é—´å°ºåº¦å› å­ç›¸å·®ä¸€ä¸ªkï¼Œç›¸é‚»2ä¸ªoctaveçš„æœ€åä¸€å±‚ä¸ç¬¬ä¸€å±‚çš„å›¾åƒä¹‹é—´å°ºåº¦å› å­ç›¸å·®ä¸€ä¸ªkï¼æ³¨2ï¼šè‹±æ–‡Octaveæ˜¯éŸ³ä¹ä¸Šä¸€ä¸ªå…«åº¦çš„æ„æ€ï¼Œåœ¨è¿™é‡ŒæŒ‡çš„æ˜¯ä¸€ç»„å›¾åƒã€‚è¿™ä¸€ç»„å›¾åƒçš„åˆ†è¾¨ç‡æ˜¯ç›¸åŒçš„ï¼Œä½†æ˜¯é‡‡ç”¨äº†ä¸åŒå°ºåº¦çš„é«˜æ–¯å‡½æ•°è¿›è¡Œæ»¤æ³¢ï¼Œå› æ­¤ä»æ¨¡ç³Šç¨‹åº¦ä¸Šçœ‹ï¼ˆæˆ–è€…è¯´ä»å…³æ³¨çš„å°ºåº¦ä¸Šçœ‹ï¼‰æ˜¯æœ‰åŒºåˆ«çš„ã€‚è€Œä¸åŒç»„çš„å›¾åƒå…·æœ‰ä¸åŒçš„åˆ†è¾¨ç‡ï¼Œåœ¨å°ºåº¦ä¸Šçš„å·®åˆ«å°±æ›´å¤§ã€‚ â€‹ å¾—åˆ°äº†å›¾åƒçš„å°ºåº¦ç©ºé—´åï¼Œéœ€è¦åœ¨å°ºåº¦ä¸­é—´å†…æ£€æµ‹ç¨³å®šç‰¹å¾ç‚¹ï¼Œä»è€Œéœ€è¦æ¯”è¾ƒä¸åŒå°ºåº¦å›¾åƒä¹‹é—´çš„å·®åˆ«ï¼Œå®ç°æå€¼ç‚¹çš„æ£€æµ‹ï¼Œå®é™…ä¸Šï¼ŒLaplacian of Gaussianå’ŒDifference of Gaussianéƒ½èƒ½å¤Ÿå®ç°è¿™æ ·çš„ç›®çš„ï¼Œä½†LoGéœ€è¦å¤§é‡çš„è®¡ç®—ï¼Œè€ŒDoGçš„è®¡ç®—ç›¸å¯¹ç®€å•ã€‚ ã€å»ºç«‹å›¾åƒå·®åˆ†é«˜æ–¯é‡‘å­—å¡”ï¼ˆDoGï¼‰ã€‘â€‹ å¯¹äºé«˜æ–¯é‡‘å­—å¡”ä¸­çš„æ¯ä¸€ä¸ªå¡”çš„ä¸åŒå±‚ï¼Œå¯ä»¥è®¡ç®—å¾—åˆ°ç›¸é‚»å±‚ä¹‹é—´çš„å·®å€¼ï¼Œä»è€Œå¯ä»¥å¾—åˆ°å·®åˆ†é«˜æ–¯ï¼Œå¯¹é«˜æ–¯é‡‘å­—å¡”ä¸­æ¯ä¸€ä¸ªå¡”éƒ½è¿›è¡ŒåŒæ ·çš„æ“ä½œï¼Œä»è€Œå¾—åˆ°å·®åˆ†é«˜æ–¯é‡‘å­—å¡”ï¼Œå¦‚ä¸‹å›¾å³ä¾§æ‰€ç¤ºï¼Œå³æ˜¾ç¤ºäº†ç”±å·¦ä¾§çš„é«˜æ–¯é‡‘å­—å¡”æ„é€ å¾—åˆ°çš„å·®åˆ†é«˜æ–¯é‡‘å­—å¡”ï¼Œè¯¥å·®åˆ†é«˜æ–¯é‡‘å­—å¡”åŒ…å«2ä¸ªå¡”ï¼Œæ¯ä¸ªå¡”éƒ½æœ‰å››å±‚ å·®åˆ†é«˜æ–¯è¡¨å¾äº†ç›¸é‚»å°ºåº¦çš„é«˜æ–¯å›¾åƒä¹‹å‰çš„å·®åˆ«ï¼Œå¤§å€¼è¡¨ç¤ºåŒºåˆ«å¤§ï¼Œå°å€¼è¡¨ç¤ºåŒºåˆ«å°ï¼Œåç»­çš„ç‰¹å¾ç‚¹æ£€æµ‹éƒ½æ˜¯å·®åˆ†é«˜æ–¯å›¾åƒé‡‘å­—å¡”ä¸­è¿›è¡Œçš„ï¼ ã€å°ºåº¦ç©ºé—´ä¸­ç‰¹å¾ç‚¹çš„æ£€æµ‹ï¼ˆDoGä¸­æå€¼ç‚¹çš„æ£€æµ‹ï¼‰ã€‘ æ„é€ å®Œå°ºåº¦ç©ºé—´ï¼ˆå·®åˆ†é«˜æ–¯é‡‘å­—å¡”ï¼‰åï¼Œæ¥ä¸‹æ¥çš„ä»»åŠ¡å°±æ˜¯â€œåœ¨å°ºåº¦ä¸­é—´ä¸­æ£€æµ‹å‡ºå›¾åƒä¸­çš„ç¨³å®šç‰¹å¾ç‚¹â€. â€‹ å¯¹äºDoGä¸­æ¯ä¸€ä¸ªé‡‡æ ·ç‚¹ï¼ˆæ¯ä¸€ä¸ªOctaveä¸­æ¯ä¸€å±‚ï¼‰ï¼Œå°†å…¶ä¸å®ƒé‚»åŸŸå†…æ‰€æœ‰åƒç´ ç‚¹ï¼ˆ8+18&#x3D;26ï¼‰è¿›è¡Œæ¯”è¾ƒï¼Œåˆ¤æ–­å…¶æ˜¯å¦ä¸ºå±€éƒ¨æå€¼ç‚¹ï¼ˆæå¤§æˆ–è€…æå°ï¼‰ï¼Œæ›´åŠ å…·ä½“åœ°ï¼šå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸­é—´çš„æ£€æµ‹ç‚¹å’Œå®ƒåŒå°ºåº¦çš„8ä¸ªç›¸é‚»ç‚¹å’Œä¸Šä¸‹ç›¸é‚»å°ºåº¦å¯¹åº”çš„9Ã—2ä¸ªç‚¹å…±26ä¸ªç‚¹æ¯”è¾ƒï¼Œä»¥ç¡®ä¿åœ¨å°ºåº¦ç©ºé—´å’ŒäºŒç»´å›¾åƒç©ºé—´éƒ½æ£€æµ‹åˆ°æå€¼ç‚¹ã€‚ ä¸€ä¸ªç‚¹å¦‚æœåœ¨DOGå°ºåº¦ç©ºé—´æœ¬å±‚ä»¥åŠä¸Šä¸‹ä¸¤å±‚çš„26ä¸ªé¢†åŸŸä¸­æ˜¯æœ€å¤§æˆ–æœ€å°å€¼æ—¶ï¼Œå°±è®¤ä¸ºè¯¥ç‚¹æ˜¯å›¾åƒåœ¨è¯¥å°ºåº¦ä¸‹çš„ä¸€ä¸ªç‰¹å¾ç‚¹ã€‚ä½†è¦æ³¨æ„ï¼šè¿™ç§ç›¸é‚»å±‚ä¹‹é—´çš„æå€¼ç‚¹çš„å¯»æ‰¾æ˜¯åœ¨åŒä¸€Octaveä¸­çš„ç›¸é‚»å°ºåº¦ä¹‹é—´è¿›è¡Œå¯»æ‰¾çš„ï¼Œè€Œä¸è¦è·¨ç»„ï¼ åŒæ—¶ï¼Œåº”è¯¥æ³¨æ„åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨æå€¼æ¯”è¾ƒçš„è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸€Octaveå›¾åƒçš„é¦–æœ«ä¸¤å±‚æ˜¯æ— æ³•è¿›è¡Œæå€¼æ¯”è¾ƒçš„ï¼Œä¸ºäº†æ»¡è¶³å°ºåº¦å˜åŒ–çš„è¿ç»­æ€§ï¼Œéœ€è¦è¿›è¡Œä¸€äº›ä¿®æ­£ï¼šåœ¨é«˜æ–¯é‡‘å­—å¡”ä¸­ç”ŸæˆS+3å±‚å›¾åƒï¼Œå…·ä½“è§£é‡Šå¦‚ä¸‹ï¼šå‡è®¾s&#x3D;3ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªå¡”é‡Œæœ‰3å±‚ï¼Œåˆ™k&#x3D;21&#x2F;s&#x3D;21&#x2F;3ï¼š é‚£ä¹ˆæŒ‰ç…§ä¸Šå›¾å¯å¾—Gauss Spaceå’ŒDoG space åˆ†åˆ«æœ‰3ä¸ªï¼ˆsä¸ªï¼‰å’Œ2ä¸ªï¼ˆs-1ä¸ªï¼‰åˆ†é‡ï¼Œåœ¨DoG spaceä¸­ï¼Œ1st-octaveä¸¤é¡¹åˆ†åˆ«æ˜¯Ïƒ,kÏƒ; 2nd-octaveä¸¤é¡¹åˆ†åˆ«æ˜¯2Ïƒ,2kÏƒ; ç”±äºæ— æ³•æ¯”è¾ƒæå€¼ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨é«˜æ–¯ç©ºé—´ç»§ç»­æ·»åŠ é«˜æ–¯æ¨¡ç³Šé¡¹ï¼Œä½¿å¾—DoGä¸­ç¬¬ä¸€ä¸ªOctaveå½¢æˆÏƒ,kÏƒ,k2Ïƒ,k3Ïƒ,k4Ïƒï¼Œè¿™æ ·å°±å¯ä»¥é€‰æ‹©ä¸­é—´ä¸‰é¡¹kÏƒ,k2Ïƒ,k3Ïƒï¼ˆåªæœ‰å·¦å³éƒ½æœ‰æ‰èƒ½æœ‰æå€¼ï¼‰ï¼›é‚£ä¹ˆä¸‹ä¸€octaveä¸­ï¼ˆç”±ä¸Šä¸€å±‚é™é‡‡æ ·è·å¾—ï¼‰æ‰€å¾—ä¸‰é¡¹å³ä¸º2kÏƒ,2k2Ïƒ,2k3Ïƒï¼Œå…¶é¦–é¡¹2kÏƒ&#x3D;24&#x2F;3ã€‚åˆšå¥½ä¸ä¸Šä¸€octaveæœ«é¡¹k3Ïƒ&#x3D;23&#x2F;3å°ºåº¦å˜åŒ–è¿ç»­èµ·æ¥ï¼Œæ‰€ä»¥æ¯æ¬¡è¦åœ¨Gaussian spaceæ·»åŠ 3é¡¹ï¼Œæ¯ç»„ï¼ˆå¡”ï¼‰å…±S+3å±‚å›¾åƒï¼Œç›¸åº”çš„DoGé‡‘å­—å¡”æœ‰S+2å±‚å›¾åƒã€‚ å…³é”®ç‚¹ä½ç½®åŠå°ºåº¦ç¡®å®šâ€‹ é€šè¿‡æ‹Ÿå’Œâ€œä¸‰ç»´äºŒæ¬¡å‡½æ•°â€å¯ä»¥ç²¾ç¡®ç¡®å®šå…³é”®ç‚¹çš„ä½ç½®å’Œå°ºåº¦ï¼ˆè¾¾åˆ°äºšåƒç´ ç²¾åº¦ï¼‰ï¼Œå…·ä½“æ–¹æ³•è¿˜æœªçŸ¥ï¼Œå¯ä»¥å¾—åˆ°ä¸€ç³»åˆ—çš„SIFTå€™é€‰ç‰¹å¾ç‚¹é›†åˆï¼Œä½†ç”±äºè¿™äº›å…³é”®ç‚¹ä¸­æœ‰äº›å…·æœ‰è¾ƒä½çš„å¯¹æ¯”å¯¹ï¼Œæœ‰äº›è¾“å±äºä¸ç¨³å®šçš„è¾¹ç¼˜å“åº”ç‚¹(å› ä¸ºDoGç®—å­ä¼šäº§ç”Ÿè¾ƒå¼ºçš„è¾¹ç¼˜å“åº”)ï¼Œæ‰€ä»¥ï¼Œä¸ºäº†å¢å¼ºåŒ¹é…ç¨³å®šæ€§ã€æé«˜æŠ—å™ªå£°èƒ½åŠ›ï¼Œåº”è¯¥å°†è¿™2ç±»å…³é”®ç‚¹å»é™¤ï¼Œå®ç°å¯¹å€™é€‰SIFTç‰¹å¾ç‚¹é›†åˆçš„è¿›ä¸€æ­¥å‡€åŒ–ï¼š å‰”é™¤å¯¹æ¯”åº¦ä½çš„ç‚¹ å‰”é™¤è¾¹ç¼˜ç‚¹ å…³é”®ç‚¹æ–¹å‘ç¡®å®š ç®—å…³é”®ç‚¹çš„æ–¹å‘ï¼Œéœ€è¦åˆ©ç”¨ä»¥è¯¥å…³é”®ç‚¹ä¸ºä¸­å¿ƒçš„æŸé‚»åŸŸçª—å£å†…æ‰€æœ‰åƒç´ ç‚¹çš„æ¢¯åº¦åˆ†å¸ƒç‰¹æ€§ï¼ˆç›®çš„æ˜¯ä¸ºäº†ä½¿çš„siftç®—å­å…·å¤‡æ—‹è½¬ä¸å˜æ€§ï¼‰ï¼Œæ‰€ä»¥ï¼Œä¸‹é¢é¦–å…ˆç»™å‡ºè®¡ç®—å°ºåº¦ç©ºé—´ä¸­æ¯ä¸ªåƒç´ ç‚¹çš„æ¢¯åº¦æ¨¡å€¼å’Œæ–¹å‘çš„æ–¹æ³•ï¼ŒæŒ‰ç…§ä¸‹é¢å…¬å¼è®¡ç®— å…¶ä¸­Læ‰€ç”¨çš„å°ºåº¦ä¸ºæ¯ä¸ªå…³é”®ç‚¹å„è‡ªæ‰€åœ¨çš„å°ºåº¦ã€‚ æ¥ä¸‹æ¥ï¼Œå¯¹äºæ¯ä¸ªå…³é”®ç‚¹ï¼ˆå‡è®¾å°ºåº¦ä¸ºsigmaï¼‰ï¼Œåˆ©ç”¨ç›´æ–¹å›¾ç»Ÿè®¡å…¶ç›¸é‚»çª—å£å†…çš„åƒç´ çš„æ¢¯åº¦åˆ†å¸ƒï¼Œä»è€Œï¼Œç¡®å®šè¯¥å…³é”®ç‚¹çš„æ–¹å‘ï¼Œå…·ä½“æ–¹æ³•å¦‚ä¸‹ï¼š åˆ†åˆ«è®¡ç®—ä»¥è¯¥å…³é”®ç‚¹ä¸ºä¸­å¿ƒçš„ç›¸é‚»çª—å£ä¸­åƒç´ ç‚¹çš„æ¢¯åº¦æ–¹å‘å’Œæ¨¡å€¼. ä¸ºè¯¥çª—å£å†…æ¯ä¸€ä¸ªåƒç´ ç‚¹èµ‹äºˆä¸€ä¸ªæƒå€¼ï¼šç”±æ¯ä¸ªåƒç´ ç‚¹å¯¹åº”çš„æ¢¯åº¦æ¨¡å€¼å’Œä»¥å…³é”®ç‚¹ä¸ºä¸­å¿ƒå°ºåº¦ä¸º1.5sigmaçš„é«˜æ–¯æ ¸å†³å®š è®¾å®šæŸç§è§„åˆ™ï¼Œå¼€å§‹ç»Ÿè®¡ç›´æ–¹å›¾ï¼Œä¾‹å¦‚ï¼Œè¿™é‡Œå°†æ–¹å‘ï¼ˆ0~360Â°ï¼‰åˆ†ä¸º8ä»½ï¼Œé‚£ä¹ˆï¼Œæ¢¯åº¦æ–¹å‘ç›´æ–¹å›¾å°†æœ‰8ä¸ªæŸ±ï¼Œçª—å£å†…æ¯ä¸ªåƒç´ åˆ°åº•å±äºå“ªä¸ªæŸ±ç”±è¯¥åƒç´ ç‚¹çš„æ¢¯åº¦æ–¹å‘ç¡®å®šï¼ˆè§ä¸‹å›¾å³ä¾§å­å›¾æ‰€ç¤ºï¼‰ åœ¨è¯¥å…³é”®ç‚¹å¯¹åº”çš„æ¢¯åº¦æ–¹å‘ç›´æ–¹å›¾ä¸­ï¼Œæ‰¾åˆ°åŒ…å«åƒç´ ç‚¹æœ€å¤šçš„é‚£ä¸ªæ–¹å‘ä½œä¸ºè¯¥å…³é”®ç‚¹çš„æ–¹å‘ï¼Œå¯¹äºä¸Šå›¾è€Œè¨€ï¼Œæ–¹å‘è§’(0.25Ï€,0.5Ï€)è¿™ä¸ªåŒºé—´å†…çš„åƒç´ ç‚¹æœ€å¤šï¼Œæ‰€ä»¥ï¼Œä»¥(0.25Ï€+0.5Ï€)&#x2F;2 &#x3D; 0.375Ï€ä½œä¸ºè¯¥å…³é”®ç‚¹çš„æ–¹å‘ ã€‚ è‡³æ­¤ï¼Œå¾—åˆ°äº†å›¾åƒä¸­æ‰€æœ‰å…³é”®ç‚¹çš„æ–¹å‘ï¼å®é™…ä¸Šï¼Œå…³é”®ç‚¹æ–¹å‘çš„ç¡®å®šæ˜¯ä¸ºäº†æ¥ä¸‹æ¥çš„ç‰¹å¾å‘é‡ç”Ÿæˆä¸­çš„åæ ‡æ—‹è½¬ä½¿ç”¨çš„ï¼ ç‰¹å¾å‘é‡ç”Ÿæˆä¸Šé¢åªæ˜¯å¾—åˆ°äº†æ¯ä¸ªå…³é”®ç‚¹çš„æ–¹å‘ï¼Œæ¥ä¸‹æ¥ï¼Œéœ€è¦ç¡®å®šæ¯ä¸ªå…³é”®ç‚¹çš„ç‰¹å¾å‘é‡ï¼Œå…·ä½“æ–¹å¼å¦‚ä¸‹ï¼š å°†åæ ‡è½´æ—‹è½¬åˆ°å…³é”®ç‚¹çš„æ–¹å‘ å¯¹äºæŸä¸€ä¸ªå…³é”®ç‚¹ï¼Œå–å…¶å‘¨å›´çª—å£ï¼Œå¦‚ä¸‹å›¾ç»¿è‰²åŒºåŸŸæ‰€ç¤ºï¼Œå…¶ä¸­ï¼Œçª—å£å†…æ¯ä¸ªå°çŸ©å½¢æ¡†ä¸ºä¸€ä¸ªåƒç´ ï¼Œç®­å¤´è¡¨ç¤ºè¯¥åƒç´ ä½ç½®çš„æ¢¯åº¦æ–¹å‘å’Œæ¨¡å€¼ åœ¨è¯¥$88$çª—å£å¯¹åº”çš„4ä¸ªï¼ˆç§°ä¸º4ä¸ªç§å­ç‚¹ï¼‰$44$çš„å°å—å„¿ä¸Šï¼Œåˆ†åˆ«è®¡ç®—è¯¥å°å—å„¿åŒ…å«çš„16ä¸ªåƒç´ ç‚¹çš„æ¢¯åº¦ç›´æ–¹å›¾ï¼ˆ8ä¸ªæŸ±ï¼‰ï¼Œå¹¶è¿›è¡Œç´¯åŠ ï¼ˆæ¯ä¸ªæŸ±å¯¹åº”çš„æ‰€æœ‰åƒç´ ç‚¹çš„æ¢¯åº¦æ¨¡å€¼ç´¯åŠ ï¼‰ï¼Œæ¯ä¸ªå°å—å„¿å¯ä»¥å¾—åˆ°8ä¸ªç‰¹å¾ï¼ˆ8ä¸ªæ–¹å‘å¯¹åº”çš„æ¨¡å€¼çš„ç´¯åŠ ï¼‰ï¼Œä»è€Œï¼Œ4ä¸ªç§å­ç‚¹å°†å¾—åˆ°å…³é”®ç‚¹çš„4*8&#x3D;32ä¸ªç‰¹å¾ï¼Œå¦‚ä¸‹å›¾å³ä¾§æ‰€ç¤ºï¼Œ4ä¸ªç§å­ç‚¹ï¼Œæ¯ä¸ªç§å­ç‚¹äº§ç”Ÿ8ä¸ªç‰¹å¾ . å®é™…ä¸­ï¼ŒLoweå»ºè®®ä½¿ç”¨$44$ä¸ªå­å—å„¿ï¼ˆç§°ä¸º16ä¸ªç§å­ç‚¹ï¼‰è¿›è¡Œç‰¹å¾è®¡ç®—ï¼Œé‚£ä¹ˆï¼Œæ¯ä¸ªå…³é”®ç‚¹å°†å…·æœ‰16*8&#x3D;128ä¸ªç‰¹å¾ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ­¤æ—¶ï¼Œéœ€è¦åœ¨ç‰¹å¾ç‚¹å‘¨å›´å–$1616$çš„çª—å£ï¼Œåˆ†å‰²ä¸º$4*4$ä¸ªå­å—å„¿ï¼ˆè¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†å¢å¼ºåç»­åŒ¹é…çš„ç¨³å¥æ€§ï¼‰ã€‚ è‡³æ­¤ï¼Œå…³é”®ç‚¹ç‰¹å¾å‘é‡å®Œå…¨ç¡®å®šï¼æ­¤æ—¶SIFTç‰¹å¾å‘é‡å·²ç»å»é™¤äº†å°ºåº¦å˜åŒ–ã€æ—‹è½¬ç­‰å‡ ä½•å˜å½¢å› ç´ çš„å½±å“ï¼Œå†ç»§ç»­å°†ç‰¹å¾å‘é‡çš„é•¿åº¦å½’ä¸€åŒ–ï¼Œåˆ™å¯ä»¥è¿›ä¸€æ­¥å»é™¤å…‰ç…§å˜åŒ–çš„å½±å“ã€‚ ç‰¹å¾åŒ¹é…ç°æœ‰Aã€Bä¸¤å¹…å›¾åƒï¼Œåˆ†åˆ«åˆ©ç”¨ä¸Šé¢çš„æ–¹æ³•ä»å„å¹…å›¾åƒä¸­æå–åˆ°äº†k1ä¸ªsiftç‰¹å¾ç‚¹å’Œk2ä¸ªç‰¹å¾ç‚¹åŠå…¶å¯¹åº”çš„ç‰¹å¾æè¿°å­ï¼Œå³$k1128$ç»´å’Œ$k2128$ç»´çš„ç‰¹å¾ï¼Œç°åœ¨éœ€è¦å°†ä¸¤å›¾ä¸­å„ä¸ªscaleï¼ˆæ‰€æœ‰scaleï¼‰çš„æè¿°å­è¿›è¡ŒåŒ¹é…ã€‚ æ¥ä¸‹æ¥é‡‡ç”¨å…³é”®ç‚¹ç‰¹å¾å‘é‡çš„æ¬§å¼è·ç¦»æ¥ä½œä¸ºä¸¤å¹…å›¾åƒä¸­å…³é”®ç‚¹çš„ç›¸ä¼¼æ€§åˆ¤å®šåº¦é‡ã€‚ å–å›¾åƒAä¸­çš„æŸä¸ªå…³é”®ç‚¹ï¼Œå¹¶æ‰¾å‡ºå…¶ä¸å›¾åƒBä¸­æ¬§å¼è·ç¦»æœ€è¿‘çš„å‰ä¸¤ä¸ªå…³é”®ç‚¹ åœ¨è¿™ä¸¤ä¸ªå…³é”®ç‚¹ä¸­ï¼Œå¦‚æœæœ€è¿‘çš„è·ç¦»é™¤ä»¥æ¬¡è¿‘çš„è·ç¦»å°‘äºæŸä¸ªæ¯”ä¾‹é˜ˆå€¼ï¼Œåˆ™æ¥å—è¿™ä¸€å¯¹åŒ¹é…ç‚¹ã€‚é™ä½è¿™ä¸ªæ¯”ä¾‹é˜ˆå€¼ï¼ŒSIFTåŒ¹é…ç‚¹æ•°ç›®ä¼šå‡å°‘ï¼Œä½†æ›´åŠ ç¨³å®šã€‚ åˆ©ç”¨2ä¸ªè¿‘é‚»ç‚¹æ¯”è¾ƒçš„ç›®çš„æ˜¯ä¸ºäº†æ’é™¤å› ä¸ºå›¾åƒé®æŒ¡å’ŒèƒŒæ™¯æ··ä¹±è€Œäº§ç”Ÿçš„æ— åŒ¹é…å…³ç³»çš„å…³é”®ç‚¹ï¼Œæ‰€ä»¥Loweæå‡ºäº†æ¯”è¾ƒæœ€è¿‘é‚»è·ç¦»ä¸æ¬¡è¿‘é‚»è·ç¦»çš„æ–¹æ³•,è·ç¦»æ¯”ç‡ratioå°äºæŸä¸ªé˜ˆå€¼çš„è®¤ä¸ºæ˜¯æ­£ç¡®åŒ¹é…ã€‚å› ä¸ºå¯¹äºé”™è¯¯åŒ¹é…,ç”±äºç‰¹å¾ç©ºé—´çš„é«˜ç»´æ€§,ç›¸ä¼¼çš„è·ç¦»å¯èƒ½æœ‰å¤§é‡å…¶ä»–çš„é”™è¯¯åŒ¹é…,ä»è€Œå®ƒçš„ratioå€¼æ¯”è¾ƒé«˜ã€‚Loweæ¨èratioçš„é˜ˆå€¼ä¸º0.8ã€‚ä½†ä½œè€…å¯¹å¤§é‡ä»»æ„å­˜åœ¨å°ºåº¦ã€æ—‹è½¬å’Œäº®åº¦å˜åŒ–çš„ä¸¤å¹…å›¾ç‰‡è¿›è¡ŒåŒ¹é…ï¼Œç»“æœè¡¨æ˜ratioå–å€¼åœ¨0. 4~0. 6ä¹‹é—´æœ€ä½³ï¼Œå°äº0. 4çš„å¾ˆå°‘æœ‰åŒ¹é…ç‚¹ï¼Œå¤§äº0. 6çš„åˆ™å­˜åœ¨å¤§é‡é”™è¯¯åŒ¹é…ç‚¹ã€‚(å¦‚æœè¿™ä¸ªåœ°æ–¹ä½ è¦æ”¹è¿›ï¼Œæœ€å¥½ç»™å‡ºä¸€ä¸ªåŒ¹é…ç‡å’Œrationä¹‹é—´çš„å…³ç³»å›¾ï¼Œè¿™æ ·æ‰æœ‰è¯´æœåŠ›)ï¼Œä½œè€…å»ºè®®ratioçš„å–å€¼åŸåˆ™å¦‚ä¸‹: ratio&#x3D;0. 4 å¯¹äºå‡†ç¡®åº¦è¦æ±‚é«˜çš„åŒ¹é…ï¼› ratio&#x3D;0. 6 å¯¹äºåŒ¹é…ç‚¹æ•°ç›®è¦æ±‚æ¯”è¾ƒå¤šçš„åŒ¹é…ï¼› ratio&#x3D;0. 5 ä¸€èˆ¬æƒ…å†µä¸‹ã€‚ ä¹Ÿå¯æŒ‰å¦‚ä¸‹åŸåˆ™: å½“æœ€è¿‘é‚»è·ç¦»&lt;200æ—¶ï¼Œratio&#x3D;0. 6ï¼›åä¹‹ï¼Œratio&#x3D;0. 4ã€‚ratioçš„å–å€¼ç­–ç•¥èƒ½æ’åˆ†é”™è¯¯åŒ¹é…ç‚¹ã€‚ æ€»ç»“ å°ºåº¦ç©ºé—´çš„æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡ä¸åŒåˆ†è¾¨ç‡çœ‹åŒä¸€ä¸ªå›¾åƒï¼Œå¯é€šè¿‡ä¸åŒå°ºåº¦çš„é«˜æ–¯å‡½æ•°ä¸åŸå§‹å›¾åƒå·ç§¯å®ç° æå¤§å€¼ç‚¹çš„ç²¾ç¡®å®šä½å¯é€šè¿‡è§£å«æœ‰äºŒé˜¶å¯»æ•°é¡¹çš„æ–¹ç¨‹å¾—åˆ° å€ŸåŠ©åœ¨å…³é”®ç‚¹é™„è¿‘åŒºåŸŸçš„æ¢¯åº¦æ–¹å‘ç»Ÿè®¡ä¸ç›´æ–¹å›¾ç”Ÿæˆï¼ŒSIFTæœ€ç»ˆå¯å¾—åˆ°å¯¹åº”æ¯ä¸ªå…³é”®ç‚¹çš„128ç»´å‘é‡æè¿°ã€‚ ä»£ç å®ä¾‹123456789101112131415161718192021222324252627#!/usr/bin/env python# -*- coding: utf-8 -*-# @Time : 2019/1/18 22:04# @Author : Seven# @File : surfDemo.py# @Software: PyCharmimport cv2import numpy as npimg1 = cv2.imread(&#x27;csdn.png&#x27;)img2 = np.rot90(img1)# ç‰¹å¾ç‚¹æ£€æµ‹å’Œæå–ç‰¹å¾ç‚¹æè¿°å­surf = cv2.xfeatures2d.SURF_create(50)kp1, des1 = surf.detectAndCompute(img1, None)kp2, des2 = surf.detectAndCompute(img2, None)# åˆ›å»º BFMatcher å¯¹è±¡bf = cv2.BFMatcher(cv2.NORM_L2)# æ ¹æ®æè¿°å­åŒ¹é…ç‰¹å¾ç‚¹.matches = bf.match(des1, des2)# ç”»å‡º50ä¸ªåŒ¹é…ç‚¹img3 = cv2.drawMatches(img1, kp1, img2, kp2, matches[:50], None, flags=2)cv2.imshow(&quot;img&quot;, img3)cv2.waitKey(0)","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"https://aicc-cn.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"https://aicc-cn.github.io/tags/OpenCV/"}],"author":"Seven"},{"title":"ã€åã€‘Harrisè§’ç‚¹æ£€æµ‹","slug":"2019-03-10-cv-image_harris","date":"2019-03-21T16:00:00.000Z","updated":"2022-03-25T13:51:38.787Z","comments":true,"path":"2019/03/22/2019-03-10-cv-image_harris/","link":"","permalink":"https://aicc-cn.github.io/2019/03/22/2019-03-10-cv-image_harris/","excerpt":"","text":"Harrisè§’ç‚¹æ£€æµ‹ã€åŸç†ã€‘ äººçœ¼å¯¹è§’ç‚¹çš„è¯†åˆ«é€šå¸¸æ˜¯åœ¨ä¸€ä¸ªå±€éƒ¨çš„å°åŒºåŸŸæˆ–å°çª—å£å®Œæˆçš„ã€‚å¦‚æœåœ¨å„ä¸ªæ–¹å‘ä¸Šç§»åŠ¨è¿™ä¸ªç‰¹å¾çš„å°çª—å£ï¼Œçª—å£å†…åŒºåŸŸçš„ç°åº¦å‘ç”Ÿäº†è¾ƒå¤§çš„å˜åŒ–ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºåœ¨çª—å£å†…é‡åˆ°äº†è§’ç‚¹ã€‚å¦‚æœè¿™ä¸ªç‰¹å®šçš„çª—å£åœ¨å›¾åƒå„ä¸ªæ–¹å‘ä¸Šç§»åŠ¨æ—¶ï¼Œçª—å£å†…å›¾åƒçš„ç°åº¦æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆçª—å£å†…å°±ä¸å­˜åœ¨è§’ç‚¹ï¼›å¦‚æœçª—å£åœ¨æŸä¸€ä¸ªæ–¹å‘ç§»åŠ¨æ—¶ï¼Œçª—å£å†…å›¾åƒçš„ç°åº¦å‘ç”Ÿäº†è¾ƒå¤§çš„å˜åŒ–ï¼Œè€Œåœ¨å¦ä¸€äº›æ–¹å‘ä¸Šæ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆï¼Œçª—å£å†…çš„å›¾åƒå¯èƒ½å°±æ˜¯ä¸€æ¡ç›´çº¿çš„çº¿æ®µã€‚ åœ¨ç°åº¦å˜åŒ–å¹³ç¼“åŒºåŸŸï¼Œçª—å£å†…åƒç´ ç°åº¦ç§¯åˆ†è¿‘ä¼¼ä¿æŒä¸å˜ åœ¨ è¾¹ç¼˜åŒºåŸŸï¼Œè¾¹ç¼˜æ–¹å‘ï¼šç°åº¦ç§¯åˆ†è¿‘ä¼¼ä¸å˜ï¼Œ å…¶ä½™ä»»æ„æ–¹å‘ï¼šå‰§çƒˆå˜åŒ–ã€‚ åœ¨è§’ç‚¹å‡ºï¼šä»»æ„æ–¹å‘å‰§çƒˆå˜åŒ–ã€‚ ã€æ•°å­¦æ¨å¯¼ã€‘ å®šä¹‰ç°åº¦ç§¯åˆ†å˜åŒ– å®šä¹‰ç°åº¦ç§¯åˆ†å˜åŒ– å¦‚æœ$uã€v$å¾ˆå°ï¼Œ åˆ™æœ‰ï¼š å…¶ä¸­ æ³¨æ„$E$æ˜¯ä¸€ä¸ªäºŒæ¬¡å‹ï¼Œå³ï¼š $\\lambda_1^{-\\frac12}ã€\\lambda_2^{-\\frac12}$æ˜¯æ¤­åœ†çš„é•¿çŸ­è½´ å½“$\\lambda_1ã€\\lambda_2$éƒ½æ¯”è¾ƒå°æ—¶ï¼Œç‚¹(x, y)å¤„äºç°åº¦å˜åŒ–å¹³ç¼“åŒºåŸŸ. å½“$\\lambda_1&gt;\\lambda_2$æˆ–è€…$\\lambda_1&lt;\\lambda_2$æ—¶ï¼Œç‚¹(x, y)ä¸ºè¾¹ç•Œå…ƒç´ . å½“$\\lambda_1ã€\\lambda_2$éƒ½æ¯”è¾ƒå¤§æ—¶ï¼Œä¸”è¿‘ä¼¼ç›¸ç­‰ï¼Œç‚¹(x, y)ä¸ºè§’ç‚¹. è§’ç‚¹å“åº”å‡½æ•° å½“Ræ¥è¿‘äºé›¶æ—¶ï¼Œå¤„äºç°åº¦å˜åŒ–å¹³ç¼“åŒºåŸŸ å½“R&lt;0æ—¶ï¼Œç‚¹ä¸ºè¾¹ç•Œåƒç´  å½“R&gt;0æ—¶ï¼Œç‚¹ä¸ºè§’ç‚¹ ä»£ç å®ä¾‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105#!/usr/bin/env python# -*- coding: utf-8 -*-# @Time : 2019/1/18 18:51# @Author : Seven# @File : HarrisDemo.py# @Software: PyCharmimport cv2import numpy as npimg = cv2.imread(&#x27;chess.png&#x27;)img = cv2.pyrDown(img)cv2.imshow(&#x27;source&#x27;, img)def harrisDemo(img): &quot;&quot;&quot; cornerHarris(src, blockSize, ksize, k, dst=None, borderType=None) srcï¼Œè¾“å…¥å›¾åƒï¼Œå³æºå›¾åƒï¼Œå¡«Matç±»çš„å¯¹è±¡å³å¯ï¼Œä¸”éœ€ä¸ºå•é€šé“8ä½æˆ–è€…æµ®ç‚¹å‹å›¾åƒã€‚ dstï¼Œå‡½æ•°è°ƒç”¨åçš„è¿ç®—ç»“æœå­˜åœ¨è¿™é‡Œï¼Œå³è¿™ä¸ªå‚æ•°ç”¨äºå­˜æ”¾Harrisè§’ç‚¹æ£€æµ‹çš„è¾“å‡ºç»“æœï¼Œå’Œæºå›¾ç‰‡æœ‰ä¸€æ ·çš„å°ºå¯¸å’Œç±»å‹ã€‚ blockSizeï¼Œè¡¨ç¤ºé‚»åŸŸçš„å¤§å°ï¼Œæ›´å¤šçš„è¯¦ç»†ä¿¡æ¯åœ¨cornerEigenValsAndVecsä¸­æœ‰è®²åˆ°ã€‚ ksizeï¼Œè¡¨ç¤ºSobel()ç®—å­çš„å­”å¾„å¤§å°ã€‚ kï¼ŒHarris è§’ç‚¹æ£€æµ‹æ–¹ç¨‹ä¸­çš„è‡ªç”±å‚æ•°ï¼Œå–å€¼å‚æ•°ä¸º[0,04ï¼Œ0.06] borderTypeï¼Œå›¾åƒåƒç´ çš„è¾¹ç•Œæ¨¡å¼ï¼Œæ³¨æ„å®ƒæœ‰é»˜è®¤å€¼BORDER_DEFAULTã€‚æ›´è¯¦ç»†çš„è§£é‡Šï¼Œå‚è€ƒborderInterpolateå‡½æ•°ã€‚ :param img: :return: &quot;&quot;&quot; grayImage = np.float32(cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)) # è¾“å…¥å›¾åƒå¿…é¡»æ˜¯float32ï¼Œæœ€åä¸€ä¸ªå‚æ•°åœ¨0.04 åˆ°0.05 ä¹‹é—´ # harrisè§’ç‚¹æ£€æµ‹ harrisImg = cv2.cornerHarris(grayImage, 2, 3, 0.04) # è†¨èƒ€ dst = cv2.dilate(harrisImg, None) # 0.01æ˜¯äººä¸ºè®¾å®šçš„é˜ˆå€¼ # æŠŠè§’ç‚¹è®¾ä¸ºçº¢è‰² img[dst &gt; 0.01 * dst.max()] = [0, 0, 255] cv2.imshow(&#x27;harris&#x27;, img)def harrisSubPix(img): &quot;&quot;&quot; cornerSubPix(image, corners, winSize, zeroZone, criteria) imageï¼šè¾“å…¥å›¾åƒ cornersï¼šè¾“å…¥è§’ç‚¹çš„åˆå§‹åæ ‡ä»¥åŠç²¾å‡†åŒ–åçš„åæ ‡ç”¨äºè¾“å‡ºã€‚ winSizeï¼šæœç´¢çª—å£è¾¹é•¿çš„ä¸€åŠï¼Œä¾‹å¦‚å¦‚æœwinSize=Size(5,5)ï¼Œåˆ™ä¸€ä¸ªå¤§å°ä¸º(5*2+1)*(5*2+1)=11*11çš„æœç´¢çª—å£å°†è¢«ä½¿ç”¨ã€‚ zeroZoneï¼šæœç´¢åŒºåŸŸä¸­é—´çš„dead regionè¾¹é•¿çš„ä¸€åŠï¼Œæœ‰æ—¶ç”¨äºé¿å…è‡ªç›¸å…³çŸ©é˜µçš„å¥‡å¼‚æ€§ã€‚å¦‚æœå€¼è®¾ä¸º(-1,-1)åˆ™è¡¨ç¤ºæ²¡æœ‰è¿™ä¸ªåŒºåŸŸã€‚ criteriaï¼šè§’ç‚¹ç²¾å‡†åŒ–è¿­ä»£è¿‡ç¨‹çš„ç»ˆæ­¢æ¡ä»¶ã€‚ä¹Ÿå°±æ˜¯å½“è¿­ä»£æ¬¡æ•°è¶…è¿‡criteria.maxCountï¼Œæˆ–è€…è§’ç‚¹ä½ç½®å˜åŒ–å°äºcriteria.epsilonæ—¶ï¼Œåœæ­¢è¿­ä»£è¿‡ç¨‹ã€‚ :param img: :return: &quot;&quot;&quot; gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY) # harrisè§’ç‚¹æ£€æµ‹ gray = np.float32(gray) dst = cv2.cornerHarris(gray, 2, 3, 0.04) dst = cv2.dilate(dst, None) ret, dst = cv2.threshold(dst, 0.01 * dst.max(), 255, 0) dst = np.uint8(dst) # è·å–è´¨å¿ƒåæ ‡-centroids æ˜¯æ¯ä¸ªåŸŸçš„è´¨å¿ƒåæ ‡ ret, labels, stats, centroids = cv2.connectedComponentsWithStats(dst) # è®¾ç½®åœæ­¢å’Œè½¬æ¢æ¡ä»¶ criteria = (cv2.TERM_CRITERIA_EPS + cv2.TERM_CRITERIA_MAX_ITER, 100, 0.001) corners = cv2.cornerSubPix(gray, np.float32(centroids), (5, 5), (-1, -1), criteria) # Now draw them res = np.hstack((centroids, corners)) res = np.int0(res) img[res[:, 1], res[:, 0]] = [0, 0, 255] img[res[:, 3], res[:, 2]] = [0, 255, 0] cv2.imshow(&#x27;SubPix&#x27;, img)def harrisImage(img): grayImage = np.float32(cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)) # è¾“å…¥å›¾åƒå¿…é¡»æ˜¯float32ï¼Œæœ€åä¸€ä¸ªå‚æ•°åœ¨0.04 åˆ°0.05 ä¹‹é—´ # harrisè§’ç‚¹æ£€æµ‹ harrisImg = cv2.cornerHarris(grayImage, 2, 3, 0.04) # è†¨èƒ€ dst = cv2.dilate(harrisImg, None) # å¯¹è§’ç‚¹å›¾åƒè¿›è¡Œé˜ˆå€¼åŒ– ret, dst = cv2.threshold(dst, 0.01 * dst.max(), 255, 0) # è½¬æ¢ä¸º8ä½å›¾åƒ dst = np.uint8(dst) # è·å–è´¨å¿ƒåæ ‡-centroids æ˜¯æ¯ä¸ªåŸŸçš„è´¨å¿ƒåæ ‡ ret, labels, stats, centroids = cv2.connectedComponentsWithStats(dst) criteria = (cv2.TERM_CRITERIA_EPS + cv2.TERM_CRITERIA_MAX_ITER, 100, 0.001) # è®¡ç®—å¾—å‡ºè§’ç‚¹åæ ‡ corners = cv2.cornerSubPix(grayImage, np.float32(centroids), (5, 5), (-1, -1), criteria) # å¯¹æ‰€æœ‰è§’ç‚¹ç”¨0åœˆå‡ºæ¥ for point in corners: cv2.circle(img, tuple(point), 5, (0, 0, 255), 2) cv2.imshow(&#x27;harris-2&#x27;, img)harrisDemo(img)harrisSubPix(img)harrisImage(img)cv2.waitKey(0)","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"https://aicc-cn.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"https://aicc-cn.github.io/tags/OpenCV/"}],"author":"Seven"},{"title":"ã€åäºŒã€‘ORBè§’ç‚¹æ£€æµ‹","slug":"2019-03-12-cv-image_orb","date":"2019-03-21T16:00:00.000Z","updated":"2022-03-25T13:51:51.139Z","comments":true,"path":"2019/03/22/2019-03-12-cv-image_orb/","link":"","permalink":"https://aicc-cn.github.io/2019/03/22/2019-03-12-cv-image_orb/","excerpt":"","text":"ORBè§’ç‚¹æ£€æµ‹ã€ç®€ä»‹ã€‘ ORBï¼ˆOriented FAST and Rotated BRIEFï¼‰æ˜¯ä¸€ç§å¿«é€Ÿç‰¹å¾ç‚¹æå–å’Œæè¿°çš„ç®—æ³•ã€‚ è¿™ä¸ªç®—æ³•æ˜¯ç”±Ethan Rublee, Vincent Rabaud, Kurt Konoligeä»¥åŠGary R.Bradskiåœ¨2011å¹´ä¸€ç¯‡åä¸ºâ€œORBï¼šAn Efficient Alternative to SIFT or SURFâ€çš„æ–‡ç« ä¸­æå‡ºã€‚ ORBç®—æ³•åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯ç‰¹å¾ç‚¹æå–å’Œç‰¹å¾ç‚¹æè¿°ã€‚ç‰¹å¾æå–æ˜¯ç”±FASTï¼ˆFeatures from Accelerated Segment Testï¼‰ç®—æ³•å‘å±•æ¥çš„ï¼Œç‰¹å¾ç‚¹æè¿°æ˜¯æ ¹æ®BRIEFï¼ˆBinary Robust Independent Elementary Featuresï¼‰ç‰¹å¾æè¿°ç®—æ³•æ”¹è¿›çš„ã€‚ ORB &#x3D; oFast + rBRIEFã€‚æ®ç§°ORBç®—æ³•çš„é€Ÿåº¦æ˜¯siftçš„100å€ï¼Œæ˜¯surfçš„10å€ã€‚ ORBç®—å­åœ¨SLAMåŠæ— äººæœºè§†è§‰ç­‰é¢†åŸŸå¾—åˆ°å¹¿æ³›åº”ç”¨ ã€oFASTç‰¹å¾æå–ã€‘ ORBç®—æ³•çš„ç‰¹å¾æå–æ˜¯ç”±FASTç®—æ³•æ”¹è¿›çš„ï¼Œè¿™é‡Œç§°ä¸ºoFASTï¼ˆFAST keypoint Orientationï¼‰ã€‚ åœ¨ä½¿ç”¨FASTæå–å‡ºç‰¹å¾ç‚¹ä¹‹åï¼Œç»™å…¶å®šä¹‰ä¸€ä¸ªç‰¹å¾ç‚¹æ–¹å‘ï¼Œä»¥æ­¤æ¥å®ç°ç‰¹å¾ç‚¹çš„æ—‹è½¬ä¸å˜æ€§ã€‚ ç²—æå– åˆ¤æ–­ç‰¹å¾ç‚¹ï¼šä»å›¾åƒä¸­é€‰å–ä¸€ç‚¹Pï¼Œä»¥Pä¸ºåœ†å¿ƒç”»ä¸€ä¸ªåŠå¾„ä¸º3åƒç´ çš„åœ†ã€‚åœ†å‘¨ä¸Šå¦‚æœæœ‰è¿ç»­Nä¸ªåƒç´ ç‚¹çš„ç°åº¦å€¼æ¯”Pç‚¹çš„ç°åº¦å€¼å¤§æˆ’å°ï¼Œåˆ™è®¤ä¸ºPä¸ºç‰¹å¾ç‚¹ã€‚è¿™å°±æ˜¯å¤§å®¶ç»å¸¸è¯´çš„FAST-Nã€‚æœ‰FAST-9ã€FAST-10ã€FAST-11ã€FAST-12ï¼Œå¤§å®¶ä½¿ç”¨æ¯”è¾ƒå¤šçš„æ˜¯FAST-9å’ŒFAST-12ã€‚ å¿«é€Ÿç®—æ³•ï¼šä¸ºäº†åŠ å¿«ç‰¹å¾ç‚¹çš„æå–ï¼Œå¿«é€Ÿæ’å‡ºéç‰¹å¾ç‚¹ï¼Œé¦–å…ˆæ£€æµ‹1ã€5ã€9ã€13ä½ç½®ä¸Šçš„ç°åº¦å€¼ï¼Œå¦‚æœPæ˜¯ç‰¹å¾ç‚¹ï¼Œé‚£ä¹ˆè¿™å››ä¸ªä½ç½®ä¸Šæœ‰3ä¸ªæˆ–3ä¸ªä»¥ä¸Šçš„çš„åƒç´ å€¼éƒ½å¤§äºæˆ–è€…å°äºPç‚¹çš„ç°åº¦å€¼ã€‚å¦‚æœä¸æ»¡è¶³ï¼Œåˆ™ç›´æ¥æ’å‡ºæ­¤ç‚¹ã€‚ ç­›é€‰æœ€ä¼˜ç‰¹å¾ç‚¹æœºå™¨å­¦ä¹ çš„æ–¹æ³•ç­›é€‰æœ€ä¼˜ç‰¹å¾ç‚¹ã€‚ç®€å•æ¥è¯´å°±æ˜¯ä½¿ç”¨ID3ç®—æ³•è®­ç»ƒä¸€ä¸ªå†³ç­–æ ‘ï¼Œå°†ç‰¹å¾ç‚¹åœ†å‘¨ä¸Šçš„16ä¸ªåƒç´ è¾“å…¥å†³ç­–æ ‘ä¸­ï¼Œä»¥æ­¤æ¥ç­›é€‰å‡ºæœ€ä¼˜çš„FASTç‰¹å¾ç‚¹ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š é€‰å–è¿›è¡Œè§’ç‚¹æå–çš„åº”ç”¨åœºæ™¯ä¸‹çš„ä¸€ç»„è®­ç»ƒå›¾åƒã€‚ ä½¿ç”¨FASTè§’ç‚¹æ£€æµ‹ç®—æ³•æ‰¾å‡ºè®­ç»ƒå›¾åƒä¸Šçš„æ‰€æœ‰è§’ç‚¹ã€‚ å¯¹äºæ¯ä¸€ä¸ªè§’ç‚¹ï¼Œå°†å…¶å‘¨å›´çš„16ä¸ªåƒç´ å­˜å‚¨æˆä¸€ä¸ªå‘é‡ã€‚å¯¹æ‰€æœ‰å›¾åƒéƒ½è¿™æ ·åšæ„å»ºä¸€ä¸ªç‰¹å¾å‘é‡ã€‚ æ¯ä¸€ä¸ªè§’ç‚¹çš„16åƒç´ ç‚¹éƒ½å±äºä¸‹åˆ—ä¸‰ç±»ä¸­çš„ä¸€ç§ï¼Œåƒç´ ç‚¹å› æ­¤è¢«åˆ†æˆä¸‰ä¸ªå­é›†:$P_dã€P_sã€P_b$ å®šä¹‰ä¸€ä¸ªæ–°çš„å¸ƒå°”å˜é‡Kp ï¼Œå¦‚æœæ˜¯è§’ç‚¹å°±è®¾ç½®ä¸ºTrueï¼Œå¦åˆ™å°±è®¾ç½®ä¸ºFalseã€‚ ä½¿ç”¨ID3ç®—æ³•æ¥æŸ¥è¯¢æ¯ä¸€ä¸ªå­é›†ã€‚ é€’å½’è®¡ç®—æ‰€æœ‰çš„å­é›†ç›´åˆ°å®ƒçš„ç†µä¸º0ã€‚ æ³¨æ„ï¼šè¢«æ„å»ºå¥½çš„å†³ç­–æ ‘å¯ç”¨äºå…¶å®ƒå›¾åƒçš„FASTæ£€æµ‹ã€‚ ä½¿ç”¨éæå¤§å€¼æŠ‘åˆ¶ç®—æ³•å»é™¤ä¸´è¿‘ä½ç½®å¤šä¸ªç‰¹å¾ç‚¹ è®¡ç®—ç‰¹å¾ç‚¹å‡ºçš„FASTå¾—åˆ†å€¼sï¼ˆåƒç´ ç‚¹ä¸å‘¨å›´16ä¸ªåƒç´ ç‚¹å·®å€¼çš„ç»å¯¹å€¼ä¹‹å’Œï¼‰ ä»¥ç‰¹å¾ç‚¹pä¸ºä¸­å¿ƒçš„ä¸€ä¸ªé‚»åŸŸï¼ˆå¦‚3x3æˆ–5x5ï¼‰å†…ï¼Œè‹¥æœ‰å¤šä¸ªç‰¹å¾ç‚¹ï¼Œåˆ™åˆ¤æ–­æ¯ä¸ªç‰¹å¾ç‚¹çš„så€¼ è‹¥pæ˜¯é‚»åŸŸæ‰€æœ‰ç‰¹å¾ç‚¹ä¸­å“åº”å€¼æœ€å¤§çš„ï¼Œåˆ™ä¿ç•™ï¼›å¦åˆ™ï¼ŒæŠ‘åˆ¶ã€‚è‹¥é‚»åŸŸå†…åªæœ‰ä¸€ä¸ªç‰¹å¾ç‚¹ï¼Œåˆ™ä¿ç•™ã€‚å¾—åˆ†è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼ˆå…¬å¼ä¸­ç”¨Vè¡¨ç¤ºå¾—åˆ†ï¼Œtè¡¨ç¤ºé˜ˆå€¼ï¼‰ï¼š å»ºç«‹é‡‘å­—å¡”ä»¥å®ç°ç‰¹å¾ç‚¹å¤šå°ºåº¦ä¸å˜æ€§ è®¾ç½®ä¸€ä¸ªæ¯”ä¾‹å› å­scaleFactorï¼ˆopencvé»˜è®¤ä¸º1.2ï¼‰å’Œé‡‘å­—å¡”çš„å±‚æ•°nlevelsï¼ˆOpencvé»˜è®¤ä¸º8ï¼‰ã€‚ å°†åŸå›¾åƒæŒ‰æ¯”ä¾‹å› å­ç¼©å°æˆnlevelså¹…å›¾åƒã€‚ ç¼©æ”¾åçš„å›¾åƒä¸ºï¼šIâ€™&#x3D; I&#x2F;scaleFactork(k&#x3D;1,2,â€¦, nlevels)ã€‚nlevelså¹…ä¸åŒæ¯”ä¾‹çš„å›¾åƒæå–ç‰¹å¾ç‚¹æ€»å’Œä½œä¸ºè¿™å¹…å›¾åƒçš„oFASTç‰¹å¾ç‚¹ã€‚ ç‰¹å¾ç‚¹çš„æ—‹è½¬ä¸å˜æ€§ã€‚ORBç®—æ³•æå‡ºä½¿ç”¨çŸ©ï¼ˆmomentï¼‰æ³•æ¥ç¡®å®šFASTç‰¹å¾ç‚¹çš„æ–¹å‘ã€‚ä¹Ÿå°±æ˜¯è¯´é€šè¿‡çŸ©æ¥è®¡ç®—ç‰¹å¾ç‚¹ä»¥rä¸ºåŠå¾„èŒƒå›´å†…çš„è´¨å¿ƒï¼Œç‰¹å¾ç‚¹åæ ‡åˆ°è´¨å¿ƒå½¢æˆä¸€ä¸ªå‘é‡ä½œä¸ºè¯¥ç‰¹å¾ç‚¹çš„æ–¹å‘ã€‚çŸ©å®šä¹‰å¦‚ä¸‹:$m_{pq}&#x3D;\\Sigma_{x,y} x^p y^q I(x,y), x,y \\in [-r,r]$ å…¶ä¸­ï¼ŒI(x,y)ä¸ºå›¾åƒç°åº¦è¡¨è¾¾å¼ã€‚è¯¥çŸ©çš„è´¨å¿ƒä¸ºï¼š$C &#x3D; ( \\dfrac{m_{10}}{m_{00}}, \\dfrac{m_{01}}{m_{00}})$ å‡è®¾è§’ç‚¹åæ ‡ä¸ºOï¼Œåˆ™å‘é‡çš„è§’åº¦å³ä¸ºè¯¥ç‰¹å¾ç‚¹çš„æ–¹å‘ã€‚è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š$\\theta &#x3D; arctan(m_{01}&#x2F;m_{10})$ ç®—æ³•ç‰¹ç‚¹ FASTç®—æ³•æ¯”å…¶ä»–è§’ç‚¹æ£€æµ‹ç®—æ³•è¦å¿« å—å›¾åƒå™ªå£°ä»¥åŠè®¾å®šé˜ˆå€¼å½±å“è¾ƒå¤§ å½“è®¾ç½®n&lt;12n&lt;12æ—¶ï¼Œä¸èƒ½ç”¨å¿«é€Ÿæ–¹æ³•è¿‡æ»¤éè§’ç‚¹ FASTä¸äº§ç”Ÿå¤šå°ºåº¦ç‰¹å¾ï¼Œä¸å…·å¤‡æ—‹è½¬ä¸å˜æ€§ï¼Œè€Œä¸”æ£€æµ‹åˆ°çš„è§’ç‚¹ä¸æ˜¯æœ€ä¼˜ ã€rBRIEFã€‘ ORBç®—æ³•çš„ç‰¹å¾æè¿°æ˜¯ç”±BRIEFç®—æ³•æ”¹è¿›çš„ï¼Œè¿™é‡Œç§°ä¸ºrBRIEFï¼ˆRotation-Aware Briefï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨BRIEFç‰¹å¾æè¿°çš„åŸºç¡€ä¸ŠåŠ å…¥æ—‹è½¬å› å­ä»è€Œæ”¹è¿›BRIEFç®—æ³•ã€‚ ç®—æ³•æè¿° å¾—åˆ°ç‰¹å¾ç‚¹åæˆ‘ä»¬éœ€è¦ä»¥æŸç§æ–¹å¼æè¿°è¿™äº›ç‰¹å¾ç‚¹çš„å±æ€§ã€‚è¿™äº›å±æ€§çš„è¾“å‡ºæˆ‘ä»¬ç§°ä¹‹ä¸ºè¯¥ç‰¹å¾ç‚¹çš„æè¿°å­ï¼ˆFeature Descritorsï¼‰.ORBé‡‡ç”¨BRIEFç®—æ³•æ¥è®¡ç®—ä¸€ä¸ªç‰¹å¾ç‚¹çš„æè¿°å­ã€‚BRIEFç®—æ³•çš„æ ¸å¿ƒæ€æƒ³æ˜¯åœ¨å…³é”®ç‚¹Pçš„å‘¨å›´ä»¥ä¸€å®šæ¨¡å¼é€‰å–Nä¸ªç‚¹å¯¹ï¼ŒæŠŠè¿™Nä¸ªç‚¹å¯¹çš„æ¯”è¾ƒç»“æœç»„åˆèµ·æ¥ä½œä¸ºæè¿°å­ã€‚ BRIEFç®—æ³•è®¡ç®—å‡ºæ¥çš„æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶ä¸²çš„ç‰¹å¾æè¿°ç¬¦ã€‚å®ƒæ˜¯åœ¨ä¸€ä¸ªç‰¹å¾ç‚¹çš„é‚»åŸŸå†…ï¼Œé€‰æ‹©nå¯¹åƒç´ ç‚¹$p_iã€q_iï¼ˆi&#x3D;1,2,â€¦,nï¼‰$ã€‚ æ¯”è¾ƒæ¯ä¸ªç‚¹å¯¹çš„ç°åº¦å€¼çš„å¤§å°ï¼Œå¦‚æœ$I(p_i)&gt; I(q_i)$ï¼Œåˆ™ç”ŸæˆäºŒè¿›åˆ¶ä¸²ä¸­çš„1ï¼Œå¦åˆ™ä¸º0ã€‚ æ‰€æœ‰çš„ç‚¹å¯¹éƒ½è¿›è¡Œæ¯”è¾ƒï¼Œåˆ™ç”Ÿæˆé•¿åº¦ä¸ºnçš„äºŒè¿›åˆ¶ä¸²ã€‚ä¸€èˆ¬nå–128ã€256æˆ’512ï¼Œopencvé»˜è®¤ä¸º256ã€‚ ç®—æ³•æ­¥éª¤ ä»¥å…³é”®ç‚¹Pä¸ºåœ†å¿ƒï¼Œä»¥dä¸ºåŠå¾„åšåœ†Oã€‚ åœ¨åœ†Oå†…æŸä¸€æ¨¡å¼é€‰å–Nä¸ªç‚¹å¯¹ã€‚è¿™é‡Œä¸ºæ–¹ä¾¿è¯´æ˜ï¼ŒN&#x3D;4ï¼Œå®é™…åº”ç”¨ä¸­Nå¯ä»¥å–512. å‡è®¾å½“å‰é€‰å–çš„4ä¸ªç‚¹å¯¹å¦‚ä¸Šå›¾æ‰€ç¤ºåˆ†åˆ«æ ‡è®°ä¸ºï¼š å®šä¹‰Tï¼š åˆ†åˆ«å¯¹å·²é€‰å–çš„ç‚¹å¯¹è¿›è¡ŒTæ“ä½œï¼Œå°†å¾—åˆ°çš„ç»“æœè¿›è¡Œç»„åˆã€‚ åˆ™æœ€ç»ˆçš„æè¿°å­ä¸ºï¼š1011 å…·æœ‰æ—‹è½¬ä¸å˜æ€§çš„BRIEFâ€‹ ORBå¹¶æ²¡æœ‰è§£å†³å°ºåº¦ä¸€è‡´æ€§é—®é¢˜ï¼Œåœ¨OpenCVçš„ORBå®ç°ä¸­é‡‡ç”¨äº†å›¾åƒé‡‘å­—å¡”æ¥æ”¹å–„è¿™æ–¹é¢çš„æ€§èƒ½ã€‚ORBä¸»è¦è§£å†³BRIEFæè¿°å­ä¸å…·å¤‡æ—‹è½¬ä¸å˜æ€§çš„é—®é¢˜ã€‚ steered BRIEFï¼ˆæ—‹è½¬ä¸å˜æ€§æ”¹è¿›ï¼‰ åœ¨ä½¿ç”¨oFastç®—æ³•è®¡ç®—å‡ºçš„ç‰¹å¾ç‚¹ä¸­åŒ…æ‹¬äº†ç‰¹å¾ç‚¹çš„æ–¹å‘è§’åº¦ã€‚å‡è®¾åŸå§‹çš„BRIEFç®—æ³•åœ¨ç‰¹å¾ç‚¹SxSï¼ˆä¸€èˆ¬Så–31ï¼‰é‚»åŸŸå†…é€‰å–nå¯¹ç‚¹é›†ã€‚ ç»è¿‡æ—‹è½¬è§’åº¦Î¸æ—‹è½¬ï¼Œå¾—åˆ°æ–°çš„ç‚¹å¯¹$D_\\theta&#x3D;R_\\theta D$ åœ¨æ–°çš„ç‚¹é›†ä½ç½®ä¸Šæ¯”è¾ƒç‚¹å¯¹çš„å¤§å°å½¢æˆäºŒè¿›åˆ¶ä¸²çš„æè¿°ç¬¦ã€‚ æè¿°å­çš„åŒºåˆ†æ€§ é€šè¿‡ä¸Šè¿°æ–¹æ³•å¾—åˆ°çš„ç‰¹å¾æè¿°å­å…·æœ‰æ—‹è½¬ä¸å˜æ€§ï¼Œç§°ä¸ºsteered BRIEF(sBRIEF)ï¼Œä½†åŒ¹é…æ•ˆæœå´ä¸å¦‚åŸå§‹BRIEFç®—æ³•ï¼Œå› ä¸ºå¯åŒºåˆ†æ€§å‡å¼±äº†ã€‚ç‰¹å¾æè¿°å­çš„ä¸€ä¸ªè¦æ±‚å°±æ˜¯è¦å°½å¯èƒ½åœ°è¡¨è¾¾ç‰¹å¾ç‚¹çš„ç‹¬ç‰¹æ€§ï¼Œä¾¿äºåŒºåˆ†ä¸åŒçš„ç‰¹å¾ç‚¹ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸ºå‡ ç§ç‰¹å¾æè¿°å­çš„å‡å€¼åˆ†å¸ƒï¼Œæ¨ªè½´ä¸ºå‡å€¼ä¸0.5ä¹‹é—´çš„è·ç¦»ï¼Œçºµè½´ä¸ºç›¸åº”å‡å€¼ä¸‹ç‰¹å¾ç‚¹çš„ç»Ÿè®¡æ•°é‡ã€‚å¯ä»¥çœ‹å‡ºï¼ŒBRIEFæè¿°å­æ‰€æœ‰æ¯”ç‰¹ä½çš„å‡å€¼æ¥è¿‘äº0.5ï¼Œä¸”æ–¹å·®å¾ˆå¤§ï¼›æ–¹å·®è¶Šå¤§è¡¨æ˜å¯åŒºåˆ†æ€§è¶Šå¥½ã€‚ä¸åŒç‰¹å¾ç‚¹çš„æè¿°å­è¡¨ç°å‡ºè¾ƒå¤§çš„å·®å¼‚æ€§ï¼Œä¸æ˜“é€ æˆæ— åŒ¹é…ã€‚ä½†steered BRIEFè¿›è¡Œäº†åæ ‡æ—‹è½¬ï¼ŒæŸå¤±äº†è¿™ä¸ªç‰¹æ€§ï¼Œå¯¼è‡´å¯åŒºåˆ†æ€§å‡å¼±ï¼Œç›¸å…³æ€§å˜å¼ºï¼Œä¸åˆ©äºåŒ¹é…ã€‚ ä¸ºäº†è§£å†³steered BRIEFå¯åŒºåˆ†æ€§é™ä½çš„é—®é¢˜ï¼ŒORBä½¿ç”¨äº†ä¸€ç§åŸºäºå­¦ä¹ çš„æ–¹æ³•æ¥é€‰æ‹©ä¸€å®šæ•°é‡çš„éšæœºç‚¹å¯¹ã€‚ é¦–å…ˆå»ºç«‹ä¸€ä¸ªå¤§çº¦300kç‰¹å¾ç‚¹çš„æ•°æ®é›†(ç‰¹å¾ç‚¹æ¥æºäºPASCAL2006ä¸­çš„å›¾åƒ)ï¼Œå¯¹æ¯ä¸ªç‰¹å¾ç‚¹ï¼Œè€ƒè™‘å…¶31Ã—31çš„é‚»åŸŸPatchï¼Œä¸ºäº†å»é™¤å™ªå£°çš„å¹²æ‰°ï¼Œé€‰æ‹©5Ã—5çš„å­çª—å£çš„ç°åº¦å‡å€¼ä»£æ›¿å•ä¸ªåƒç´ çš„ç°åº¦ï¼Œè¿™æ ·æ¯ä¸ªPatchå†…å°±æœ‰N&#x3D;(31âˆ’5+1)Ã—(31âˆ’5+1)&#x3D;27Ã—27&#x3D;729ä¸ªå­çª—å£ï¼Œä»ä¸­éšæœºé€‰å–2ä¸ªéé‡å¤çš„å­çª—å£ï¼Œä¸€å…±æœ‰$M&#x3D;C_N^2$ä¸­æ–¹æ³•ã€‚ è¿™æ ·ï¼Œæ¯ä¸ªç‰¹å¾ç‚¹ä¾¿å¯æå–å‡ºä¸€ä¸ªé•¿åº¦ä¸ºMçš„äºŒè¿›åˆ¶ä¸²ï¼Œæ‰€æœ‰ç‰¹å¾ç‚¹å¯æ„æˆä¸€ä¸ª300kÃ—Mçš„äºŒè¿›åˆ¶çŸ©é˜µQï¼ŒçŸ©é˜µä¸­æ¯ä¸ªå…ƒç´ å–å€¼ä¸º0æˆ–1ã€‚ç°åœ¨éœ€è¦ä»Mä¸ªç‚¹å¯¹ä¸­é€‰å–256ä¸ªç›¸å…³æ€§æœ€å°ã€å¯åŒºåˆ†æ€§æœ€å¤§çš„ç‚¹å¯¹ï¼Œä½œä¸ºæœ€ç»ˆçš„äºŒè¿›åˆ¶ç¼–ç ã€‚ç­›é€‰æ–¹æ³•å¦‚ä¸‹ï¼š å¯¹çŸ©é˜µQçš„æ¯ä¸€åˆ—æ±‚å–å‡å€¼ï¼Œå¹¶æ ¹æ®å‡å€¼ä¸0.5ä¹‹é—´çš„è·ç¦»ä»å°åˆ°å¤§çš„é¡ºåºï¼Œä¾æ¬¡å¯¹æ‰€æœ‰åˆ—å‘é‡è¿›è¡Œé‡æ–°æ’åºï¼Œå¾—åˆ°çŸ©é˜µT å°†Tä¸­çš„ç¬¬ä¸€åˆ—å‘é‡æ”¾åˆ°ç»“æœçŸ©é˜µRä¸­ å–å‡ºTä¸­çš„ä¸‹ä¸€åˆ—å‘é‡ï¼Œè®¡ç®—å…¶ä¸çŸ©é˜µRä¸­æ‰€æœ‰åˆ—å‘é‡çš„ç›¸å…³æ€§ï¼Œå¦‚æœç›¸å…³ç³»æ•°å°äºç»™å®šé˜ˆå€¼ï¼Œåˆ™å°†Tä¸­çš„è¯¥åˆ—å‘é‡ç§»è‡³çŸ©é˜µRä¸­ï¼Œå¦åˆ™ä¸¢å¼ƒ å¾ªç¯æ‰§è¡Œä¸Šä¸€æ­¥ï¼Œç›´åˆ°Rä¸­æœ‰256ä¸ªåˆ—å‘é‡ï¼›å¦‚æœéå†Tä¸­æ‰€æœ‰åˆ—ï¼ŒRä¸­å‘é‡åˆ—æ•°è¿˜ä¸æ»¡256ï¼Œåˆ™å¢å¤§é˜ˆå€¼ï¼Œé‡å¤ä»¥ä¸Šæ­¥éª¤ã€‚ è¿™æ ·ï¼Œæœ€åå¾—åˆ°çš„å°±æ˜¯ç›¸å…³æ€§æœ€å°çš„256å¯¹éšæœºç‚¹ï¼Œè¯¥æ–¹æ³•ç§°ä¸ºrBRIEFã€‚ ã€æ€»ç»“ã€‘ ORB &#x3D; oFAST + rBRIEF oFASTæ˜¯ä¸€ç±»å¿«é€Ÿè§’ç‚¹æ£€æµ‹ç®—æ³•ï¼Œå¹¶å…·å¤‡æ—‹è½¬ä¸å˜æ€§ rBRIEFæ˜¯ä¸€ç±»è§’ç‚¹æè¿°(ç¼–ç ç®—æ³•)ï¼Œå¹¶ä¸”ç¼–ç å…·æœ‰è‰¯å¥½çš„å¯åŒºåˆ†æ€§ ä»£ç å®ä¾‹123456789101112131415161718192021222324252627#!/usr/bin/env python# -*- coding: utf-8 -*-# @Time : 2019/1/19 13:30# @Author : Seven# @File : ORBDemo.py# @Software: PyCharmimport cv2import numpy as npimg1 = cv2.imread(&#x27;csdn.png&#x27;)img2 = np.rot90(img1)orb = cv2.ORB_create(50)# ç‰¹å¾ç‚¹æ£€æµ‹å’Œæå–ç‰¹å¾ç‚¹æè¿°å­kp1, des1 = orb.detectAndCompute(img1, None)kp2, des2 = orb.detectAndCompute(img2, None)# åˆ›å»º BFMatcher å¯¹è±¡bf = cv2.BFMatcher(cv2.NORM_L2)# æ ¹æ®æè¿°å­åŒ¹é…ç‰¹å¾ç‚¹.matches = bf.match(des1, des2)# ç”»å‡º50ä¸ªåŒ¹é…ç‚¹img3 = cv2.drawMatches(img1, kp1, img2, kp2, matches[:50], None, flags=2)cv2.imshow(&quot;ORB&quot;, img3)cv2.waitKey(0)","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"https://aicc-cn.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"https://aicc-cn.github.io/tags/OpenCV/"}],"author":"Seven"},{"title":"OpenCVç¯å¢ƒé…ç½®ï¼ˆwin10+opencv3.4.1+vs2017ï¼‰","slug":"2019-01-07-opencv-setup","date":"2019-01-06T16:00:00.000Z","updated":"2022-03-25T13:50:44.667Z","comments":true,"path":"2019/01/07/2019-01-07-opencv-setup/","link":"","permalink":"https://aicc-cn.github.io/2019/01/07/2019-01-07-opencv-setup/","excerpt":"","text":"ç®€ä»‹ï¼š OpenCVæ˜¯ä¸€ä¸ªåŸºäºBSDè®¸å¯ï¼ˆå¼€æºï¼‰å‘è¡Œçš„è·¨å¹³å°è®¡ç®—æœºè§†è§‰åº“ï¼Œå¯ä»¥è¿è¡Œåœ¨Linuxã€Windowsã€Androidå’ŒMac OSæ“ä½œç³»ç»Ÿä¸Šã€‚å®ƒè½»é‡çº§è€Œä¸”é«˜æ•ˆâ€”â€”ç”±ä¸€ç³»åˆ— C å‡½æ•°å’Œå°‘é‡ C++ ç±»æ„æˆï¼ŒåŒæ—¶æä¾›äº†Pythonã€Javaã€Rubyã€MATLABç­‰è¯­è¨€çš„æ¥å£ï¼Œå®ç°äº†å›¾åƒå¤„ç†å’Œè®¡ç®—æœºè§†è§‰æ–¹é¢çš„å¾ˆå¤šé€šç”¨ç®—æ³•ã€‚ ç³»ç»Ÿç¯å¢ƒç³»ç»Ÿï¼šwindows 10 - 1809 OpenCVç‰ˆæœ¬ï¼š3.4.1 Microsoft Visio Studioï¼š2017 ç¯å¢ƒå®‰è£… é»˜è®¤vs2017å·²ç»å®‰è£…ã€‚ ä¸‹è½½è·¯å¾„ï¼šä»OpenCV Libraryä¸‹è½½å®‰è£…åŒ…å¹¶å®‰è£… è¿›å…¥å®˜ç½‘é¦–é¡µï¼Œç‚¹å‡»ã€Releasesã€‘ åœ¨Releases ç•Œé¢ä¸‹æ‰¾åˆ°3.4.1ç‰ˆæœ¬, å› ä¸ºæ˜¯Windowså¹³å°ä¸”ä½¿ç”¨å®‰è£…åŒ…æ–¹å¼ï¼Œæ•…ç‚¹å‡»ã€Win packã€‘ ä¸‹è½½å®Œæ¯•åï¼Œã€åŒå‡»å®‰è£…åŒ…ã€‘å¼€å§‹å®‰è£… æˆ‘è¿™é‡Œæ˜¯å®‰è£…åœ¨Dç›˜ï¼Œä¸ç”¨å†æ–°å»ºæ–‡ä»¶å¤¹ï¼Œè§£å‹åä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªã€opencvã€‘çš„æ–‡ä»¶å¤¹ã€‚ æ³¨æ„ï¼šå®‰è£…è·¯å¾„ä¸è¦æœ‰ä¸­æ–‡ï¼Œé¿å…å‡ºç°é—®é¢˜ã€‚ ç­‰å¾…ï¼Œç›´åˆ°å®‰è£…å®Œæ¯•ã€‚ é…ç½®OpenCVçš„ç³»ç»Ÿç¯å¢ƒ åœ¨ã€æ¡Œé¢ã€‘æˆ–è€…ã€èµ„æºç®¡ç†å™¨ã€‘-&gt; ã€å³å‡»ã€‘ã€æ­¤ç”µè„‘ã€‘-&gt; é€‰æ‹©ã€å±æ€§ã€‘ é€‰æ‹©ã€é«˜çº§ç³»ç»Ÿè®¾ç½®ã€‘-&gt; ç‚¹å‡»ã€ç¯å¢ƒå˜é‡ã€‘ ç¯å¢ƒå˜é‡ç•Œé¢åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸Šæ–¹ä¸ºã€ç”¨æˆ·å˜é‡ã€‘ï¼Œä¸‹æ–¹ä¸ºã€ç³»ç»Ÿå˜é‡ã€‘ åœ¨ã€ç³»ç»Ÿå˜é‡ã€‘åˆ—è¡¨ä¸­æ‰¾åˆ°ã€Pathã€‘ï¼ŒåŒå‡»æ‰“å¼€ åœ¨æ‰“å¼€ç•Œé¢çš„å³ä¾§åˆ—è¡¨ä¸­é€‰æ‹©ã€æµè§ˆã€‘,è¿›å…¥opencvå®‰è£…è·¯å¾„å¹¶é€‰å–XXXX\\opencv\\build\\x64\\vc14\\binç›®å½•ï¼Œé€çº§ã€ç¡®å®šã€‘ä¿å­˜ã€‚ ç³»ç»Ÿç¯å¢ƒå˜é‡è®¾ç½®å®Œæ¯•ã€‚ åœ¨VS2017é¡¹ç›®ä¸­é…ç½®OpenCVã€æ–°å»ºç©ºé¡¹ç›®ã€‘ ã€æ–°å»ºcppæ–‡ä»¶ã€‘å³å‡»-&gt;ã€æºæ–‡ä»¶ã€‘-&gt; ã€æ·»åŠ ã€‘-&gt; ã€æ–°å»ºé¡¹ã€‘ ã€å±æ€§ç®¡ç†ã€‘VS2017ä¸Šæ–¹èœå•æ æ‰¾åˆ°ã€è§†å›¾ã€‘â€“&gt;ã€å…¶ä»–çª—å£ã€‘â€“&gt;ã€å±æ€§ç®¡ç†å™¨ã€‘ï¼Œç‚¹å‡»å¼€å¯ ã€Debug X64è®¾ç½®ã€‘å³å‡»ã€Debug|x64ã€‘,ç‚¹å‡»ã€å±æ€§ã€‘ åœ¨å·¦ä¾§ã€é€šç”¨å±æ€§ã€‘èœå•ä¸‹æ‰¾åˆ°ã€VC++ç›®å½•ã€‘ï¼Œç‚¹å‡»ï¼Œå³ä¾§æ‰¾åˆ°ã€åŒ…å«ç›®å½•ã€‘ï¼Œç‚¹å‡»ï¼Œå³ä¾§å‡ºç°ã€å€’ä¸‰è§’ã€‘ï¼Œç‚¹å‡»ï¼Œåœ¨å¼¹å‡ºä¸‹æ‹‰åˆ—è¡¨ä¸­ç‚¹å‡»ã€ç¼–è¾‘ã€‘ åœ¨å¼¹å‡ºç•Œé¢ä¸­é€šè¿‡ç‚¹å‡»å³ä¸Šè§’ã€æ–°è¡Œã€‘æŒ‰é’®ï¼Œæ·»åŠ ä¸‰æ¡è·¯å¾„ï¼šã€XXXX\\opencv\\build\\include\\opencv2ã€‘ã€XXXX\\opencv\\build\\include\\opencvã€‘ã€XXXX\\opencv\\build\\includeã€‘ åœ¨ã€åº“ç›®å½•ã€‘æ·»åŠ è·¯å¾„ ã€XXXX\\opencv\\build\\x64\\vc14\\libã€‘ åœ¨å·¦ä¾§ã€é€šç”¨å±æ€§ã€‘èœå•ä¸‹æ‰¾åˆ°ã€é“¾æ¥å™¨ã€‘ï¼Œå±•å¼€èœå•ï¼Œé€‰æ‹©ã€è¾“å…¥ã€‘ï¼Œåœ¨å³ä¾§æ‰¾åˆ°ã€é™„åŠ ä¾èµ–é¡¹ã€‘ï¼Œä»¥ã€ç¬¬4æ­¥ã€‘ä¸­åŒæ ·æ–¹å¼æ‰“å¼€ã€ç¼–è¾‘ã€‘ï¼Œåœ¨ä¸Šæ–¹ç©ºç™½å¤„æ‰‹åŠ¨é”®å…¥:ã€opencv_world341d.libã€‘ã€‚ ä¿å­˜é€€å‡º æ­¤å¤„é”®å…¥çš„æ–‡ä»¶éšç‰ˆæœ¬å·ä¸åŒè€Œä¸åŒï¼Œè‹¥éOpenCV 3.4.1ç‰ˆæœ¬å¯è‡ªè¡Œè¿›å…¥ã€XXXX\\opencv\\build\\x64\\vc14\\libã€‘ç›®å½•æŸ¥çœ‹æ–‡ä»¶åå¹¶é”®å…¥ã€‚ ã€Release|x64è®¾ç½®ã€‘é‡å¤æ‰§è¡Œã€Debug|X64è®¾ç½®ã€‘â€“&gt; ä¸åŒçš„å°±æ˜¯ã€ä¾èµ–é¡¹ã€‘çš„é€‰æ‹©ã€‚ æ–‡ä»¶å¤¹ä¸‹ä¼šçœ‹åˆ°å‡ ä¸ªå‡ ä¹åŒåçš„æ–‡ä»¶ï¼ŒåŒºåˆ«ä»…ä»…ä¸ºæ–‡ä»¶åæœ«å°¾æœ‰æ— å­—æ¯dï¼Œå…¶ä¸­dä»£è¡¨debugç‰ˆæœ¬ï¼Œå…¶ä»–ä¸ºreleaseç‰ˆæœ¬ï¼Œä»¥3.4.1ç‰ˆæœ¬ä¸ºä¾‹ï¼Œé…ç½®ã€Debug|x64ã€‘æ—¶ä½¿ç”¨opencv_world341d.libï¼Œé…ç½®ã€Release|x64ã€‘æ—¶ä½¿ç”¨opencv_world341.lib. ã€ç¯å¢ƒæ­å»ºå®Œæˆã€‘åŠŸèƒ½æµ‹è¯•ã€æµ‹è¯•ä»£ç ã€‘123456789101112#include &lt;opencv2/opencv.hpp&gt;#include &lt;iostream&gt;using namespace std;using namespace cv;int main()&#123; Mat image = imread(&quot;opencv.png&quot;); imshow(&quot;æ˜¾ç¤ºå›¾åƒ&quot;, image); waitKey(0); return 0;&#125; ã€è¿è¡Œç¯å¢ƒã€‘ ã€è¿è¡Œç»“æœã€‘ ã€ç¯å¢ƒæ­å»ºæˆåŠŸã€‘é…ç½®å±æ€§è¡¨ æˆ‘ä»¬çŸ¥é“äº†å¦‚ä½•å¯¹æ–°å»ºçš„é¡¹ç›®è¿›è¡Œå±æ€§é…ç½®ï¼Œä½†è‹¥æ¯æ¬¡éƒ½ä»å¤´è¿›è¡Œä¸€éæ˜¯ååˆ†ç¹ççš„ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ã€é…ç½®å±æ€§è¡¨å¹¶å¯¼å‡ºã€‘ï¼Œä¸‹æ¬¡æ–°å»ºé¡¹ç›®æ—¶ã€å¯¼å…¥ã€‘ï¼Œæ¥å‡å°‘è¿™äº›ä¸å¿…è¦çš„é‡å¤åŠ³åŠ¨ã€‚ ã€æ–°å»ºå±æ€§è¡¨ã€‘ ä»¥å¯¹ã€Debug|x64ã€‘æ“ä½œä¸ºä¾‹ï¼Œå³å‡»ï¼Œé€‰æ‹©ã€æ·»åŠ æ–°é¡¹ç›®å±æ€§è¡¨ã€‘ åœ¨è·³å‡ºçš„çª—å£ä¸­é€‰æ‹©ã€å±æ€§è¡¨ã€‘æ ¼å¼æ–‡ä»¶ï¼Œå¯¹æ–‡ä»¶ã€å‘½åã€‘,ã€é€‰æ‹©ä¿å­˜ä½ç½®ã€‘ï¼Œç‚¹å‡»ã€æ·»åŠ ã€‘æ–°å»ºæˆåŠŸ æ­¤æ—¶æˆ‘ä»¬åœ¨ã€Debug|x64ã€‘ç›®å½•ä¸‹ä¼šçœ‹åˆ°åˆ›å»ºå¥½çš„å±æ€§è¡¨æ–‡ä»¶ï¼Œå¯¹å…¶åŒå‡»æ‰“å¼€ï¼Œä»¥åŒæ ·çš„æ–¹å¼é…ç½®ã€åŒ…å«ç›®å½•ã€‘ã€ã€åº“ç›®å½•ã€‘ã€ã€é™„åŠ ä¾èµ–é¡¹ã€‘ï¼Œä¿å­˜ï¼Œå¯¹äºã€Release|x64ã€‘åŒç† ç›¸åº”çš„ä½ç½®å³å¯æ‰¾åˆ°è¿™ä¸¤ä¸ªæ–‡ä»¶ ã€å¯¼å…¥å±æ€§è¡¨ã€‘ä»¥åå†æ¬¡æ–°å»ºé¡¹ç›®åªéœ€åœ¨å±æ€§ç®¡ç†å™¨ä¸­é€šè¿‡ã€æ·»åŠ ç°æœ‰å±æ€§è¡¨ã€‘å¯¼å…¥å³å¯å®Œæˆé…ç½®","categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"https://aicc-cn.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"https://aicc-cn.github.io/tags/OpenCV/"}],"author":"Seven"}],"categories":[{"name":"æœºå™¨è§†è§‰","slug":"æœºå™¨è§†è§‰","permalink":"https://aicc-cn.github.io/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/"}],"tags":[{"name":"OpenCV","slug":"OpenCV","permalink":"https://aicc-cn.github.io/tags/OpenCV/"}]}